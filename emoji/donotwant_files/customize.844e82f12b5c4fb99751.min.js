(window.webpackJsonp=window.webpackJsonp||[]).push([["customize"],{"0F5r":function(e,t,a){},FWo8:function(e,t,a){e.exports=a.p+"channel_prefixes@2x-cc71f59.png"},JLn8:function(e,t,a){},JfWH:function(e,t,a){e.exports=a.p+"Emojis@2x-acf28de.png"},"Mc8/":function(e,t,a){"use strict";var n=a("lwsE"),o=a.n(n),r=a("W8MJ"),i=a.n(r),s=a("PJYZ"),l=a.n(s),c=a("7W2i"),m=a.n(c),u=a("a1gu"),d=a.n(u),p=a("Nsbk"),_=a.n(p),f=a("lSNA"),h=a.n(f),g=a("q1tI"),b=a.n(g),E=a("mM05"),v=a.n(E),j=a("npmo"),y=a("nNoG"),k=a("AzV5"),N=a("3D7r"),C=a("rZal"),x=a("FZE2"),w=a("pu3F"),O=a("5IZy"),S=a("1hAG"),T=a("qDEp"),P=a("XL7r"),I=a("u8wn"),R=a("ayyL"),M=a("4oy+");function A(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=_()(e);if(t){var o=_()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return d()(this,a)}}var D=new y.b("welcome_place"),z=new y.b("member_actions"),L=new y.b("calls_settings"),B=function(e){m()(a,e);var t=A(a);function a(e){var n;return o()(this,a),n=t.call(this,e),h()(l()(n),"texty",void 0),h()(l()(n),"setTextyRef",(function(e){n.texty=e})),h()(l()(n),"onTextChange",(function(){var e=n.state.numCharsOverLimit,t=n.getTextContentsAsBlocks(),a=n.countCharsOverLimit(),o=a>0||e>0;o&&n.setState((function(){return{numCharsOverLimit:a}})),n.props.onTextChange({blocks:t,overLimit:o})})),n.state={numCharsOverLimit:n.countCharsOverLimit()},n}return i()(a,[{key:"focus",value:function(){this.texty&&this.texty.focus()}},{key:"onEnter",value:function(){return!0}},{key:"countCharsOverLimit",value:function(){var e=this.getTextContents(),t=Object(x.a)(new v.a(e));return Math.max(0,t-w.MAX_MESSAGE_INPUT_WYSIWYG_LENGTH)}},{key:"getTextContents",value:function(){if(this.texty){var e=this.texty.getContents();return e&&e.contents}}},{key:"getTextContentsAsBlocks",value:function(){var e=this.props,t=e.initialContents,a=e.onboardingChannelId,n=this.getTextContents();return n?this.props.convertMsgOpsToRichTextMessage({msgOps:n,channelId:a}):t}},{key:"render",value:function(){var e=this.props,t=e.onClickBack,a=e.onClickSave,n=e.hasButtons,o=e.isDisabled,r=e.originalMessageContents,i=b.a.createElement("p",{className:"margin_top_50"},D.t("You can edit this message however you\u2019d like.")),s=b.a.createElement(M.a,{enableEmojiButton:!0,enableMentionButton:!0,enableComposerButton:!0,isDisabled:o,numMaxLines:8,numMinLines:3},b.a.createElement(N.a,{isContainerized:!0,completeOnMembers:!0,completeOnChannels:!0,completeOnEmoji:!0,position:"top",ariaLabel:"",ref:this.setTextyRef,placeholder:D.t("e.g. Let\u2019s try using Slack for\u2026"),enableBroadcastKeywords:!1,enableJumbomoji:this.props.useJumbomoji,isDisabled:o,focusOnMount:!1,maxLines:8,minLines:3,useWysiwyg:!0,onTextChange:this.onTextChange,onEnter:this.onEnter,initialText:r}));return b.a.createElement(b.a.Fragment,null,s,i,n?b.a.createElement("div",{className:"welcome-message-input__buttons"},b.a.createElement(T.f,{className:"margin_right_25",type:"outline",onClick:t},z.t("Back")),b.a.createElement(T.f,{disabled:o,type:"primary",onClick:a,"data-qa":"welcome_message_save_button"},L.t("Save"))):null)}}]),a}(b.a.PureComponent);B.displayName="WelcomeMessageInput",t.a=Object(j.a)((function(e,t){var a=Object(S.e)(e),n=null==a?void 0:a.id,o=Object(P.p)(e,"plain_text_mode"),r={contents:Object(I.a)(e,{blocks:t.initialContents},{usePlainTextMode:o}).ops};return{teamId:n,clogger:Object(O.a)({state:e}),useJumbomoji:Object(C.a)(e),originalMessageContents:r,onboardingChannelId:Object(R.j)(e)}}),(function(e){return{convertMsgOpsToRichTextMessage:function(t){return e(Object(k.a)(t))}}}),null,{forwardRef:!0})(B)},MhL9:function(e,t,a){},NmKD:function(e,t,a){e.exports=a.p+"Emojis@1x-e053fba.png"},T8Zh:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a("aK/h"),o=a("AFNo"),r=a("OqoL"),i=Object(o.e)("Clean message text",(function(e,t,a){var n=a.text,o=a.isInternalMessage,i=t();return Object(r.b)(i,n,{isInternalMessage:o})}));i.meta={name:"cleanMessageTextWithState",key:"actionsMessageCleanMessageTextCleanMessageTextWithState",description:"Clean message text"},i.propTypes={text:n.default.string,isInternalMessage:n.default.bool}},UX7d:function(e,t,a){},hcCp:function(e,t,a){},oOL0:function(e,t,a){e.exports=a.p+"channel_prefixes@1x-02bbf4e.png"},rGd3:function(e,t,a){"use strict";a.r(t);a("dE+T"),a("bHtr"),a("0l/t"),a("dRSK"),a("INYr"),a("6VaU"),a("HEwt"),a("Z2Ku"),a("yt8O"),a("bWfx"),a("6AQ9"),a("I78e"),a("Vd3H"),a("0E+W"),a("AphP"),a("yM4b"),a("IXt9"),a("f3/d"),a("9AAn"),a("fyVe"),a("U2t9"),a("2atp"),a("+auO"),a("MtdB"),a("Jcmo"),a("nzyx"),a("BC7C"),a("x8ZO"),a("9P93"),a("BJ/l"),a("eHKK"),a("pp/T"),a("CyHz"),a("bBoP"),a("x8Yj"),a("hLT2"),a("xfY5"),a("Ljet"),a("/KAi"),a("fN96"),a("7h0T"),a("sbF8"),a("h/M4"),a("knhD"),a("XfKG"),a("BP8U"),a("91GP"),a("RQRG"),a("/uf1"),a("/8Fb"),a("DW2E"),a("mYba"),a("jm62"),a("JduL"),a("5Pf0"),a("uaHG"),a("ZNX/"),a("mura"),a("Btvt"),a("25dN"),a("Zshi"),a("V/DX"),a("FlsD"),a("RW0V"),a("z2o2"),a("hhXQ"),a("CX2u"),a("3xty"),a("I5cv"),a("iMoV"),a("uhZd"),a("0YWM"),a("694e"),a("LTTk"),a("9rMk"),a("IlFx"),a("xpiv"),a("oZ/O"),a("klPD"),a("knU9"),a("Oyvg"),a("OEbY"),a("SRfc"),a("pIFo"),a("KKXr"),a("OG14"),a("a1Th"),a("T39b"),a("ioFf"),a("rE2o"),a("hEkN"),a("nIY7"),a("+oPb"),a("SMB2"),a("oDIu"),a("rvZc"),a("0mN4"),a("bDcW"),a("nsiH"),a("VpUO"),a("L9s1"),a("0LDn"),a("XfO3"),a("tUrg"),a("9XZr"),a("7VC1"),a("eI33"),a("FLlr"),a("84bF"),a("9VmF"),a("FEjr"),a("Zz4T"),a("JCqj"),a("I74W"),a("fA63"),a("xm80"),a("sFw1"),a("NO8f"),a("aqI/r"),a("Faw5"),a("r1bV"),a("tuSo"),a("nCnK"),a("Y9lz"),a("Tdpu"),a("EK0E"),a("wCsR"),a("R5XZ"),a("Ew+T"),a("rGqo"),a("ls82");var n=a("9rZX"),o=a.n(n),r=a("TkQx"),i=a("lSNA"),s=a.n(i),l=a("lwsE"),c=a.n(l),m=a("W8MJ"),u=a.n(m),d=a("PJYZ"),p=a.n(d),_=a("7W2i"),f=a.n(_),h=a("a1gu"),g=a.n(h),b=a("Nsbk"),E=a.n(b),v=a("JfWH"),j=a.n(v),y=a("NmKD"),k=a.n(y),N=a("4Z3G"),C=a("q1tI"),x=a.n(C),w=a("aK/h"),O=a("npmo"),S=a("LXii"),T=a("IniL"),P=a("WIr4"),I=a("1hAG"),R=a("dhvi"),M=a("5IZy"),A=a("ktUG"),D=a("Pw4T"),z=a("nNoG"),L=a("eUIW"),B=a("qDEp"),U=a("6R8Z"),F=a("n5Lk"),q=a("WD4z"),H=a("5WG+"),W=a("tZRe"),G=a("20gP"),Z=a("TSYQ"),X=a.n(Z),V=a("IkEV"),J=a("s4P+"),K=a("JoAr"),Q=a("3dqR"),Y=a("nWdO"),$=a("HOkk"),ee=a("qkTT"),te=a("lqkv"),ae=a("ai/A"),ne=a("b+sM");a("y1nk");function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var re=new z.b("custom_emoji_list"),ie={removeCustomEmoji:S.noop,orgName:null,url:null,enqueueToast:S.noop,onClose:S.noop},se="customize_emoji_single_delete_dialog",le=function(e){f()(a,e);var t=oe(a);function a(e){var n;return c()(this,a),n=t.call(this,e),Object(P.a)(p()(n),["deleteSingleEmoji","renderDeleteSingleEmojiToast"]),n}return u()(a,[{key:"deleteSingleEmoji",value:function(e,t){var a=this;this.props.removeCustomEmoji({emojiName:e}).then((function(){var n=a.renderDeleteSingleEmojiToast(e,t);a.props.enqueueToast({element:n})}))}},{key:"renderDeleteSingleEmojiToast",value:function(e,t){var a=x.a.createElement(ee.b,{text:e,url:t,emojiSize:ee.a.MEDIUM}),n=re.rt("{emojiImg} :{emojiName}: was deleted",{emojiImg:a,emojiName:e});return x.a.createElement(te.b,{toastClasses:"p-customize_emoji_list__toast"},x.a.createElement("span",null,n))}},{key:"render",value:function(){var e,t=this.props,a=t.emojiName,n=t.url,o=t.orgName,r=t.isAlias,i=x.a.createElement("b",null,":",a,":"),s=x.a.createElement(ee.b,{text:a,url:n,emojiSize:ee.a.MEDIUM}),l=r?re.t("Delete this alias?"):re.t("Delete this emoji?");e=o?r?x.a.createElement("div",null," ",re.rt("This will delete the alias {emojiImg} {emojiNameBold} for all members in all <b>{orgName}</b> workspaces.",{emojiImg:s,emojiNameBold:i,orgName:o})," "):x.a.createElement("div",null," ",re.rt("This will delete the custom emoji {emojiImg} {emojiNameBold} for all members in all <b>{orgName}</b> workspaces.",{emojiImg:s,emojiNameBold:i,orgName:o})," "):r?x.a.createElement("div",null," ",re.rt("This will delete the alias {emojiImg} {emojiNameBold} for all members in your workspace.",{emojiImg:s,emojiNameBold:i})," "):x.a.createElement("div",null," ",re.rt("This will delete the custom emoji {emojiImg} {emojiNameBold} for all members in your workspace.",{emojiImg:s,emojiNameBold:i})," ");var c={title:l,showCancelButton:!0,truncateTitle:!1,goButtonText:re.t("Delete Emoji"),goButtonType:"danger",cancelButtonText:re.t("Cancel"),onGo:this.deleteSingleEmoji.bind(this,a,n),onClose:this.props.onClose,overlayClassName:"p-customize_emoji__dialog_overlay",modalBodyOpenClassName:"p-single_emoji_delete_dialog__modal_open",onCancel:S.noop,className:"p-customize_emoji_list__single_delete",children:e,"data-qa":se};return x.a.createElement($.a,c)}}]),a}(C.PureComponent);le.displayName="SingleEmojiDeleteDialog",le.defaultProps=ie;var ce=Object(O.a)(null,(function(e){return{removeCustomEmoji:function(t){return e(Object(ne.e)(t))},enqueueToast:function(){return e(ae.enqueueToast.apply(void 0,arguments))}}}))(le),me=a("Ws5+"),ue=a("17VA"),de=a("535H");function pe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var _e=new z.b("custom_emoji_list"),fe={standardEmojiData:{},removeCustomEmoji:S.noop,isEnterprise:!1,emojiType:"enabled",orgName:null,isAlias:!1,aliasFor:null,url:null,synonyms:null,enqueueToast:S.noop,disabledEmoji:{},onClose:S.noop,permissions:{},closeModal:S.noop},he="delete_custom_emoji_dialog_alias_view",ge="delete_custom_emoji_dialog_emoji_view",be="delete_custom_emoji_dialog_alias_message",Ee="delete_custom_emoji_checkbox",ve=function(e){f()(a,e);var t=pe(a);function a(e){var n;c()(this,a);var o=(n=t.call(this,e)).props,r=o.isAlias,i=o.aliasFor,s=o.emojiName,l=o.synonyms;return n.state={selectedEmojiNames:!r&&l||[s],primaryEmoji:!r&&s||i,primaryEmojiChecked:!r},Object(P.a)(p()(n),["onSubmit","onCheckboxChange","renderDeleteTable","renderDeleteEmojiMessage","renderDeleteAliasMessage","renderDeleteMessage","renderRows","renderActionIcon","removeEmoji","renderToastMessage","onKeyPress"]),n}return u()(a,[{key:"onCheckboxChange",value:function(e){var t=this.state,a=t.selectedEmojiNames,n=t.primaryEmoji,o=this.props.synonyms,r=e.target.getAttribute("data-emoji-name"),i=a.slice(),s=this.state.primaryEmojiChecked;a.includes(r)?(i.splice(i.indexOf(r),1),r===n&&(s=!1,i=[])):(i.push(r),r===n&&(s=!0,i=o)),this.setState((function(){return{selectedEmojiNames:i,primaryEmojiChecked:s}}))}},{key:"onKeyPress",value:function(e){"Enter"===e.key&&this.onCheckboxChange(e)}},{key:"onSubmit",value:function(){if(0!==this.state.selectedEmojiNames.length){this.removeEmoji();var e=this.renderToastMessage();this.props.enqueueToast({element:e}),this.props.onClose(),this.props.closeModal()}}},{key:"removeEmoji",value:function(){var e=this,t=this.state,a=t.selectedEmojiNames,n=t.primaryEmoji,o=t.primaryEmojiChecked,r=this.props.synonyms;o?this.props.removeCustomEmoji({emojiName:n,isPrimaryEmoji:!0,synonyms:r}):a.forEach((function(t){e.props.removeCustomEmoji({emojiName:t})}))}},{key:"renderActionIcon",value:function(e,t){var a=this.state,n=a.selectedEmojiNames,o=a.primaryEmojiChecked,r=a.primaryEmoji,i=this.props,s=i.permissions,l=i.emojiType;return t&&e===r?x.a.createElement(Y.c,{tip:_e.t("Standard emoji cannot be deleted"),zIndex:"above_fs"},x.a.createElement(H.b,{type:"lock",className:"p-delete_custom_emoji_dialog__lock subtle_silver cursor_pointer align_center"})):e!==r&&o||"disabled"===l&&e===r?x.a.createElement("div",null,x.a.createElement(me.a,{checked:n.includes(e)||o,className:"align_center",onChange:this.onCheckboxChange,onKeyPress:this.onKeyPress,"data-emoji-name":e,disabled:!0})):s[e]?x.a.createElement("div",{"data-qa":Ee},x.a.createElement(me.a,{checked:n.includes(e)||o,className:"align_center",onChange:this.onCheckboxChange,onKeyPress:this.onKeyPress,"data-emoji-name":e})):e===r?x.a.createElement(Y.c,{tip:_e.t("Only the person who uploaded this emoji or an admin can delete it"),zIndex:"above_fs"},x.a.createElement(H.b,{type:"lock",className:"p-delete_custom_emoji_dialog__lock subtle_silver cursor_pointer align_center"})):x.a.createElement(Y.c,{tip:_e.t("Only the person who created this alias or an admin can delete it"),zIndex:"above_fs"},x.a.createElement(H.b,{type:"lock",className:"p-delete_custom_emoji_dialog__lock subtle_silver cursor_pointer align_center"}))}},{key:"renderDeleteAliasMessage",value:function(){var e,t=this.props,a=t.standardEmojiData,n=t.emojiName,o=t.url,r=t.aliasFor,i=t.synonyms,s=t.isEnterprise,l=t.orgName,c=t.disabledEmoji,m=t.permissions,u=this.state.primaryEmoji,d=x.a.createElement(ee.b,{text:n,url:o,emojiSize:ee.a.MEDIUM}),p=x.a.createElement(ee.b,{text:r,url:o,emojiSize:ee.a.MEDIUM}),_=x.a.createElement("b",{className:"p-delete_custom_emoji_dialog__formatted_name"},":",n,":");e=n!==u?u in a:u in a&&!(u in c);var f,h=m[u],g=i.length-1;return f=e?_e.rt("{aliasImg} {emojiNameFormatted} is {numAliases, plural, =1 {an alias} other {one of several aliases}} for the standard emoji {emojiImg} <b>:{aliasFor}:</b>. Deleting an alias will not delete the original emoji, as standard emoji cannot be deleted.",{aliasImg:d,emojiNameFormatted:_,numAliases:g,emojiImg:p,aliasFor:r}):h?s?_e.rt("{aliasImg} {emojiNameFormatted} is {numAliases, plural, =1 {an alias} other {one of several aliases}} for {emojiImg} <b>:{aliasFor}:</b>. You can delete just {numAliases, plural, =1 {this alias} other {these aliases}} or the original emoji and {numAliases, plural, =1 {its alias} other {all its aliases}}. This will apply to all <b>{orgName}</b> workspaces.",{aliasImg:d,emojiNameFormatted:_,numAliases:g,emojiImg:p,aliasFor:r,orgName:l}):_e.rt("{aliasImg} {emojiNameFormatted} is {numAliases, plural, =1 {an alias} other {one of several aliases}} for {emojiImg} <b>:{aliasFor}:</b>. You can delete just {numAliases, plural, =1 {this alias} other {these aliases}} or the original emoji and {numAliases, plural, =1 {its alias} other {all its aliases}}.",{aliasImg:d,emojiNameFormatted:_,numAliases:g,emojiImg:p,aliasFor:r}):_e.rt("{aliasImg} {emojiNameFormatted} is {numAliases, plural, =1 {an alias} other {one of several aliases}} for {emojiImg} <b>:{aliasFor}:</b>. If you want to delete the original emoji and {numAliases, plural, =1 {this alias} other {all its aliases}}, you'll need to ask an admin.",{aliasImg:d,emojiNameFormatted:_,numAliases:g,emojiImg:p,aliasFor:r}),x.a.createElement("div",{className:"p-delete_custom_emoji_dialog__message","data-qa":he},x.a.createElement("span",{"data-qa":be},f),this.renderDeleteTable())}},{key:"renderDeleteEmojiMessage",value:function(){var e,t=this.props,a=t.emojiName,n=t.url,o=t.synonyms,r=t.isEnterprise,i=t.orgName,s=t.emojiType,l=x.a.createElement(ee.b,{text:a,url:n,emojiSize:ee.a.MEDIUM}),c=o[0]===a?o[1]:o[0],m=x.a.createElement(ee.b,{text:c,url:n,emojiSize:ee.a.MEDIUM}),u=o.length-1,d=x.a.createElement("b",{className:"p-delete_custom_emoji_dialog__formatted_name"},":",a,":");return e=r?"enabled"===s?_e.rt("{emojiImg} {emojiNameFormatted} has {numAliases, plural, =1 {{aliasImg}  <b>:{aliasName}:</b> an alias} other {multiple aliases}}. You can delete the original emoji (which will also delete {numAliases, plural, =1 {its alias} other {all its aliases}}), or just its {numAliases, plural, =1 {alias} other {aliases}}. This will apply to all <b>{orgName}</b> workspaces.",{emojiImg:l,emojiNameFormatted:d,numAliases:u,aliasImg:m,aliasName:c,orgName:i}):_e.rt("Deleting {emojiImg} {emojiNameFormatted} will also delete its aliases from all <b>{orgName}</b> workspaces. If you want to keep these aliases, you'll need to rename {emojiImg} <b>:{emojiName}:</b> instead.",{emojiImg:l,emojiNameFormatted:d,emojiName:a,orgName:i}):"enabled"===s?_e.rt("{emojiImg} {emojiNameFormatted} has {numAliases, plural, =1 {{aliasImg}  <b>:{aliasName}:</b> an alias} other {multiple aliases}}. You can delete the original emoji (which will also delete {numAliases, plural, =1 {its alias} other {all its aliases}}), or just its {numAliases, plural, =1 {alias} other {aliases}}.",{emojiImg:l,emojiNameFormatted:d,numAliases:u,aliasImg:m,aliasName:c}):_e.rt("Deleting {emojiImg} {emojiNameFormatted} will also delete its aliases. If you want to keep these aliases, you'll need to rename {emojiImg} <b>:{emojiName}:</b> instead.",{emojiImg:l,emojiNameFormatted:d,emojiName:a}),x.a.createElement("div",{className:"p-delete_custom_emoji_dialog__message","data-qa":ge},e,this.renderDeleteTable())}},{key:"renderDeleteMessage",value:function(){return this.props.isAlias?this.renderDeleteAliasMessage():this.renderDeleteEmojiMessage()}},{key:"renderDeleteTable",value:function(){var e=this.renderRows(),t=59*this.props.synonyms.length+"px";return x.a.createElement("div",{className:"p-delete_custom_emoji_dialog__table_container margin_bottom_100"},x.a.createElement(V.a,{useKeyboardNavigableTable:!0,headers:[{id:"header_0",value:""},{id:"header_1",value:""},{id:"header_2",value:""},{id:"header_3",value:""}],rows:e,height:t}))}},{key:"renderRows",value:function(){var e,t,a,n=this.props,o=n.standardEmojiData,r=n.synonyms,i=n.url,s=n.emojiName,l=n.disabledEmoji,c=this.state.primaryEmoji,m=this.renderActionIcon;s!==c&&(r.splice(r.indexOf(s),1),r.unshift(s)),r.splice(r.indexOf(c),1),r.unshift(c),(e=s!==c?c in o:c in o&&!(c in l))?(t=_e.t("Standard emoji"),a=_e.t("Standard")):(t=_e.t("Original emoji"),a=_e.t("Original"));var u=_e.t("Alias"),d=0,p=0;function _(){return"row_"+d+"_item"+(p+=1)}var f=[];return r.forEach((function(n){f.push(function(n){var o=":"+n+":";return{id:"row_"+(d+=1),items:[{value:x.a.createElement("img",{src:i,alt:n,className:"p-delete_custom_emoji_dialog__image"}),id:_()},{value:x.a.createElement("div",{className:"p-delete_custom_emoji_dialog__name black"}," ",o," "),id:_()},{value:n===c?x.a.createElement("div",{className:"sk_foreground_max"},x.a.createElement("div",{className:"p-delete_custom_emoji__short"}," ",a," "),x.a.createElement("div",{className:"p-delete_custom_emoji__long"}," ",t," ")):x.a.createElement("div",{className:"sk_foreground_max"}," ",u," "),id:_()},{value:m(n,e),id:_()}]}}(n))})),f}},{key:"renderToastMessage",value:function(){var e,t=this.props.url,a=this.state,n=a.selectedEmojiNames,o=a.primaryEmoji,r=a.primaryEmojiChecked&&o||n[0],i=x.a.createElement(ee.b,{text:r,url:t,emojiSize:ee.a.MEDIUM}),s=n.length-1;return e=1===n.length?_e.rt("{emojiImg} :{emojiName}: was deleted",{emojiImg:i,emojiName:r}):_e.rt("{emojiImg} :{emojiName}: and {numAliases} {numAliases, plural, =1 {alias} other {aliases}} were deleted",{emojiImg:i,emojiName:r,numAliases:s}),x.a.createElement(te.b,{toastClasses:"p-customize_emoji_list__toast"},x.a.createElement("span",null,e))}},{key:"render",value:function(){var e,t=this.props.emojiType;"enabled"===t?e=_e.t("Choose which emoji to delete"):"disabled"===t&&(e=_e.t("Delete this emoji?"));var a={title:e,showCancelButton:!0,truncateTitle:!1,goButtonText:_e.t("Delete"),goButtonType:"danger",goButtonIsDisabled:0===this.state.selectedEmojiNames.length,cancelButtonText:_e.t("Cancel"),onGo:this.onSubmit,onClose:this.props.onClose,onCancel:S.noop,shouldCloseOnGo:!1,overlayClassName:"p-customize_emoji__dialog_overlay",modalBodyOpenClassName:"p-delete_custom_emoji_dialog__modal_open",className:"p-delete_custom_emoji_dialog__container",children:x.a.createElement("div",null,this.renderDeleteMessage())};return x.a.createElement($.a,a)}}]),a}(C.PureComponent);ve.displayName="DeleteCustomEmojiDialog",ve.defaultProps=fe;var je=Object(O.a)((function(e){return{standardEmojiData:Object(de.d)(e),disabledEmoji:Object(ue.getDisabledEmoji)(e)}}),(function(e){return{removeCustomEmoji:function(t){return e(Object(ne.e)(t))},enqueueToast:function(){return e(ae.enqueueToast.apply(void 0,arguments))},closeModal:function(){return e(Object(R.closeModal)())}}}))(ve),ye="customize_emoji_table_load",ke="CUSTOM_EMOJI_LIST";function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Ce=new z.b("custom_emoji_list"),xe={openModal:S.noop,customEmojiData:[],standardEmojiData:{},fetchCustomEmojiNextPage:S.noop,isLoadingNewPage:!1,isLoadingNewSearchQuery:!1,lastPageRetrieved:1,totalPages:0,sortBy:null,sortDir:null,deletedEmojiList:[],getEmojiInfo:S.noop,onSearchArgumentsChange:S.noop,searchArgs:{}},we=Object(J.b)(),Oe="asc",Se="desc",Te="arrow-up-medium",Pe="arrow-down-medium",Ie=function(e){f()(a,e);var t=Ne(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).useTemplateCache=!1,n.templateCache={},n.state={rows:[],height:null},n.tableViewControllerRef=null,Object(P.a)(p()(n),["onRequestNextPage","onClickSortableHeader","confirmRemoveEmoji","getUserInfo","makeRows","openSingleDeleteDialog","refreshTableHeight","refreshTableHeightPolitely","renderDeleteButton"]),n}return u()(a,[{key:"componentDidMount",value:function(){var e=this.props.telemeter;this.makeRows(),this.refreshTableHeightPolitely();var t=e.measureAndClear(ye+"_mark",ye),a=e.measure("navigationStart","customize_emoji_time_to_usable");we.info(ke,"\u23f2\ufe0f Load time for emoji data from API: "+t+"ms"),we.info(ke,"\u23f2\ufe0f Total time to usable: "+a+"ms"),window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function(e){e.customEmojiData!==this.props.customEmojiData&&(this.makeRows(),this.refreshTableHeightPolitely())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"onClickSortableHeader",value:function(e){var t=this.props,a=t.onSearchArgumentsChange,n=t.sortBy,o=t.sortDir,r=n,i=o;i=e.id===n?o&&o!==Oe?Oe:Se:"created"===(r=e.id)?Se:Oe,a({sortBy:r,sortDir:i})}},{key:"onRequestNextPage",value:function(){var e=this.props,t=e.totalPages,a=e.lastPageRetrieved,n=e.searchArgs,o=e.clogger;t<=a||(this.props.fetchCustomEmojiNextPage(n),o.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{action:"next",ui_component:"table"}}}))}},{key:"getUserInfo",value:function(e,t){return x.a.createElement("div",{className:"p-customize_emoji_list__author"},x.a.createElement(Q.c,{className:"p-customize_emoji_list__avatar",userId:e,size:24,isInteractive:!1}),t)}},{key:"confirmRemoveEmoji",value:function(e){var t=this,a=this.props,n=a.standardEmojiData,o=a.team,r=a.clogger,i=a.isEnterprise,s=a.customEmojiData,l=a.deletedEmojiList,c=null,m=null,u=null;i&&(c=o.enterprise_name),r.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"delete",action:"click",ui_component:"table",ui_properties:{element_type:"icon",element_name:"x_icon"}}}});var d=e.target.getAttribute("data-emoji-name");if(s&&s.length&&s.forEach((function(e){e.name===d&&(m=e)})),m&&(u=m.synonyms&&m.synonyms.filter((function(e){return!l.includes(e)}))),!u&&!m.is_alias||u.length<=1)this.openSingleDeleteDialog(d,m.url,c);else{var p=[];u&&u.length&&u.forEach((function(e){if(!(e in n)){var a=t.props.getEmojiInfo({name:e}).then((function(e){return{name:e.name,can_delete:e.can_delete}})).catch((function(){Object(S.noop)()}));p.push(a)}})),N.a.all(p).then((function(e){var a={};e&&e.length&&e.forEach((function(e){e&&(a[e.name]=e.can_delete)}));var n=x.a.createElement(je,{emojiName:d,emojiType:"enabled",isEnterprise:i,orgName:c,isAlias:m.is_alias,aliasFor:m.alias_for,url:m.url,synonyms:u,onClose:t.makeRows,permissions:a});n&&t.props.openModal({element:n})}))}}},{key:"determineSortIcon",value:function(e){var t=this.props,a=t.sortBy,n=t.sortDir;return e!==a?Te:"created"===a?n===Oe?Pe:Te:n===Oe?Te:Pe}},{key:"makeHeaders",value:function(){return[{id:"image",value:Ce.t("Image"),noHover:!0,className:"p-customize_emoji_list__header"},{id:"name",value:Ce.t("Name"),onClick:this.onClickSortableHeader,iconType:this.determineSortIcon("name"),className:X()("p-customize_emoji_list__header",{"p-customize_emoji_list__header--active":"name"===this.props.sortBy})},{id:"created",value:Ce.t("Date added"),onClick:this.onClickSortableHeader,iconType:this.determineSortIcon("created"),className:X()("p-customize_emoji_list__header",{"p-customize_emoji_list__header--active":"created"===this.props.sortBy})},{id:"header_2",value:Ce.t("Added by"),noHover:!0,className:"p-customize_emoji_list__header"},{id:"actions",value:"",noHover:!0,className:"p-customize_emoji_list__header__actions"}]}},{key:"makeRows",value:function(){var e=this.props,t=e.customEmojiData,a=e.isLoadingNewPage,n=this.useTemplateCache,o=this.templateCache,r=this.getUserInfo,i=this.renderDeleteButton;if(!a){var s,l=0,c=0;Object(S.isEmpty)(t)?s=[{id:"no_matching_searches",items:[{value:x.a.createElement("div",{"data-qa":"customize_emoji_no_emoji_found"},Ce.t("No emoji found.")),className:"p-customize_emoji_list__no_matches",id:"no_matching_searches"}]}]:(s=[],t&&t.length&&t.forEach((function(e){s.push(function(e){var t;if(n&&o[e.name])(t=o[e.name]).id="row_"+l,t&&t.items&&t.items.length&&t.items.forEach((function(e,a){t.items[a].id=m()}));else{var a=":"+e.name+":";t={id:"row_"+l,items:[{value:x.a.createElement("div",{className:"p-customize_emoji_list__image_container","data-qa":"customize_emoji_row"},x.a.createElement("img",{src:e.url,alt:e.name,className:"p-customize_emoji_list__image"})),id:m()},{value:x.a.createElement("div",null,x.a.createElement("b",{className:"black"}," ",a," "),x.a.createElement("div",{className:"p-customize_emoji_list__author_mobile sk_foreground_high"}," ",Ce.rt("Added by {name}",{name:e.user_display_name})," ")),id:m()},{value:x.a.createElement("div",null,Object(K.a)(e.created,"{date}")),id:m()},{value:r(e.user_id,e.user_display_name),id:m()},{value:i(e),id:m()}]},n&&(o[e.name]=t)}return l+=1,t}(e))}))),this.setState((function(){return{rows:s}}))}function m(){return"row_"+l+"_item"+(c+=1)}}},{key:"openSingleDeleteDialog",value:function(e,t,a){var n=x.a.createElement(ce,{emojiName:e,orgName:a,url:t,onClose:this.makeRows,isAlias:!1,"data-qa":"customize_emoji_single_delete_dialog"});this.props.openModal({element:n})}},{key:"refreshTableHeight",value:function(){var e=this.state.rows;if(this.tableViewControllerRef&&this.tableViewControllerRef.tableViewContainerNode){var t=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0],a=t&&t.querySelectorAll(".c-table_view_row_container");if(a){var n=a&&a[0]&&a[0].getBoundingClientRect().height;n||(n=64);var o=e.length*(n+1),r={height:Math.max(64,Math.min(1e3,o))+"px"};this.setState(r)}}}},{key:"refreshTableHeightPolitely",value:function(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"renderDeleteButton",value:function(e){var t=this.props.isEnterprise?Ce.t("You\u2019ll need to ask an org admin to delete this emoji"):Ce.t("You\u2019ll need to ask an admin to delete this emoji"),a=x.a.createElement(Y.c,{tip:t},x.a.createElement(H.b,{type:"lock",className:"p-customize_emoji_list__icon subtle_silver cursor_pointer","data-emoji-name":e.name}));return e.can_delete&&(a=x.a.createElement(U.a,{"data-emoji-name":e.name,onClick:this.confirmRemoveEmoji,"emoji-type":"enabled","data-qa":"customize_emoji_remove_trigger"},x.a.createElement(H.b,{type:"times_circle",className:"p-customize_emoji_list__icon subtle_silver cursor_pointer candy_red_on_hover","data-emoji-name":e.name,"emoji-type":"enabled"}))),x.a.createElement("div",{className:"p-customize_emoji_list__row_icons"},a)}},{key:"render",value:function(){var e=this,t=this.props,a=t.isLoadingNewPage,n=t.isLoadingNewSearchQuery,o=this.state,r=o.rows,i=o.height,s=this.makeHeaders();return x.a.createElement("div",{className:"p-customize_emoji_list__container","data-qa":"customize_emoji_table"},x.a.createElement(V.a,{headers:s,rowHeaderItemClassName:"p-customize_emoji_list__header",rowClassName:"p-customize_emoji_list__row",rows:!n&&r||[],height:i,useKeyboardNavigableTable:!0,isLoading:a||n,ref:function(t){e.tableViewControllerRef=t},newQuery:n,onRequestNextPage:this.onRequestNextPage}))}}]),a}(C.PureComponent);Ie.displayName="CustomizeEmojiList",Ie.defaultProps=xe;var Re=Object(O.a)((function(e){return{standardEmojiData:Object(de.d)(e),team:Object(I.e)(e),isEnterprise:Object(T.o)(e),customEmojiData:Object(ue.getCustomEmojiData)(e),isLoadingNewPage:Object(ue.getIsLoadingNewPage)(e),isLoadingNewSearchQuery:Object(ue.getIsLoadingNewSearchQuery)(e),lastPageRetrieved:Object(ue.getLastPageRetrieved)(e),totalPages:Object(ue.getTotalPages)(e),sortBy:Object(ue.getSortBy)(e),sortDir:Object(ue.getSortDirection)(e),deletedEmojiList:Object(ue.getDeletedEmojiList)(e),clogger:Object(M.a)({state:e}),telemeter:Object(D.d)({state:e})}}),(function(e){return{fetchCustomEmojiNextPage:function(t){return e(Object(ne.a)(t))},openModal:function(){return e(R.openModal.apply(void 0,arguments))},getEmojiInfo:function(t){return e(Object(ne.c)(t))}}}))(Ie),Me=a("nKBf"),Ae=a("FOg1"),De=a("PM8X"),ze=a("K7CU");function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Be=new z.b("custom_emoji_list"),Ue={standardEmojiData:{},addCustomEmoji:S.noop,orgName:null,enqueueToast:S.noop,getEmojiInfo:S.noop,closeModal:S.noop,searchArgs:{}},Fe="customize_emoji_add_alias_dialog",qe="customize_emoji_add_alias_dialog_error_message",He="customize_emoji_add_alias_dialog_message",We="customize_emoji_add_alias_dialog_choose_alias",Ge="customize_emoji_add_alias_dialog_choose_alias_button",Ze="customize_emoji_add_alias_dialog_emoji_preview",Xe="customize_emoji_add_alias_dialog_emoji_preview_default",Ve="customize_emoji_add_alias_dialog_choose_name",Je="customize_emoji_add_alias_dialog_choose_name_input",Ke=function(e){f()(a,e);var t=Le(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).state={newEmojiName:"",aliasFor:"",placeholder:!0,nameErrorText:null,apiErrorText:null,goButtonIsPending:!1},Object(P.a)(p()(n),["onEmojiNameChange","onTextFocus","onTextBlur","onSubmit","renderEmojiPreview","renderPlaceholderText","renderChooseAliasFor","renderChooseNamePrompt","renderDialogMessage","showEmojiPicker","onSelectedEmojiChange","renderToastMessage","renderErrorMessage","addAlias"]),n.aliasNameInput=Object(C.createRef)(),n}return u()(a,[{key:"onEmojiNameChange",value:function(e){var t,a=this,n=this.props.standardEmojiData;this.setState((function(){return{newEmojiName:e,nameErrorText:t}})),/[A-Z]/.test(e)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(e)?t=Be.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):e in n?t=Be.t("This name is already in use by another emoji."):Object(ze.n)(e)?this.props.getEmojiInfo({name:e}).then((function(){t=Be.t("This name is already in use by another emoji."),a.state.newEmojiName===e&&a.setState((function(){return{nameErrorText:t}}))})).catch((function(){Object(S.noop)()})):t=Be.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.state.newEmojiName===e&&this.setState((function(){return{nameErrorText:t}}))}},{key:"onSelectedEmojiChange",value:function(e){var t,a;this.setState((function(){return{aliasFor:e}})),null===(t=this.aliasNameInput)||void 0===t||null===(a=t.current)||void 0===a||a.focus()}},{key:"onSubmit",value:function(e){var t=this;e&&e.preventDefault();var a=this.state,n=a.newEmojiName,o=a.aliasFor,r=a.nameErrorText,i=n.length>100;n&&o&&!Boolean(r)&&!i&&(this.setState((function(){return{goButtonIsPending:!0}})),this.props.getEmojiInfo({name:o.slice(1,o.length-1)}).then((function(e){var a=e.is_alias?":"+e.alias_for+":":o;t.addAlias(n,a)})).catch((function(){t.addAlias(n,o)})))}},{key:"onTextBlur",value:function(){this.setState((function(){return{placeholder:!0}}))}},{key:"onTextFocus",value:function(){this.setState((function(){return{placeholder:!1}}))}},{key:"addAlias",value:function(e,t){var a=this;this.props.addCustomEmoji({mode:"alias",name:e,aliasFor:t,searchArgs:this.props.searchArgs}).then((function(){a.props.closeModal();var e=a.renderToastMessage();a.props.enqueueToast({element:e}),a.setState((function(){return{goButtonIsPending:!1}})),a.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"add_alias",action:"add",ui_component:"dialog",action_status:"success",ui_properties:{element_type:"button",element_name:"save"}}}})})).catch((function(t){var n,o=Object(S.get)(t,"data.error");"error_name_taken_i18n"===o?n=Be.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:e}):"error_name_taken"===o?n=Be.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:e}):"error_bad_name"!==o&&"error_bad_name_i18n"!==o||(n=Be.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),a.setState((function(){return{apiErrorText:n,goButtonIsPending:!1}})),a.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"add_alias",action:"add",ui_component:"dialog",action_status:"fail",ui_properties:{element_type:"button",element_name:"save"}}}})}))}},{key:"showEmojiPicker",value:function(e){Object(De.a)({e:e,position:"bottom-left",offset_y:8,callback:this.onSelectedEmojiChange}),this.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"add_alias",action:"click",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"choose_emoji"}}}})}},{key:"renderChooseAliasFor",value:function(){return x.a.createElement("ol",{className:"black","data-qa":We},x.a.createElement("li",{className:"large_bottom_margin"},x.a.createElement("div",null," ",Be.t("Choose an existing emoji")," "),x.a.createElement("div",{className:"normal p-add_alias_dialog__upload_container"},x.a.createElement("div",{className:"p-add_alias_dialog__upload_preview bordered sk_off_white_bg inline_block align_top"},this.renderEmojiPreview()),x.a.createElement("div",{className:"p-add_alias_dialog__choose_emoji_button inline_block align_top"},x.a.createElement(B.f,{type:"outline",size:"medium",onClick:this.showEmojiPicker,"data-qa":Ge}," ",Be.t("Choose Emoji")," ")))))}},{key:"renderChooseNamePrompt",value:function(){var e=this.state,t=e.newEmojiName,a=e.nameErrorText,n="p_add_alias_dialog__name_input_description";return x.a.createElement("ol",{className:"black",start:"2","data-qa":Ve},x.a.createElement("li",null,x.a.createElement("div",{id:n}," ",Be.t("Enter an alias")," "),x.a.createElement("div",{className:"normal sk_foreground_max p-add_alias_dialog__choose_name_container"},Be.t("This is what you\u2019ll type to add this emoji to your messages.")),x.a.createElement("div",{className:"p_add_alias_dialog__name_input"},x.a.createElement(Ae.a,{id:"emojiname",name:"name",value:t,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:a,"data-qa":Je,ariaDescribedById:n,ref:this.aliasNameInput}))))}},{key:"renderDialogMessage",value:function(){var e,t=this.props.orgName;return e=t?Be.rt("Emoji aliases will be available in every <b>{orgName}</b> workspace. You\u2019ll find them alongside the original emoji in the emoji picker.",{orgName:t}):Be.t("Emoji aliases will be available to everyone in your workspace. You\u2019ll find them alongside the original emoji in the emoji picker."),x.a.createElement("div",{className:"p-add_custom_emoji_dialog","data-qa":He},x.a.createElement("div",{className:"margin_top_100"},e),x.a.createElement("div",null,this.renderErrorMessage()),x.a.createElement("form",{className:"p-add_alias_dialog__form",onSubmit:this.onSubmit},this.renderChooseAliasFor(),x.a.createElement("hr",null),this.renderChooseNamePrompt()))}},{key:"renderEmojiPreview",value:function(){var e=this.state.aliasFor;return e?x.a.createElement("div",{className:"align_center","data-qa":Ze},x.a.createElement(ee.b,{text:e,emojiSize:ee.a.MEDIUM,className:"p-add_alias_dialog__emoji"})):x.a.createElement("div",{className:"p-add_custom_emoji_dialog__icon_container","data-qa":Xe},x.a.createElement(H.b,{type:"happy-smile",size:"inherit",className:"p-add_alias_dialog__icon block"}))}},{key:"renderErrorMessage",value:function(){var e=this.state.apiErrorText;return e?x.a.createElement(q.d,{level:"error",className:"margin_top_50 margin_bottom_100","data-qa":qe},x.a.createElement("span",null," ",e," ")):null}},{key:"renderPlaceholderText",value:function(){return this.state.placeholder?Be.t("avocado"):""}},{key:"renderToastMessage",value:function(){var e=this.state,t=e.newEmojiName,a=e.aliasFor,n=x.a.createElement(ee.b,{text:a,emojiSize:ee.a.MEDIUM}),o=Be.rt("{emoji} :{newEmojiName}: has been added and is ready for use.",{emoji:n,newEmojiName:t});return x.a.createElement(te.b,{toastClasses:"p-customize_emoji_list__toast"},x.a.createElement("span",null,o))}},{key:"render",value:function(){var e=Be.t("Add alias for an existing emoji"),t=this.state,a=t.newEmojiName,n=t.aliasFor,o=t.nameErrorText,r=t.goButtonIsPending,i=a.length>100,s={title:e,showCancelButton:!0,truncateTitle:!1,goButtonText:Be.t("Save"),goButtonIsDisabled:!(a&&n)||Boolean(o)||i,goButtonIsPending:r,cancelButtonText:Be.t("Cancel"),overlayClassName:"p-customize_emoji__dialog_overlay",modalBodyOpenClassName:"p-add_alias_dialog__modal_open",onGo:this.onSubmit,shouldCloseOnGo:!1,onCancel:S.noop,className:"p-add_alias_dialog__container",children:x.a.createElement("div",null,this.renderDialogMessage()),"data-qa":Fe};return x.a.createElement($.a,s)}}]),a}(C.PureComponent);Ke.displayName="AddAliasDialog",Ke.defaultProps=Ue;var Qe=Object(O.a)((function(e){return{clogger:Object(M.a)({state:e}),standardEmojiData:Object(de.d)(e)}}),(function(e){return{addCustomEmoji:function(t){return e(Object(ne.d)(t))},enqueueToast:function(){return e(ae.enqueueToast.apply(void 0,arguments))},getEmojiInfo:function(t){return e(Object(ne.c)(t))},closeModal:function(){return e(Object(R.closeModal)())}}}))(Ke),Ye=a("C3vN"),$e=a("G4ux"),et=a("TlVv"),tt=a("LCny"),at=a("5mKg");function nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var ot=new z.b("custom_emoji_list"),rt={standardEmojiData:{},renameEmoji:S.noop,enqueueToast:S.noop,getEmojiInfo:S.noop,closeModal:S.noop},it=function(e){f()(a,e);var t=nt(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).state={newEmojiName:"",placeholder:!0,nameErrorText:null,apiErrorText:null,goButtonIsPending:!1},Object(P.a)(p()(n),["onEmojiNameChange","onTextFocus","onTextBlur","onSubmit","renderPlaceholderText","renderNewNameInput","renderDialogMessage","renderToastMessage","renderErrorMessage"]),n}return u()(a,[{key:"onEmojiNameChange",value:function(e){var t,a=this,n=this.props.standardEmojiData;this.setState((function(){return{newEmojiName:e,nameErrorText:t}})),/[A-Z]/.test(e)||/[ .,;`\u2013~!@#$%^&*(){}=\\:"<>?|]/.test(e)?t=ot.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."):e in n?t=ot.t("This name is already in use by another emoji."):Object(ze.n)(e)?this.props.getEmojiInfo({name:e}).then((function(){t=ot.t("This name is already in use by another emoji."),a.state.newEmojiName===e&&a.setState((function(){return{nameErrorText:t}}))})).catch((function(){Object(S.noop)()})):t=ot.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation."),this.state.newEmojiName===e&&this.setState((function(){return{nameErrorText:t}}))}},{key:"onSubmit",value:function(e){var t=this;e&&e.preventDefault();var a=this.state,n=a.newEmojiName,o=a.nameErrorText,r=this.props.oldEmojiName,i=n.length>100;!n||Boolean(o)||i||(this.setState((function(){return{goButtonIsPending:!0}})),this.props.renameEmoji({newName:n,oldName:r}).then((function(){t.props.closeModal();var e=t.renderToastMessage();t.props.enqueueToast({element:e}),t.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"update",action_status:"success",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})).catch((function(e){var a,o=Object(S.get)(e,"data.error");"error_name_taken_i18n"===o?a=ot.rt("Unfortunately, the international emoji set already includes an emoji named <b>{newEmojiName}</b>. Mind trying a different name?",{newEmojiName:n}):"error_name_taken"===o?a=ot.rt("The name <b>{newEmojiName}</b> is already in use by another emoji.",{newEmojiName:n}):"error_bad_name"!==o&&"error_bad_name_i18n"!==o||(a=ot.t("Names must be lowercase, and can\u2019t contain spaces, periods, or most punctuation.")),t.setState((function(){return{apiErrorText:a,goButtonIsPending:!1}})),t.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"update",action_status:"fail",ui_component:"dialog",ui_properties:{element_type:"button",element_name:"save"}}}})})))}},{key:"onTextBlur",value:function(){this.setState((function(){return{placeholder:!0}}))}},{key:"onTextFocus",value:function(){this.setState((function(){return{placeholder:!1}}))}},{key:"renderDialogMessage",value:function(){var e=this.props,t=e.oldEmojiName,a=e.isAlias,n=x.a.createElement(ee.b,{text:":"+t+":",emojiSize:ee.a.MEDIUM}),o=a?ot.rt("The latest set of standard emoji includes a {standardEmoji} <b>:{oldEmojiName}:</b> emoji, which conflicts with your alias. Rename your alias to continue using it.",{standardEmoji:n,oldEmojiName:t}):ot.rt("The latest set of standard emoji includes a {standardEmoji} <b>:{oldEmojiName}:</b> emoji, which conflicts with your custom emoji. Rename your custom emoji to continue using it.",{standardEmoji:n,oldEmojiName:t});return x.a.createElement("div",{className:"p-add_custom_emoji_dialog"},x.a.createElement("div",{className:"margin_top_100"},o),x.a.createElement("div",null,this.renderErrorMessage()),x.a.createElement("form",{onSubmit:this.onSubmit},this.renderNewNameInput()))}},{key:"renderErrorMessage",value:function(){var e=this.state.apiErrorText;return e?x.a.createElement(q.d,{level:"error",className:"margin_top_50 margin_bottom_100"},x.a.createElement("span",null," ",e," ")):null}},{key:"renderNewNameInput",value:function(){var e=this.props,t=e.oldEmojiName,a=e.disabledEmojiUrl,n=this.state,o=n.newEmojiName,r=n.nameErrorText;return x.a.createElement("div",{className:"p-rename_emoji_dialog__name_input inline_block"},x.a.createElement("div",{className:"p-rename_emoji_dialog__emoji_preview bordered sk_off_white_bg inline_block align_top"},x.a.createElement("img",{className:"p-rename_emoji_dialog__emoji_img",alt:t,src:a})),x.a.createElement("div",{className:"p-rename_emoji_dialog__formtext inline_block align_top"},x.a.createElement(Ae.a,{id:"emojiname",name:"name",value:o,onChange:this.onEmojiNameChange,onFocus:this.onTextFocus,onBlur:this.onTextBlur,placeholder:this.renderPlaceholderText(),prefix:":",suffix:":",maxCharacterLimit:100,counterMinimumCharacters:101,errorText:r})))}},{key:"renderPlaceholderText",value:function(){var e=this.props.oldEmojiName;return this.state.placeholder?e:""}},{key:"renderToastMessage",value:function(){var e=this.props.disabledEmojiUrl,t=this.state.newEmojiName,a=x.a.createElement(ee.b,{text:t,url:e,emojiSize:ee.a.MEDIUM}),n=ot.rt("{emoji} has been renamed :{newEmojiName}: and is ready for use.",{emoji:a,newEmojiName:t});return x.a.createElement(te.b,{toastClasses:"p-customize_emoji_list__toast"},x.a.createElement("span",null,n))}},{key:"render",value:function(){var e=this.props,t=e.oldEmojiName,a=e.isAlias,n=this.state,o=n.newEmojiName,r=n.nameErrorText,i=n.goButtonIsPending,s=o.length>100,l={title:a?ot.rt("Rename your :{oldEmojiName}: alias",{oldEmojiName:t}):ot.rt("Rename your :{oldEmojiName}: custom emoji",{oldEmojiName:t}),showCancelButton:!0,truncateTitle:!1,goButtonText:ot.t("Rename"),goButtonIsDisabled:!o||Boolean(r)||s,goButtonIsPending:i,cancelButtonText:ot.t("Cancel"),onGo:this.onSubmit,shouldCloseOnGo:!1,onCancel:S.noop,overlayClassName:"p-customize_emoji__dialog_overlay",modalBodyOpenClassName:"rename-emoji_dialog__modal_open",className:"p-rename_emoji_dialog__container",children:x.a.createElement("div",null,this.renderDialogMessage())};return x.a.createElement($.a,l)}}]),a}(C.PureComponent);it.displayName="RenameEmojiDialog",it.defaultProps=rt;var st=Object(O.a)((function(e){return{standardEmojiData:Object(de.d)(e),clogger:Object(M.a)({state:e})}}),(function(e){return{renameEmoji:function(t){return e(Object(ne.f)(t))},enqueueToast:function(){return e(ae.enqueueToast.apply(void 0,arguments))},getEmojiInfo:function(t){return e(Object(ne.c)(t))},closeModal:function(){return e(Object(R.closeModal)())}}}))(it);function lt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var ct=new z.b("custom_emoji_list"),mt={openModal:S.noop,deletedEmojiList:[],disabledEmoji:{}},ut=function(e){f()(a,e);var t=lt(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).state={rows:[],height:null},n.tableViewControllerRef=null,Object(P.a)(p()(n),["confirmRemoveEmoji","getUserInfo","makeDisabledRows","renameEmoji","openSingleDeleteDialog","refreshTableHeight","refreshTableHeightPolitely"]),n}return u()(a,[{key:"componentDidMount",value:function(){this.makeDisabledRows(),this.refreshTableHeightPolitely(),window.addEventListener("resize",this.refreshTableHeightPolitely)}},{key:"componentDidUpdate",value:function(e){e.disabledEmoji!==this.props.disabledEmoji&&(this.makeDisabledRows(),this.refreshTableHeightPolitely())}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.refreshTableHeightPolitely)}},{key:"getUserInfo",value:function(e,t){return x.a.createElement("div",{className:"p-customize_emoji_list__author"},x.a.createElement(Q.c,{className:"p-customize_emoji_list__avatar",userId:e,size:24,isInteractive:!1}),t)}},{key:"confirmRemoveEmoji",value:function(e){var t=this.props,a=t.team,n=t.clogger,o=t.isEnterprise,r=t.disabledEmoji,i=t.deletedEmojiList,s=null;o&&(s=a.enterprise_name);var l=e.target.getAttribute("data-emoji-name"),c=r[l],m=c.synonyms&&c.synonyms.filter((function(e){return!i.includes(e)}));if(c.is_alias||!m||m.length<=1)this.openSingleDeleteDialog(l,c.url,s);else{var u=x.a.createElement(je,{emojiName:l,emojiType:"disabled",isEnterprise:o,orgName:s,isAlias:c.is_alias,aliasFor:c.alias_for,url:c.url,synonyms:m,onClose:this.makeDisabledRows});u&&this.props.openModal({element:u})}n.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"click",ui_properties:{element_type:"button",element_name:"delete"}}}})}},{key:"makeDisabledRows",value:function(){var e=this.props.disabledEmoji,t=this.getUserInfo,a=this.confirmRemoveEmoji,n=this.renameEmoji,o=0,r=0;function i(){return"row_"+o+"_item"+(r+=1)}function s(e){o+=1;var r,s,l=":"+e.name+":";return e.can_delete?(r=x.a.createElement(B.f,{type:"outline","emoji-type":"disabled","data-emoji-name":e.name,size:"medium",className:"p-disabled_custom_emoji_list__button margin_right_75",onClick:a}," ",ct.t("Delete")," "),s=x.a.createElement(B.f,{type:"outline","emoji-type":"disabled","data-emoji-name":e.name,size:"small",className:"p-disabled_custom_emoji_list__mobile_button",onClick:a}," ",ct.t("Delete")," ")):(r=x.a.createElement("div",{className:"margin_right_75 inline_block"},x.a.createElement(Y.c,{tip:ct.t("Only the person who uploaded this emoji or an admin can delete it")},x.a.createElement("div",null,x.a.createElement(B.f,{className:"p-disabled_custom_emoji_list__button",type:"outline",disabled:!0,size:"medium"}," ",ct.t("Delete")," ")))),s=x.a.createElement(B.f,{type:"outline",disabled:!0,size:"small",className:"p-disabled_custom_emoji_list__mobile_button"}," ",ct.t("Delete")," ")),{id:"row_"+o,items:[{value:x.a.createElement("div",{className:"p-customize_emoji_list__image_container"},x.a.createElement("img",{src:e.url,alt:e.name,className:"p-customize_emoji_list__image"})),id:i()},{value:x.a.createElement("div",null,x.a.createElement("b",{className:"black"}," ",l," "),x.a.createElement("div",{className:"p-customize_emoji_list__author_mobile sk_foreground_high"}," ",ct.rt("Added by {name}",{name:e.user_display_name})," "),x.a.createElement("div",{className:"p-disabled_custom_emoji_list__mobile_button_container"},x.a.createElement(B.f,{type:"outline","data-emoji-name":e.name,size:"small",className:"p-disabled_custom_emoji_list__mobile_button",onClick:n}," ",ct.t("Rename")," "),s)),id:i()},{value:t(e.user_id,e.user_display_name),id:i()},{value:x.a.createElement("div",{className:"inline_block"},x.a.createElement(B.f,{type:"outline","data-emoji-name":e.name,size:"medium",className:"p-disabled_custom_emoji_list__button margin_right_75",onClick:n}," ",ct.t("Rename")," "),r),id:i()}]}}for(var l=[],c=Object.keys(e),m=0;m<c.length;m++)l.push(s(e[c[m]]));this.setState((function(){return{rows:l}}))}},{key:"openSingleDeleteDialog",value:function(e,t,a){var n=this.props.disabledEmoji,o=Boolean(n[e].is_alias),r=x.a.createElement(ce,{emojiName:e,orgName:a,url:t,onClose:this.makeDisabledRows,isAlias:o});this.props.openModal({element:r})}},{key:"refreshTableHeight",value:function(){var e=this.state.rows;if(this.tableViewControllerRef&&this.tableViewControllerRef.tableViewContainerNode){var t=this.tableViewControllerRef.tableViewContainerNode.querySelectorAll(".c-table_view_all_rows_container")[0],a=t&&t.querySelectorAll(".c-table_view_row_container");if(a){var n=a&&a[0]&&a[0].getBoundingClientRect().height;n||(n=64);var o=e.length*(n+1),r={height:Math.max(64,o)+"px"};this.setState(r)}}}},{key:"refreshTableHeightPolitely",value:function(){window.requestAnimationFrame(this.refreshTableHeight)}},{key:"renameEmoji",value:function(e){var t=this.props,a=t.disabledEmoji,n=t.clogger,o=e.target.getAttribute("data-emoji-name"),r=a[o].url,i=Boolean(a[o].is_alias),s=x.a.createElement(st,{oldEmojiName:o,disabledEmojiUrl:r,isAlias:i});this.props.openModal({element:s}),n.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"click",ui_properties:{element_type:"button",element_name:"rename"}}}})}},{key:"render",value:function(){var e=this,t=this.props.disabledEmoji,a=this.state,n=a.rows,o=a.height;return t&&0!==Object.keys(t).length?x.a.createElement("div",{className:"p-customize_emoji_list__disabled_table small_bottom_margin"},x.a.createElement(V.a,{rows:n,height:o,useKeyboardNavigableTable:!0,ref:function(t){e.tableViewControllerRef=t}})):null}}]),a}(C.PureComponent);ut.displayName="DisabledCustomizeEmojiList",ut.defaultProps=mt;var dt=Object(O.a)((function(e){return{team:Object(I.e)(e),isEnterprise:Object(T.o)(e),deletedEmojiList:Object(ue.getDeletedEmojiList)(e),disabledEmoji:Object(ue.getDisabledEmoji)(e),clogger:Object(M.a)({state:e})}}),(function(e){return{openModal:function(){return e(R.openModal.apply(void 0,arguments))}}}))(ut);function pt(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function _t(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):pt(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ft(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var ht=new z.b("custom_emoji_list"),gt={currentUser:{},currentUserIsAdmin:!1,currentUserIsOwner:!1,openModal:S.noop,customEmojiTotalCount:0,disabledEmoji:{},fetchResetCustomEmoji:S.noop,teamIsEnterprise:!1,featureNewMultiSelect:!1},bt="customize_emoji_add_button",Et="customize_emoji_add_alias",vt="customize_emoji_count",jt="customize_emoji_multi_select",yt="customize_emoji_disabled_alert";var kt=function(e){f()(a,e);var t=ft(a);function a(e){var n;c()(this,a),(n=t.call(this,e)).state={didInitialLoad:!1,isLoading:!0,searchArgs:{},searchMemberResults:[],emojiNameQuery:"",searchTokens:[],showDisabledEmoji:!1};return n.searcherOptions={entities:{members:{includeSelf:!0,includeDeleted:!0,includeSlackbot:!1,includeBots:!1,includeExternal:!1}},limit:5},Object(P.a)(p()(n),["clearSearchTokens","hideList","loadEmoji","openEmojiModal","onFilterQueryChange","onSearchArgumentsChange","onSearchInputChange","onSearchInputFocus","onSelectedItemsChange","processOptions","renderDisabledEmojiAlert","renderOption","showList","renderQuickReactionsTeamCustomization"]),n.logImpression=Object(S.once)((function(e,t,a){e.track(A.EventId.ADMIN_TEAM_CUSTOMIZE_EMOJI,{is_admin:t,is_owner:a,contexts:{ui_context:{action:A.UiAction.IMPRESSION}}})})),n.throttledSearchEmoji=Object(S.throttle)((function(e){return n.props.fetchResetCustomEmoji(e).then((function(){n.setState((function(){return{isLoading:!1}}))}))}),300,{leading:!1}),n}return u()(a,[{key:"componentDidMount",value:function(){var e=this.props.clogger;this.loadEmoji(),e.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{action:"impression"}}})}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.currentUser,a=e.currentUserIsAdmin,n=e.currentUserIsOwner,o=e.clogger;t&&this.logImpression(o,a,n)}},{key:"onFilterQueryChange",value:function(e){this.setState((function(){return{emojiNameQuery:e}}))}},{key:"onSearchArgumentsChange",value:function(e){var t=this;this.setState((function(t){return{searchArgs:_t(_t({},t.searchArgs),e)}}),(function(){t.props.fetchResetCustomEmoji(t.state.searchArgs)}))}},{key:"onSearchInputChange",value:function(e){var t=e.target.value||"";this.setState((function(){return{searchArgs:{queries:[t]},emojiNameQuery:t,isLoading:!0}})),this.throttledSearchEmoji({queries:[t.toLowerCase()]})}},{key:"onSearchInputFocus",value:function(){this.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{action:"click",ui_component:"search_input"}}})}},{key:"onSelectedItemsChange",value:function(e){var t=this;this.setState((function(a){var n=a.searchArgs,o=[],r=[];return e.forEach((function(e){Object(L.a)(e.value)?o.push(e.value):r.push(e.value)})),n.userIds=o,n.queries=r,a.searchTokens.length>e.length&&t.setState((function(){return{isLoading:!0}})),t.props.fetchResetCustomEmoji(n).then((function(){t.setState((function(){return{isLoading:!1}}))})),{searchArgs:n,searchTokens:e}}))}},{key:"clearSearchTokens",value:function(){var e=this;if(0===this.state.searchTokens.length)this.setState((function(){return{emojiNameQuery:""}}));else{var t={isLoading:!0,searchArgs:{},emojiNameQuery:"",searchTokens:[]};this.setState((function(){return t}),(function(){e.props.fetchResetCustomEmoji({}).then((function(){e.setState((function(){return{isLoading:!1}}))}))}))}}},{key:"hideList",value:function(){this.setState((function(){return{showDisabledEmoji:!1}})),this.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"collapse",ui_component:"alert"}}})}},{key:"loadEmoji",value:function(){var e=this;this.props.telemeter.mark(ye+"_mark"),this.props.fetchResetCustomEmoji({}).then((function(){e.setState((function(){return{didInitialLoad:!0,isLoading:!1}}))}))}},{key:"openEmojiModal",value:function(e){var t,a,n=this.props,o=n.isEnterprise,r=n.team,i=n.clogger,s=this.state.searchArgs;o&&(t=r.enterprise_name),"alias"===e.target.getAttribute("emoji-type")?(a=x.a.createElement(Qe,{searchArgs:s,orgName:t}),i.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"add_alias",action:"click",ui_properties:{element_type:"button",element_name:"add_alias"}}}})):(a=x.a.createElement(Me.b,{searchArgs:s,orgName:t}),i.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"add_custom_emoji",action:"click",ui_properties:{element_type:"button",element_name:"add_custom_emoji"}}}})),this.props.openModal({element:a})}},{key:"processOptions",value:function(e){var t=this.state.emojiNameQuery;this.setState((function(){return{searchMemberResults:e}}));var a=[{label:ht.t("Emoji name includes: {emojiNameQuery}",{emojiNameQuery:t}),value:t},{label:ht.t("Emoji added by:"),options:e.map((function(e){return{value:e.value}}))}];return N.a.resolve(a)}},{key:"showList",value:function(){this.setState((function(){return{showDisabledEmoji:!0}})),this.props.clogger.track("PAGE_CUSTOMIZE_EMOJI",{contexts:{ui_context:{step:"disabled_emoji",action:"expand",ui_component:"alert"}}})}},{key:"renderDisabledEmojiAlert",value:function(){var e=this.props.disabledEmoji,t=this.state.showDisabledEmoji;if(!e||0===Object.keys(e).length)return null;var a,n,o=Object.keys(e).length,r=ht.rt("<b>{numDisabledEmoji} {numDisabledEmoji, plural, =1 {emoji has} other {emoji have}} been deactivated</b> because {numDisabledEmoji, plural, =1 {its name is} other {their names are}} used in the latest set of standard emoji.",{numDisabledEmoji:o}),i=null;return t?(a=x.a.createElement(U.a,{onClick:this.hideList,className:"float_right p-customize_emoji_wrapper__disabled_toggle underline"},ht.t("Hide list")),n=x.a.createElement(U.a,{onClick:this.hideList,className:"p-customize_emoji_wrapper__disabled_toggle_mobile underline"},ht.t("Hide list")),i=x.a.createElement(dt,null)):(a=x.a.createElement(U.a,{onClick:this.showList,className:"float_right p-customize_emoji_wrapper__disabled_toggle underline"},ht.t("See list")),n=x.a.createElement(U.a,{onClick:this.showList,className:"p-customize_emoji_wrapper__disabled_toggle_mobile underline"},ht.t("See list"))),x.a.createElement("div",{"data-qa":yt},x.a.createElement(q.d,{level:"error",className:"p-customize_emoji_list__alert medium_top_margin margin_bottom_100"},x.a.createElement("span",null,x.a.createElement("span",null,r),a,x.a.createElement("br",null),n)),i)}},{key:"renderEmptyState",value:function(){var e=k.a,t=j.a+" 1x, "+e+" 2x",a=ht.t("Add Custom Emoji"),n=ht.t("Add Emoji"),o=ht.t("Add Alias");return x.a.createElement("div",{className:"inline_block margin_top_200"},x.a.createElement("div",{className:"p-customize_emoji_wrapper__empty_words inline_block align_middle"},x.a.createElement("div",{className:"p-customize_emoji_wrapper__empty_header"},x.a.createElement("b",null,ht.t("There aren\u2019t any custom emoji in your workspace yet",{fallbackHash:"3644f6ab97b9534725009af2d2c0abaa8b34da28",fallbackHashNs:"custom_emoji_list"}))),x.a.createElement("div",{className:"margin_top_50"},ht.t("You don\u2019t have to be limited to the standard emoji set. Make your workspace your own with custom emoji that mean something to your team. ")),x.a.createElement("div",{className:"margin_top_200"},x.a.createElement(B.f,{type:"outline",size:"medium",className:"p-customize_emoji_wrapper__alias_button","emoji-type":"alias",onClick:this.openEmojiModal,"data-qa":Et},o),x.a.createElement(B.f,{type:"primary",size:"medium",className:"p-customize_emoji_wrapper__custom_button","emoji-type":"emoji",onClick:this.openEmojiModal,"data-qa":bt},a),x.a.createElement(B.f,{type:"primary",size:"medium",className:"p-customize_emoji_wrapper__custom_button_short","emoji-type":"emoji",onClick:this.openEmojiModal},n))),x.a.createElement("div",{className:"inline_block align_middle margin_left_200 p-customize_emoji_wrapper__empty_img_container"},x.a.createElement("img",{className:"p-customize_emoji_wrapper__empty_img",src:e,srcSet:t,alt:ht.t("No custom emoji")})))}},{key:"renderList",value:function(){var e=this.props.customEmojiTotalCount,t=this.state.searchArgs,a=ht.t("Add Custom Emoji"),n=ht.t("Add Emoji"),o=ht.t("Add Alias");return x.a.createElement("div",{className:"p-customize_emoji_wrapper"},x.a.createElement("h4",{className:"p-customize_emoji_wrapper__count large_bottom_margin inline_block black","data-qa":vt},ht.rt("{customEmojiGrandTotal} custom {customEmojiGrandTotal, plural, =1 {emoji} other {emoji}}",{customEmojiGrandTotal:e})),x.a.createElement("div",{className:"inline_block float_right"},x.a.createElement(B.f,{type:"outline",size:"medium",className:"p-customize_emoji_wrapper__alias_button","emoji-type":"alias",onClick:this.openEmojiModal,"data-qa":Et},o),x.a.createElement(B.f,{type:"primary",size:"medium",className:"p-customize_emoji_wrapper__custom_button","emoji-type":"emoji",onClick:this.openEmojiModal,"data-qa":bt},a),x.a.createElement(B.f,{type:"primary",size:"medium",className:"p-customize_emoji_wrapper__custom_button_short","emoji-type":"emoji",onClick:this.openEmojiModal},n)),this.renderSearchInput(),this.renderDisabledEmojiAlert(),x.a.createElement(Re,{onSearchArgumentsChange:this.onSearchArgumentsChange,searchArgs:t}))}},{key:"renderOption",value:function(e){var t=this.state,a=t.emojiNameQuery,n=t.searchMemberResults;return"heading"===e.type?0===n.length?null:x.a.createElement("div",{className:"p-customize_emoji_wrapper__multi_select_input__heading"},e.label):Object(L.a)(e.value)?x.a.createElement("div",{className:"p-customize_emoji_wrapper__multi_select_input__token_wrapper"},x.a.createElement(W.a,{entityId:e.value})):x.a.createElement("div",{className:"p-customize_emoji_wrapper__multi_select_input__heading"},"Emoji name includes: ",x.a.createElement("span",{className:"p-customize_emoji_wrapper__multi_select_input__heading__query"},a))}},{key:"renderSearchInput",value:function(){var e=this.props.featureNewMultiSelect,t=this.state,a=t.searchMemberResults,n=t.searchTokens,o=0===a.length?"__no_members":"";return e?x.a.createElement("div",{className:"p-customize_emoji_wrapper__multi_select_container"},x.a.createElement(G.e,{className:"p-customize_emoji_wrapper__multi_select_input",classPrefix:"p-customize_emoji_wrapper"+o,selectDataQa:jt,focusOnMount:!1,isDisabled:!1,isExpanded:!1,onFilterQueryChange:this.onFilterQueryChange,onSelectedItemsChange:this.onSelectedItemsChange,optionsRowHeight:40,placeholderText:n.length>0?"":ht.t("Search"),processOptions:this.processOptions,renderOption:this.renderOption,searcherOptions:this.searcherOptions,selectedOptions:n,selectId:"customize_emoji_wrapper_search",size:"medium",width:"100%",iconType:"search"})):x.a.createElement("div",{className:"p-customize_emoji_wrapper__multi_select_container"},x.a.createElement("div",{className:"p-customize_emoji_wrapper__search_icon_container"},x.a.createElement(H.b,{className:"p-customize_emoji_wrapper__search_icon",type:"search",size:"inherit",inline:!0})),x.a.createElement(G.e,{className:"p-customize_emoji_wrapper__multi_select_input",classPrefix:"p-customize_emoji_wrapper"+o,selectDataQa:jt,focusOnMount:!1,isDisabled:!1,isExpanded:!1,onFilterQueryChange:this.onFilterQueryChange,onSelectedItemsChange:this.onSelectedItemsChange,optionsRowHeight:40,placeholderText:n.length>0?"":ht.t("Search"),processOptions:this.processOptions,renderOption:this.renderOption,searcherOptions:this.searcherOptions,selectedOptions:n,selectId:"customize_emoji_wrapper_search",size:"medium",width:"100%"}))}},{key:"renderQuickReactionsTeamCustomization",value:function(){var e=this.props,t=e.currentUserIsAdmin,a=e.currentUserIsOwner;if(e.teamIsEnterprise||!(t||a))return null;var n=ht.t("One-click reactions"),o=ht.t("Choose the default emoji people will see when they enable one-click reactions");return x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{className:"p-customize_emoji_wrapper--quick_reactions_container","data-qa":"workspace_admin_quick_reactions_container"},x.a.createElement("p",{className:"p-customize_emoji_wrapper--quick_reactions_section_title"},n),x.a.createElement("p",{className:"p-customize_emoji_wrapper--quick_reactions_section_body_text"},o),x.a.createElement("div",{className:"p-customize_emoji_wrapper--quick_reactions_slots_admin_container","data-qa":"workspace_admin_quick_reactions_slots_admin_container"},x.a.createElement(tt.a,{isWorkspaceAdminCustomization:!0})),x.a.createElement(et.a,{isWorkspaceAdminCustomization:!0})),x.a.createElement("hr",null))}},{key:"render",value:function(){var e=this.props.customEmojiTotalCount,t=this.state,a=t.didInitialLoad,n=t.isLoading,o=t.searchTokens;if(!a)return null;var r=!n&&0===e&&0===o.length;return x.a.createElement("div",{className:"p-customize_emoji_wrapper__container"},this.renderQuickReactionsTeamCustomization(),r?this.renderEmptyState():this.renderList(),x.a.createElement(F.a,null))}}]),a}(C.PureComponent);kt.displayName="CustomizeEmojiWrapper",kt.defaultProps=gt;var Nt=Object(O.a)((function(e){var t=Object($e.c)(e),a=Object(I.e)(e);return{currentUser:t,currentUserIsAdmin:Object(Ye.jb)(e,t),currentUserIsOwner:Object(Ye.Lb)(e,t),team:a,isEnterprise:Object(T.o)(e),customEmojiTotalCount:Object(ue.getCustomEmojiTotalCount)(e),disabledEmoji:Object(ue.getDisabledEmoji)(e),clogger:Object(M.a)({state:e}),telemeter:Object(D.d)({state:e}),teamIsEnterprise:Object(at.w)(a),featureNewMultiSelect:Object(T.k)(e,"feature_new_multi_select")}}),(function(e){return{openModal:function(){return e(R.openModal.apply(void 0,arguments))},fetchResetCustomEmoji:function(t){return e(Object(ne.b)(t))}}}))(kt),Ct=a("EEcx"),xt=a("i9y5"),wt=a("FWo8"),Ot=a.n(wt),St=a("oOL0"),Tt=a.n(St),Pt=a("jWAO"),It=a("Rc0H"),Rt=a("8YAP"),Mt=a("lek6");a("MhL9");function At(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Dt={onClick:S.noop,clogger:void 0},zt="channel-prefixes-remove-button",Lt=function(e){f()(a,e);var t=At(a);function a(){return c()(this,a),t.apply(this,arguments)}return u()(a,[{key:"componentDidMount",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.IMPRESSION,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"remove_prefix"}}}})}},{key:"render",value:function(){return x.a.createElement(U.a,{onClick:this.props.onClick,className:"margin_left_100","data-qa":zt},x.a.createElement(H.b,{type:"times-circle-medium",className:"p-channel_prefixes__remove_prefix"}))}}]),a}(C.PureComponent);Lt.displayName="RemovePrefixButton",Lt.defaultProps=Dt;var Bt=Object(O.a)((function(e){return{clogger:Object(M.a)({state:e})}}))(Lt);function Ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Ft=new z.b("channel_prefixes"),qt={prefix:void 0,description:void 0,creatorId:void 0,showToast:S.noop,currentMemberIsAdmin:!1,creatorName:void 0,deleteChannelPrefix:S.noop,clogger:void 0,experimentTsfDeprecationChannelPrefixGroupTreatment:!1},Ht="prefix",Wt="description",Gt=function(e){f()(a,e);var t=Ut(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).onClickRemove=n.onClickRemove.bind(p()(n)),n}return u()(a,[{key:"onClickRemove",value:function(){var e=this,t=this.props,a=t.prefix,n=t.clogger;return n.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.CLICK,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"remove_prefix"}}}}),n.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.CLICK,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"remove_prefix"}}}}),this.props.deleteChannelPrefix({prefix:a}).then((function(){return e.props.showToast(Ft.t("Prefix removed"))})).catch((function(){return e.props.showToast(Ft.t("There was some error and we couldn\u2019t remove the prefix."))}))}},{key:"render",value:function(){var e=this.props,t=e.prefix,a=e.description,n=e.creatorName,o=e.currentMemberIsAdmin,r=e.experimentTsfDeprecationChannelPrefixGroupTreatment;return x.a.createElement("div",{className:"p-channel_prefixes__row"},x.a.createElement("span",{className:"flex_one"},x.a.createElement("span",{className:"p-channel_prefixes__prefix_name bold","data-qa":Ht},x.a.createElement(H.b,{type:"channel",size:"inherit"}),t),a&&a.length>0?x.a.createElement("span",{className:"p-channel_prefixes__prefix_description","data-qa":Wt},"\u2014",r?x.a.createElement(It.a,{text:a,emojiSize:ee.a.SMALL}):x.a.createElement(Mt.a,{text:a,emojiSize:ee.a.SMALL,noJumbomoji:!0,noHighlights:!0,noLinking:!0})):null),x.a.createElement("span",{className:"p-channel_prefixes__prefix_creator"},Ft.t("Added by {user}",{user:n})),o?x.a.createElement(Bt,{onClick:this.onClickRemove}):null)}}]),a}(C.PureComponent);Gt.displayName="ChannelPrefixRow",Gt.defaultProps=qt;var Zt={deleteChannelPrefix:Ct.deleteChannelPrefix},Xt=Object(O.a)((function(e,t){var a=t.creatorId;return{currentMemberIsAdmin:Object(Ye.jb)(e,Object($e.c)(e)),creatorName:Object(L.a)(a)?Object(Ye.U)(e,a):"Slack",clogger:Object(M.a)({state:e}),experimentTsfDeprecationChannelPrefixGroupTreatment:"treatment"===Object(Rt.d)(e,"tsf_deprecation_channel_prefix")}}),Zt)(Gt);function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Jt=new z.b("channel_prefixes"),Kt={onClick:S.noop,clogger:void 0},Qt="channel_prefixes_save_button",Yt=function(e){f()(a,e);var t=Vt(a);function a(){return c()(this,a),t.apply(this,arguments)}return u()(a,[{key:"componentDidMount",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.IMPRESSION,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"add_prefix"}}}})}},{key:"render",value:function(){return x.a.createElement(B.f,{type:"outline",className:"margin_top_150",onClick:this.props.onClick,"data-qa":Qt},Jt.t("Add Prefix"))}}]),a}(C.PureComponent);Yt.displayName="AddPrefixButton",Yt.defaultProps=Kt;var $t=Object(O.a)((function(e){return{clogger:Object(M.a)({state:e})}}))(Yt),ea=a("mM05"),ta=a.n(ea),aa=a("DcSV"),na=a("T8Zh"),oa=a("FZE2"),ra=a("3OBS"),ia=a("c07z"),sa=a("3D7r");function la(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var ca=new z.b("channel_prefixes"),ma={channelPrefixes:void 0,showToast:S.noop,createChannelPrefix:S.noop,getCleanDescription:S.noop,closeModal:S.noop,clogger:void 0,experimentTsfDeprecationChannelPrefixGroupTreatment:!1},ua="add_prefix_dialog",da="add_prefix_dialog_prefix_input",pa="add_prefix_dialog_description_input",_a=function(e){f()(a,e);var t=la(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).state={prefixValue:"",prefixError:null,hasDescriptionError:!1},n.descriptionInputRef=x.a.createRef(),Object(P.a)(p()(n),["onPrefixChange","onDescriptionChange","onClickSave"]),n}return u()(a,[{key:"componentDidMount",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.ADD_CHANNEL_PREFIX,action:A.UiAction.IMPRESSION}}})}},{key:"onClickSave",value:function(){var e=this;this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.ADD_CHANNEL_PREFIX,action:A.UiAction.CLICK,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"save"}}}});var t=this.descriptionInputRef.current,a=t&&t.value&&t.value();this.props.createChannelPrefix({prefix:this.state.prefixValue,description:this.props.getCleanDescription(a)}).then((function(){return e.props.showToast(ca.t("New prefix added!"))})).catch((function(){return e.props.showToast(ca.t("There was some error and we couldn\u2019t save the prefix."))}))}},{key:"onDescriptionChange",value:function(){var e=this.descriptionInputRef.current,t=e?Object(oa.a)(new ta.a(e.getContents().contents)):0;t>80&&!this.state.hasDescriptionError?this.setState((function(){return{hasDescriptionError:!0}})):t<=80&&this.state.hasDescriptionError&&this.setState((function(){return{hasDescriptionError:!1}}))}},{key:"onPrefixChange",value:function(e){var t=null;Object(aa.d)(e)?t=ca.t("Prefixes can only include letters, numbers, hyphens, and underscores."):e.length>10?t=ca.t("Try a prefix with {num} characters or fewer.",{num:10}):Object(S.find)(this.props.channelPrefixes,(function(t){return t.prefix===e}))&&(t=ca.t("Prefix already added"));var a={prefixValue:e.toLowerCase().replace(/\s/g,"")};this.state.prefixError!==t&&(a.prefixError=t,this.clogPrefixError()),this.setState((function(){return a}))}},{key:"clogPrefixError",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.ADD_CHANNEL_PREFIX,action:A.UiAction.ERROR,ui_properties:{element_type:A.ElementType.INPUT,element_name:"prefix_error"}}}})}},{key:"render",value:function(){var e=0===this.state.prefixValue.length||!!this.state.prefixError||this.state.hasDescriptionError,t=this.props.experimentTsfDeprecationChannelPrefixGroupTreatment;return x.a.createElement($.a,{onClose:this.props.closeModal,onGo:this.onClickSave,goButtonText:ca.t("Save"),title:ca.t("Add a channel prefix"),className:"p-channel_prefixes_dialog",goButtonIsDisabled:e,"data-qa":ua},x.a.createElement(ra.b,{text:ca.rt('<strong>Prefix</strong> <span className="sk_foreground_max">(max {num} characters)</span>',{num:10}),htmlFor:"channel_prefix",id:"channel_prefix_label"},x.a.createElement(Ae.a,{name:"channel_prefix",id:"channel_prefix",onChange:this.onPrefixChange,value:this.state.prefixValue,errorText:this.state.prefixError,maxCharacterLimit:10,focusOnMount:!0,"data-qa":da})),x.a.createElement(ra.b,{text:ca.rt('<strong>Description</strong> <span className="sk_foreground_max">(max {num} characters)</span>',{num:80}),htmlFor:"channel_prefix_description",id:"channel_prefix_description_label"},x.a.createElement(ia.a,{className:"p-channel_prefixes_dialog__description_input"},x.a.createElement(sa.a,{isContainerized:!0,completeOnMembers:!t,completeOnChannels:!t,completeOnEmoji:!0,fixedPosition:!0,autocompleteClassName:"p-channel_prefixes__texty_autocomplete",id:"channel_prefix_description",ariaLabel:ca.t("Prefix description"),maxLength:80,isSingleLine:!0,onTextChange:this.onDescriptionChange,ref:this.descriptionInputRef,"data-qa":pa}))))}}]),a}(C.PureComponent);_a.displayName="AddPrefixDialog",_a.defaultProps=ma;var fa={createChannelPrefix:Ct.createChannelPrefix,closeModal:R.closeModal,getCleanDescription:function(e){return Object(na.a)({text:e})}},ha=Object(O.a)((function(e){return{clogger:Object(M.a)({state:e}),experimentTsfDeprecationChannelPrefixGroupTreatment:"treatment"===Object(Rt.d)(e,"tsf_deprecation_channel_prefix")}}),fa)(_a),ga=a("p6yz"),ba=a("Tevt"),Ea=a("wlKS");function va(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var ja=new z.b("channel_prefixes"),ya={clogger:void 0},ka=function(e){f()(a,e);var t=va(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).onClick=n.onClick.bind(p()(n)),n}return u()(a,[{key:"componentDidMount",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.IMPRESSION,ui_properties:{element_type:A.ElementType.ALERT,element_name:"free_limit"}}}})}},{key:"onClick",value:function(){this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.CLICK,ui_properties:{element_type:A.ElementType.LINK,element_name:"upgrade"}}}})}},{key:"render",value:function(){var e=this;return x.a.createElement(Pt.d,{level:Pt.b.info,className:"margin_top_150"},ja.rt("The limit of channel prefixes on a free team is {number}. For more, <link>please upgrade</link>.",{number:Ea.b.FREE},(function(t){var a=t.tag,n=t.text;return"link"===a?x.a.createElement(ba.a,{href:Object(ga.o)({entryPoint:"free_limit_alert"}),onClick:e.onClick},n):null})))}}]),a}(C.PureComponent);ka.displayName="FreeLimitAlert",ka.defaultProps=ya;var Na=Object(O.a)((function(e){return{clogger:Object(M.a)({state:e})}}))(ka);function Ca(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var xa=new z.b("channel_prefixes"),wa={channelPrefixes:void 0,currentMemberIsAdmin:!1,currentTeam:void 0,openModal:S.noop,enqueueToast:S.noop,clogger:void 0},Oa="channel_prefixes_container",Sa="channel_prefixes_list",Ta="paid_limit_alert",Pa="empty_state",Ia=function(e){f()(a,e);var t=Ca(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).isFreeTeam=Object(at.z)(e.currentTeam),n.isPaidTeam=Object(at.F)(e.currentTeam),n.renderAddPrefixDialog=n.renderAddPrefixDialog.bind(p()(n)),n.showToast=n.showToast.bind(p()(n)),n}return u()(a,[{key:"hasReachedFreeLimit",value:function(){return this.isFreeTeam&&this.props.channelPrefixes.length>=Ea.b.FREE}},{key:"hasReachedPaidLimit",value:function(){return this.isPaidTeam&&this.props.channelPrefixes.length>=Ea.b.PAID}},{key:"maybeRenderFreeLimitAlert",value:function(){return this.hasReachedFreeLimit()?x.a.createElement(Na,null):null}},{key:"maybeRenderPaidLimitAlert",value:function(){return this.hasReachedPaidLimit()?x.a.createElement(Pt.d,{level:Pt.b.info,className:"margin_top_150","data-qa":Ta},xa.t("You\u2019ve already added the maximum number of prefixes.")):null}},{key:"showToast",value:function(e){return this.props.enqueueToast({element:x.a.createElement(te.b,{position:"bottom-right",toastClasses:"p-channel_prefixes_toast"},x.a.createElement("span",null,e))})}},{key:"renderAddPrefixDialog",value:function(){return this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.CLICK,ui_properties:{element_type:A.ElementType.BUTTON,element_name:"add_prefix"}}}}),this.props.openModal({element:x.a.createElement(ha,{channelPrefixes:this.props.channelPrefixes,showToast:this.showToast})})}},{key:"renderEmptyState",value:function(){var e=this.props.currentMemberIsAdmin,t=Tt.a,a=Ot.a,n=t+" 1x, "+a+" 2x";return x.a.createElement("div",{className:"display_flex margin_top_200","data-qa":Pa},x.a.createElement("div",{className:"p-channel_prefixes__empty_content"},x.a.createElement("div",{className:"p-channel_prefixes__empty_title"},xa.t("There are no channel prefixes in your workspace")),x.a.createElement("p",{className:"p-channel_prefixes__empty_body"},xa.t("Naming can be hard. Prefixes make it a little easier. Organize your team\u2019s channels by providing a naming structure the team can follow each time they create a new channel.")),e?x.a.createElement($t,{onClick:this.renderAddPrefixDialog}):null),x.a.createElement("img",{className:"p-channel_prefixes__empty_img",src:a,srcSet:n,alt:xa.t("No channel prefixes")}))}},{key:"renderPrefixRow",value:function(e){var t=e.prefix,a=e.description,n=e.creator_id;return x.a.createElement(Xt,{key:t,prefix:t,description:a,creatorId:n,showToast:this.showToast})}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentMemberIsAdmin,n=t.channelPrefixes;return x.a.createElement(x.a.Fragment,null,n.length?x.a.createElement("div",{"data-qa":Oa},x.a.createElement("p",{className:"p-channel_prefixes__description"},xa.t("Creating guidelines for naming channels is one of the best ways to keep your workspace organized. Add a set of standard prefixes to keep channel names consistent and descriptive.")),x.a.createElement("div",{className:"p-channel_prefixes__list","data-qa":Sa},Object(S.map)(n,(function(t){return e.renderPrefixRow(t)}))),!a||this.hasReachedFreeLimit()||this.hasReachedPaidLimit()?null:x.a.createElement($t,{onClick:this.renderAddPrefixDialog}),this.maybeRenderFreeLimitAlert(),this.maybeRenderPaidLimitAlert()):this.renderEmptyState(),x.a.createElement(F.a,null))}}]),a}(C.PureComponent);Ia.displayName="ChannelPrefixes",Ia.defaultProps=wa;var Ra={openModal:R.openModal,enqueueToast:ae.enqueueToast},Ma=Object(O.a)((function(e){return{currentMemberIsAdmin:Object(Ye.jb)(e,Object($e.c)(e)),currentTeam:Object(I.e)(e),clogger:Object(M.a)({state:e})}}),Ra)(Ia);function Aa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Da={fetchAndUpsertChannelPrefixesList:S.noop,channelPrefixes:void 0,clogger:void 0},za="channel_prefixes-container",La=function(e){f()(a,e);var t=Aa(a);function a(){return c()(this,a),t.apply(this,arguments)}return u()(a,[{key:"componentDidMount",value:function(){this.props.fetchAndUpsertChannelPrefixesList(),this.props.clogger.track(A.EventId.CHANNEL_PREFIXES,{contexts:{ui_context:{step:A.UiStep.CHANNEL_PREFIXES,action:A.UiAction.IMPRESSION}}})}},{key:"render",value:function(){var e=this.props.channelPrefixes;return x.a.createElement("div",{className:"p-channel_prefixes","data-qa":za},void 0===e?x.a.createElement(xt.a,{size:"large"}):x.a.createElement(Ma,{channelPrefixes:e}))}}]),a}(C.PureComponent);La.displayName="ChannelPrefixesContainer",La.defaultProps=Da;var Ba={fetchAndUpsertChannelPrefixesList:Ct.fetchAndUpsertChannelPrefixesList},Ua=Object(O.a)((function(e){return{channelPrefixes:Object(Ct.getChannelPrefixes)(e),clogger:Object(M.a)({state:e})}}),Ba)(La),Fa=a("RIqP"),qa=a.n(Fa),Ha=a("h9PG"),Wa=a("mxiZ"),Ga=a("6jsb"),Za=a("OqoL"),Xa=a("iyP1"),Va=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.text,n=t.emoji,o=t.canonical,r=t.duration;return[n,Object(Za.b)(e,a),o||"",r]},Ja=Object(Ga.c)("Set custom status presets for a team",(function(e,t){var a,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=n.presets,r=n.resetToDefaults,i=void 0!==r&&r;if(o&&!i){var s=t();a=o.map((function(e){return Va(s,e)}))}return o||i?e(Object(Xa.c)({pref:"custom_status_presets",value:a,otherPrefsToCheck:["uses_customized_custom_status_presets"],optimistically:!i})):N.a.resolve()}));Ja.meta={name:"setCustomStatusPresets",key:"actionsSetCustomStatusPresetsSetCustomStatusPresets",description:"Set custom status presets for a team"},Ja.propTypes={presets:w.default.arrayOf(w.default.shape({text:w.default.string,emoji:w.default.string,canonical:w.default.string,duration:w.default.string})),resetToDefaults:w.default.bool};var Ka=Ja,Qa=a("oT5T"),Ya=a("ynxK"),$a=a("J4zp"),en=a.n($a),tn=a("zxER"),an=a("VJ6R"),nn=a("IQ16"),on=a("mduA"),rn=a("FlxZ");function sn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var ln=function(e){var t=e.initialText,a=e.initialEmoji,n=e.initialDuration,o=e.initialCanonical,r=e.onChange,i=e.focusOnMount,l=e.experimentTsfDeprecationCustomStatusGroupTreatment,c=Object(tn.a)((function(e){return Object(rn.a)(e,{text:t})})),m=Object(C.useRef)(),u=Object(C.useState)(a),d=en()(u,2),p=d[0],_=d[1],f=Object(C.useState)(c),h=en()(f,2),g=h[0],b=h[1],E=Object(C.useState)(n),v=en()(E,2),j=v[0],y=v[1];function k(e){r(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):sn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({canonical:t===g?o:"",duration:j,emoji:p,text:g},e))}return Object(an.a)((function(){var e;c!==g&&(null===(e=m.current)||void 0===e||e.value(c))}),[c]),Object(an.a)((function(){a!==p&&_(a)}),[a]),Object(an.a)((function(){n!==j&&y(n)}),[n]),x.a.createElement(x.a.Fragment,null,x.a.createElement("div",null,x.a.createElement(nn.a,{focusOnMount:i,omitClearAll:!0,initialText:t,nextEmoji:p,nextText:g,onEmojiChange:function(e){_(e),k({emoji:e})},onEnter:function(){return k({})},onTextChange:function(e){b(e),k({text:e})},ref:m,experimentTsfDeprecationCustomStatusGroupTreatment:l})),x.a.createElement("div",{className:"p-customize_statuses__grid_duration"},x.a.createElement(on.a,{omitCustom:!0,onChange:function(e){y(e),k({duration:e})},valueKey:j})))},cn=a("q5MM");a("0F5r");function mn(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function un(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(a),!0).forEach((function(t){s()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):mn(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function dn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var pn=new z.b("current_status"),_n=function(e){f()(a,e);var t=dn(a);function a(e){var n;return c()(this,a),(n=t.call(this,e)).state={teamPresets:qa()(e.initialTeamPresets),isValid:!0,isChanged:!1,isSubmitting:!1},n.onRestoreDefaults=n.onRestoreDefaults.bind(p()(n)),n.onRestoreDefaultsClick=n.onRestoreDefaultsClick.bind(p()(n)),n.onSubmit=n.onSubmit.bind(p()(n)),n}return u()(a,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this.props.initialTeamPresets,a=e.initialTeamPresets;Object(S.isEqual)(a,t)||this.setState((function(){return{teamPresets:a}}))}},{key:"onChange",value:function(e,t){var a=this.props.initialTeamPresets;this.setState((function(n){var o=n.teamPresets,r=un(un({},o[e]),t),i=[].concat(qa()(o.slice(0,e)),[r],qa()(o.slice(e+1)));return{isValid:i.every((function(e){return e.text.length<=100})),isChanged:!Object(S.isEqual)(i,a),teamPresets:i}}))}},{key:"onRestoreDefaults",value:function(){this.onSubmit({shouldResetToDefaults:!0})}},{key:"onRestoreDefaultsClick",value:function(){var e=pn.t("Restore default suggestions?"),t=pn.t("Switching back to Slack\u2019s defaults will erase your custom suggestions."),a=pn.t("Restore Defaults"),n=x.a.createElement(Qa.a,{title:e,goButtonText:a,onGo:this.onRestoreDefaults,showCancelButton:!0,focusOnPrimaryButton:!0,className:"p-customize_statuses__restore_dialog"},t);this.props.openModal({element:n})}},{key:"onSubmit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.shouldResetToDefaults,n=void 0!==a&&a,o=this.props,r=o.initialTeamPresets,i=o.clogger,s=this.state.teamPresets;this.setState((function(){return{isSubmitting:!0}})),n?i.track(A.EventId.CUSTOM_STATUS_ADMIN_RESTORE_DEFAULT,{}):s.forEach((function(e,t){Object(S.isEqual)(e,r[t])||i.track(A.EventId.CUSTOM_STATUS_ADMIN_PRESET_SET,{custom_status_text:e.text,custom_status_emoji:e.emoji,custom_status_duration:A.CustomStatusDuration["DURATION_"+(e.duration||cn.a.no_expiration).toUpperCase()],custom_status_preset:A.CustomStatusPreset["ADMIN_PRESET_"+(t+1)]})})),this.props.setCustomStatusPresets({presets:s,resetToDefaults:n}).catch((function(){e.setState((function(){return{isSubmitting:!1}})),e.props.openModal({element:x.a.createElement(Qa.a,null,pn.t("Sorry! Something went wrong. Please try again."))})})).then((function(){e.setState((function(){return{isChanged:!1,isSubmitting:!1,isValid:!0}}))}))}},{key:"renderControls",value:function(){return x.a.createElement("div",{className:"p-customize_statuses__grid"},x.a.createElement("div",{className:"p-customize_statuses__grid_header"},x.a.createElement("strong",null,pn.t("Status"))),x.a.createElement("div",{className:"p-customize_statuses__grid_header padding_left_75"},x.a.createElement("strong",null,pn.t("By default, clear after:"))),this.renderCustomStatusInputs(),x.a.createElement("div",null,this.renderRestoreDefaultsButton()),x.a.createElement("div",{className:"align_right"},this.renderSaveButton()))}},{key:"renderCustomStatusInput",value:function(e,t){var a=this,n=e.text,o=e.emoji,r=e.canonical,i=e.duration,s=this.props.experimentTsfDeprecationCustomStatusGroupTreatment;return x.a.createElement(ln,{key:t,focusOnMount:0===t,initialText:n,initialEmoji:o,initialDuration:i,initialCanonical:r,onChange:function(e){return a.onChange(t,e)},experimentTsfDeprecationCustomStatusGroupTreatment:s})}},{key:"renderCustomStatusInputs",value:function(){return this.props.initialTeamPresets.map(this.renderCustomStatusInput,this)}},{key:"renderRestoreDefaultsButton",value:function(){if(!this.props.teamUsesCustomizedPresets)return null;var e=pn.t("Restore the default status suggestions");return x.a.createElement(Ya.a,{className:"statuses_revert_suggestions_button","aria-label":e,onClick:this.onRestoreDefaultsClick},e)}},{key:"renderSaveButton",value:function(){var e=this.state,t=e.isChanged,a=e.isValid,n=e.isSubmitting;return x.a.createElement(B.c,{type:"primary",onClick:this.onSubmit,disabled:!a||!t,loading:n},pn.t("Save"))}},{key:"render",value:function(){return x.a.createElement(x.a.Fragment,null,x.a.createElement("h3",{className:"bottom_margin"},pn.t("Suggested statuses")),x.a.createElement("p",null,pn.t("Anyone can write their own status, and Slack offers a few suggestions to get you started. If you\u2019d like, you can customize these suggestions for your workspace.")),this.renderControls(),x.a.createElement("p",{className:"no_bottom_margin"},x.a.createElement("strong",null,pn.t("Tips for statuses:"))),x.a.createElement("ul",null,x.a.createElement("li",null,pn.t("Keep it short")),x.a.createElement("li",null,pn.t("Avoid acronyms")),x.a.createElement("li",null,pn.t("Pick the perfect emoji: this is key."))))}}]),a}(C.PureComponent);_n.displayName="BaseCustomizeStatuses",_n.defaultProps={teamUsesCustomizedPresets:!1,experimentTsfDeprecationCustomStatusGroupTreatment:!1};var fn={setCustomStatusPresets:Ka,openModal:R.openModal},hn=Object(O.a)((function(e){return{initialTeamPresets:Object(Wa.a)(e),teamUsesCustomizedPresets:Object(Ha.a)(e,"uses_customized_custom_status_presets"),clogger:Object(M.a)({state:e}),experimentTsfDeprecationCustomStatusGroupTreatment:"treatment"===Object(Rt.d)(e,"tsf_deprecation_custom_status")}}),fn)(_n),gn=a("c+rX"),bn=a("yXPU"),En=a.n(bn),vn=a("bDqM");a("UX7d");function jn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var yn=new z.b("welcome_place"),kn=function(e){f()(a,e);var t=jn(a);function a(e){var n;return c()(this,a),n=t.call(this,e),s()(p()(n),"disableUI",(function(){n.setState((function(){return{isUIDisabled:!0}}))})),s()(p()(n),"enableUI",(function(){n.setState((function(){return{isUIDisabled:!1}}))})),s()(p()(n),"onClickSave",En()(regeneratorRuntime.mark((function e(){var t,a,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.welcomePlaceEnabled,o=t.logger,n.disableUI(),e.prev=2,e.next=5,n.props.setWelcomePlacePref(!a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),o.error("Error "+(a?"enabling":"disabling")+" welcome place: "+e.t0);case 10:if(e.prev=10,!a){e.next=14;break}return e.next=14,n.props.loadAndSetWelcomePlaceSettings();case 14:return n.enableUI(),e.finish(10);case 16:case"end":return e.stop()}}),e,null,[[2,7,10,16]])})))),n.state={isUIDisabled:!1},n}return u()(a,[{key:"render",value:function(){var e=this.props.welcomePlaceEnabled,t=this.state.isUIDisabled,a=yn.t("Turn off Get started page for your team."),n=yn.t("Turn on Get started page for your team.");return x.a.createElement("div",{className:"customize-welcome-place-toggle display_flex align_items_center"},x.a.createElement("p",{className:"margin_bottom_0 auto_right_margin"},e?a:n),x.a.createElement(B.c,{"aria-label":e?a:n,loading:t,disabled:t,type:"primary",onClick:this.onClickSave,className:"customize-welcome-place-toggle_button"},e?yn.t("Disable",{fallbackHashNs:"menu",fallbackHash:"9a7d4e0687b14e2b7cda406900b802782cd50a62"}):yn.t("Enable",{fallbackHashNs:"menu",fallbackHash:"20063ad9053289cecaa20ae630ed2dd758282a07"})))}}]),a}(C.Component);kn.displayName="CustomizeWelcomePlaceToggle";var Nn=Object(O.a)((function(e){return{logger:Object(J.a)({state:e}),welcomePlaceEnabled:Object(Ha.a)(e,"welcome_place_enabled")}}),(function(e){return{loadAndSetWelcomePlaceSettings:function(){return e(Object(vn.i)())},setWelcomePlacePref:function(t){return e(Object(Xa.c)({pref:"welcome_place_enabled",value:t,optimistically:!1,reason:"WelcomePlace_setTeamPref"}))}}}))(kn),Cn=a("ayyL"),xn=a("4M+g"),wn=a("nlS/"),On=a("Zhly");function Sn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Tn=new z.b("admin"),Pn=function(e){f()(a,e);var t=Sn(a);function a(){var e;c()(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return e=t.call.apply(t,[this].concat(o)),s()(p()(e),"onOptionSelected",(function(t){e.props.onChange(t)})),s()(p()(e),"getSearcherOptions",(function(){var t=e.props.defaultChannelIds;return{entities:{channels:{includeArchived:!1,includePrivate:!1,includeMpims:!1,includeFromAnotherTeam:!1,includeExternallyShared:!1}},filter:function(e){return t.includes(e.id)},returnMetadata:!1,allowEmptyQuery:!0,limit:100}})),s()(p()(e),"renderOption",(function(e){return x.a.createElement(On.a,{channel:e.entity})})),e}return u()(a,[{key:"render",value:function(){var e=this.props,t=e.isDisabled,a=e.initialOption;return x.a.createElement(wn.e,{isRequired:!0,width:"100%",optionsRowHeight:32,isDisabled:t,ariaLabel:Tn.t("Choose a channel"),placeholderText:Tn.t("Choose a channel"),className:"customize-welcome-channel-picker",classPrefix:"customize-welcome_channel_picker",selectId:"customize-welcome-channel-picker-select",selectDataQa:"customize_welcome_channel_picker_select",selectedOption:a,searcherOptions:this.getSearcherOptions(),onOptionSelected:this.onOptionSelected,renderOption:this.renderOption,renderSelectedOption:this.renderOption})}}]),a}(C.Component);Pn.displayName="WelcomeChannelPicker";var In=Object(O.a)((function(e,t){var a=t.initialChannelId,n=Object(xn.d)(e,a),o=n&&{value:n.id,label:n.id,entity:n};return{defaultChannelIds:Object(Ha.a)(e,"default_channels")||[],initialOption:o}}))(Pn);function Rn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Mn=new z.b("welcome_place"),An=function(e){f()(a,e);var t=Rn(a);function a(e){var n;return c()(this,a),n=t.call(this,e),s()(p()(n),"disableUI",(function(){n.setState((function(){return{isUIDisabled:!0}}))})),s()(p()(n),"enableUI",(function(){n.setState((function(){return{isUIDisabled:!1}}))})),s()(p()(n),"onChannelChange",(function(e){n.setState((function(){return{selectedOption:e}}))})),s()(p()(n),"onClickSave",En()(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.props.logger,!(a=n.state.selectedOption)){e.next=15;break}return n.disableUI(),e.prev=4,e.next=7,n.props.submitWelcomePlaceSettings({sendToChannelId:a.value});case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(4),t.error("Error submitting welcome message: "+e.t0);case 12:return e.prev=12,n.enableUI(),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[4,9,12,15]])})))),n.state={isUIDisabled:!1},n}return u()(a,[{key:"componentDidMount",value:function(){this.props.loadAndSetWelcomePlaceSettings()}},{key:"render",value:function(){var e=this.props,t=e.sendToChannelId,a=e.welcomePlaceEnabled,n=this.state,o=n.isUIDisabled,r=n.selectedOption;return x.a.createElement("div",{className:"customize-welcome-channel"},x.a.createElement(In,{isDisabled:!a||o,initialChannelId:t,onChange:this.onChannelChange}),r&&t!==r.value&&x.a.createElement("div",{className:"margin_top_125 display_flex justify_content_end"},x.a.createElement(B.c,{loading:o,disabled:o,type:"primary",onClick:this.onClickSave,className:"customize-welcome-channel_save-button"},Mn.t("Save",{fallbackHash:"efc007a393f66cdb14d57d385822a3d9e36ef873",fallbackHashNs:"admin"}))))}}]),a}(C.Component);An.displayName="CustomizeWelcomeChannel";var Dn=Object(O.a)((function(e){var t=Object(Cn.r)(e);return{logger:Object(J.a)({state:e}),sendToChannelId:t,welcomePlaceEnabled:Object(Ha.a)(e,"welcome_place_enabled")}}),(function(e){return{loadAndSetWelcomePlaceSettings:function(){return e(Object(vn.i)())},submitWelcomePlaceSettings:function(t){return e(Object(vn.r)(t))}}}))(An),zn=a("forh"),Ln=a("CaXY"),Bn=a("Mc8/");function Un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}var Fn=new z.b("welcome_place"),qn=function(e){f()(a,e);var t=Un(a);function a(){return c()(this,a),t.apply(this,arguments)}return u()(a,[{key:"render",value:function(){var e=this.props,t=e.deleteCustomWelcomeMessage,a=e.openEditor,n=e.customWelcomeMessage,o=e.isEditorOpen,r=e.submitCustomWelcomeMessage,i=e.isDisabled,s=x.a.createElement(x.a.Fragment,null,x.a.createElement(B.f,{type:"primary",onClick:r},Fn.t("Save")));return n&&(s=x.a.createElement(x.a.Fragment,null,x.a.createElement(B.f,{disabled:i,type:"outline",onClick:t,className:"margin_right_50"},Fn.t("Delete")),o?x.a.createElement(B.f,{disabled:i,type:"primary",onClick:r},Fn.t("Save")):x.a.createElement(B.f,{disabled:i,type:"primary",onClick:a},Fn.t("Edit")))),x.a.createElement("div",{className:"p-welcome_place_message_buttons"},s)}}]),a}(C.Component);function Hn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,n=E()(e);if(t){var o=E()(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return g()(this,a)}}qn.displayName="WelcomeMessageButtons";var Wn=function(e){f()(a,e);var t=Hn(a);function a(e){var n;return c()(this,a),n=t.call(this,e),s()(p()(n),"disableUI",En()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState((function(){return{isUIDisabled:!0}}));case 1:case"end":return e.stop()}}),e)})))),s()(p()(n),"enableUI",En()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState((function(){return{isUIDisabled:!1}}));case 1:case"end":return e.stop()}}),e)})))),s()(p()(n),"closeEditor",(function(){n.setState((function(){return{isEditorOpen:!1,currentCustomWelcomeMessage:null}}))})),s()(p()(n),"openEditor",(function(){var e=n.props.customWelcomeMessage;n.setState((function(){return{isEditorOpen:!0,currentCustomWelcomeMessage:e}}))})),s()(p()(n),"deleteCustomWelcomeMessage",En()(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.closeEditor(),e.next=3,n.props.deleteCustomWelcomeMessage();case 3:return e.next=5,n.props.loadAndSetWelcomePlaceMessage();case 5:case"end":return e.stop()}}),e)})))),s()(p()(n),"updateCustomWelcomeMessage",(function(e){var t=n.props.currentUserId,a=e.blocks;e.overLimit||n.setState((function(){return{currentCustomWelcomeMessage:{blocks:a,lastEditorId:t}}}))})),s()(p()(n),"submitCustomWelcomeMessage",En()(regeneratorRuntime.mark((function e(){var t,a,o,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.props,a=t.customWelcomeMessage,o=t.logger,r=n.state.currentCustomWelcomeMessage,e.next=4,n.disableUI();case 4:if(e.prev=4,!a){e.next=10;break}return e.next=8,n.props.updateCustomWelcomeMessage(r);case 8:e.next=12;break;case 10:return e.next=12,n.props.createCustomWelcomeMessage(r);case 12:return e.next=14,n.props.loadAndSetWelcomePlaceMessage();case 14:n.closeEditor(),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(4),o.error("Error submitting welcome message: "+e.t0);case 20:return e.prev=20,n.enableUI(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[4,17,20,23]])})))),n.state={isEditorOpen:!1,isUIDisabled:!1,currentCustomWelcomeMessage:null,welcomeMessageLoaded:!1},n}return u()(a,[{key:"componentDidMount",value:function(){var e=this;this.props.loadAndSetWelcomePlaceMessage().then((function(){e.setState((function(){return{welcomeMessageLoaded:!0}}))}))}},{key:"render",value:function(){var e=this.state,t=e.currentCustomWelcomeMessage,a=e.isEditorOpen,n=e.isUIDisabled,o=e.welcomeMessageLoaded,r=this.props,i=r.customWelcomeMessage,s=r.welcomePlaceEnabled;if(!o)return x.a.createElement("div",{className:"customize-welcome-message-loading"},x.a.createElement(xt.a,null));var l=i&&!a?x.a.createElement(zn.a,{blocks:null==i?void 0:i.blocks,blocksContainerContext:Ln.a.welcome_message}):x.a.createElement(Bn.a,{initialContents:null==t?void 0:t.blocks,onTextChange:this.updateCustomWelcomeMessage,onClickBack:this.closeEditor,onClickSave:this.submitCustomWelcomeMessage,hasButtons:!1,isDisabled:!s||n});return x.a.createElement("div",{className:"display_flex justify_content_between"},x.a.createElement("div",{className:"welcome-message-workflow-card__avatar-wrapper"},x.a.createElement(Q.c,{userId:null==i?void 0:i.lastEditorId,size:56,isInteractive:!1})),x.a.createElement("div",{className:"welcome-message-workflow-card__dialog-box"},l,x.a.createElement("div",{className:"margin_top_125 display_flex justify_content_end"},x.a.createElement(qn,{openEditor:this.openEditor,customWelcomeMessage:i,isEditorOpen:a,deleteCustomWelcomeMessage:this.deleteCustomWelcomeMessage,submitCustomWelcomeMessage:this.submitCustomWelcomeMessage,isDisabled:!s||n}))),x.a.createElement(gn.a,null))}}]),a}(C.Component);Wn.displayName="CustomizeWelcomeMessage";var Gn=Object(O.a)((function(e){return{logger:Object(J.a)({state:e}),customWelcomeMessage:Object(Cn.c)(e),onboardingChannelId:Object(Cn.j)(e),currentUserId:Object(T.a)(e),welcomePlaceEnabled:Object(Ha.a)(e,"welcome_place_enabled")}}),(function(e){return{markWelcomeMessageTaskAsComplete:function(){return e(Object(vn.l)())},loadAndSetWelcomePlaceMessage:function(){return e(Object(vn.h)())},updateCustomWelcomeMessage:function(t){return e(Object(vn.t)(t))},createCustomWelcomeMessage:function(t){return e(Object(vn.b)(t))},deleteCustomWelcomeMessage:function(){return e(Object(vn.c)())}}}))(Wn),Zn=a("Fuyg"),Xn=a("R/Rs"),Vn=a("pFUb"),Jn=a("hueQ"),Kn=a("r6oD"),Qn=a("nFQW"),Yn=a("Tsh7"),$n=a("YUBf"),eo=a("Yla9"),to=(a("sl22"),new z.b("slackbot_responses")),ao="slackbot_responses_dialog",no="slackbot_responses_dialog_triggers_input",oo="slackbot_responses_dialog_responses_input",ro="slackbot_responses_dialog_save_button",io=function(e){var t=e.closeModal,a=e.createSlackbotResponse,n=e.editSlackbotResponse,o=e.action,r=e.slackbotResponse,i=e.showToast,s=Object(C.useState)(r?function(e){return e.join(", ")}(r.triggers):""),l=en()(s,2),c=l[0],m=l[1],u=Object(C.useState)(r?function(e){return e.join("\n")}(r.responses):""),d=en()(u,2),p=d[0],_=d[1];return x.a.createElement($n.a,{closeModal:t,dataQa:ao},x.a.createElement($n.i,null,x.a.createElement($n.l,{title:o===Vn.a.Add?to.t("Add Slackbot Response"):to.t("Edit Slackbot Response"),className:"p-slackbot_response_dialog__title"})),x.a.createElement($n.d,null,x.a.createElement($n.e,null,x.a.createElement(ra.b,{text:to.t("When someone says"),htmlFor:"slackbot-triggers"}),x.a.createElement("div",{className:"display_flex"},x.a.createElement("img",{src:"/img/avatars/ava_0009-48.png",alt:"",className:"p-slackbot_response_dialog__avatar"}),x.a.createElement("div",{className:"flex_one"},x.a.createElement(eo.a,{onChange:function(e){return m(e)},value:c,id:"slackbot-triggers","data-qa":no,name:"triggers",className:"p-slackbot_response_dialog__input",hintText:to.t("Separate multiple input phrases with commas. i.e. hi, hello")})))),x.a.createElement($n.e,null,x.a.createElement(ra.b,{text:to.t("Slackbot responds"),htmlFor:"slackbot-responses"}),x.a.createElement("div",{className:"display_flex"},x.a.createElement("img",{src:"/img/slackbot_48.png",alt:"",className:"p-slackbot_response_dialog__avatar"}),x.a.createElement("div",{className:"flex_one"},x.a.createElement(eo.a,{onChange:function(e){return _(e)},value:p,id:"slackbot-responses","data-qa":oo,name:"responses",className:"p-slackbot_response_dialog__input",hintText:to.rt("You can add as many Slackbot responses as you\u2019d like for each input phrase. Put each one on its own line. (A random response will be chosen if there are multiple responses.) For example: <div>Well hi there!</div><div>Hello yourself</div>")}))))),x.a.createElement($n.g,null,x.a.createElement($n.h,null,x.a.createElement($n.c,{type:"outline",className:"p-slackbot_response_dialog__footer_button"},to.t("Cancel")),x.a.createElement(B.f,{disabled:""===c||""===p,onClick:function(){o===Vn.a.Add?a({triggers:c,responses:p}).then((function(){i(to.t("Slackbot response added",{fallbackHash:"b5a4f4ac8e3bf93fd652bac14c6180b2f8fcb01a"}))})).catch((function(){i(to.t("Could not add Slackbot response",{fallbackHash:"0dbba3dbcb57183d0253e46318e352b4d54fbb82"}))})):r&&n({id:r.id,triggers:c,responses:p}).then((function(){i(to.t("Slackbot response saved",{fallbackHash:"a1a0392963c13b710ea45834aa4f454b6fe020e3"}))})).catch((function(){i(to.t("Could not save Slackbot response",{fallbackHash:"38582c0cbbaeb4bdbb853fbf0a22916285c9f674"}))})),t()},className:"p-slackbot_response_dialog__footer_button","data-qa":ro},to.t("Save")))))};io.displayName="SlackbotResponseDialog";var so=Object(O.a)(null,(function(e){return{closeModal:function(){return e(Object(R.closeModal)())},createSlackbotResponse:function(t){var a=t.triggers,n=t.responses;return e(Object(Xn.a)({triggers:a,responses:n}))},editSlackbotResponse:function(t){var a=t.id,n=t.triggers,o=t.responses;return e(Object(Xn.d)({id:a,triggers:n,responses:o}))}}}))(io),lo=(a("hcCp"),new z.b("slackbot_responses")),co="slackbot_resonse_row",mo="slackbot_response_triggers",uo="slackbot_response_trigger_item",po="slackbot_response_responses",_o="slackbot_response_response_item",fo="slackbot_response_edited_by",ho="slackbot_response_edit",go="slackbot_response_delete",bo=function(e){var t=e.slackbotResponse,a=e.memberName,n=e.deleteSlackbotResponse,o=e.openModal,r=e.showToast,i=e.experimentSlackbotFilterAutoResponseGroupTreatment,s=function(){return o({element:x.a.createElement(so,{action:Vn.a.Edit,slackbotResponse:t,showToast:r})})},l=function(){t.id&&n(t.id).then((function(){r(lo.t("Slackbot response removed",{fallbackHash:"f9b99fad318740786f972b45c69972489fa14b40"}))})).catch((function(){r(lo.t("Could not remove Slackbot response"))}))};return x.a.createElement("div",{className:X()("p-slackbot_responses_row",{"p-slackbot_responses_row--filter":i}),"data-qa":co},x.a.createElement("div",{className:"p-slackbot_responses_row__triggers","data-qa":mo},t.triggers.map((function(e){return x.a.createElement("div",{className:"p-slackbot_responses_row__trigger_item",key:e,"data-qa":uo},e)}))),x.a.createElement("div",{className:"p-slackbot_responses_row__responses","data-qa":po},x.a.createElement("img",{src:"/img/slackbot_20.png",alt:"",className:"p-slackbot_responses_row__icon"}),x.a.createElement("div",{className:"p-slackbot_responses_row__responses_group"},t.responses.map((function(e){return x.a.createElement("div",{className:"p-slackbot_responses_row__response_item",key:e,"data-qa":_o},e)})))),x.a.createElement("div",{className:"p-slackbot_responses_row__edited_by","data-qa":fo},i?x.a.createElement(Kn.a,{className:"p-slackbot_responses_row__member",useShortMode:!0,showStatus:!1,showPresence:!1,isDraftContext:!1,id:t.editor||t.creator}):a),x.a.createElement("div",{className:"p-slackbot_responses_row__actions"},i?x.a.createElement("span",null,x.a.createElement(Yn.c,{tip:lo.t("Edit")},x.a.createElement(Qn.a,{"aria-label":lo.t("Edit"),icon:"pencil",onClick:s,"data-qa":ho})),x.a.createElement(Yn.c,{tip:lo.t("Delete response")},x.a.createElement(Qn.a,{"aria-label":lo.t("Delete response"),icon:"times-circle",onClick:l,"data-qa":go}))):x.a.createElement(x.a.Fragment,null,x.a.createElement(B.f,{onClick:s,type:"outline",size:"small",className:"p-slackbot_responses_row__edit_button","data-qa":ho},lo.t("Edit")),x.a.createElement(B.d,{onClick:l,"data-qa":go},x.a.createElement(H.b,{type:"times-circle",className:"p-slackbot_responses_row__delete_button",inline:!0})))))};bo.displayName="SlackbotResponseRow";var Eo=Object(O.a)((function(e,t){var a=t.slackbotResponse,n=a.editor?Object(Ye.U)(e,a.editor):null,o=Object(Ye.U)(e,a.creator);return{memberName:n||o,experimentSlackbotFilterAutoResponseGroupTreatment:"treatment"===Object(Rt.d)(e,"slackbot_filter_auto_response")}}),(function(e){return{deleteSlackbotResponse:function(t){return e(Object(Xn.c)(t))},openModal:function(t){return e(Object(R.openModal)(t))}}}))(bo),vo=(a("JLn8"),new z.b("slackbot_responses")),jo="slackbot_responses_container",yo="slackbot_responses_table",ko="slackbot_responses_add",No="slackbot_responses_filter",Co=function(e){var t=e.experimentSlackbotFilterAutoResponseGroupTreatment,a=e.fetchAndUpsertSlackbotResponses,n=e.fetchSlackbotResponsesNextPage,o=e.slackbotResponses,r=e.isAdmin,i=e.slackbotResponsesOnlyAdmins,s=e.openModal,l=e.enqueueToast,c=Object(C.useCallback)((function(e){return l({element:x.a.createElement(te.b,{position:"bottom-right",toastClasses:"p-slackbot_responses_container__toast"},x.a.createElement("span",null,e))})}),[l]),m=Object(C.useState)(""),u=en()(m,2),d=u[0],p=u[1],_=Object(C.useState)(!1),f=en()(_,2),h=f[0],g=f[1],b=Object(C.useState)(null),E=en()(b,2),v=E[0],j=E[1],y=Object(C.useState)(!1),k=en()(y,2),N=k[0],w=k[1],O=Object(C.useState)(null),S=en()(O,2),T=S[0],P=S[1],I=Object(C.useCallback)((function(e){p(e.target.value)}),[p]),R=Object(C.useMemo)((function(){return o.filter((function(e){if(!t)return!0;if(""!==d){var a=Object(Zn.a)(d);return e.triggers.some((function(e){return Object(Zn.a)(e).includes(a)}))||e.responses.some((function(e){return Object(Zn.a)(e).includes(a)}))}return!0})).map((function(e){return{id:"slackbotResponse-"+e.id,items:[{id:"slackbot_response",value:x.a.createElement(Eo,{slackbotResponse:e,showToast:c})}]}}))}),[d,t,o,c]),M=Object(C.useRef)(null),A=Object(C.useCallback)((function(){N||v||(g(!0),n({limit:t?500:void 0}).then((function(e){e.nextCursor||w(!0)})).catch((function(e){j(e)})).finally((function(){g(!1)})))}),[g,v,N,n,t]);Object(C.useEffect)((function(){g(!0),a({limit:t?500:void 0}).then((function(e){e.nextCursor||w(!0)})).catch((function(e){j(e)})).finally((function(){g(!1)}))}),[a,t]),Object(C.useEffect)((function(){!t||""===d||h||N||A()}),[t,d,h,N,A]),Object(C.useEffect)((function(){!function(){if(!R||0===R.length)return P(null);if(!M||!M.current||!M.current.tableViewContainerNode)return P(null);var e=M.current.tableViewContainerNode.querySelectorAll(".c-virtual_list__scroll_container");if(!e.length)return P(null);var t=e[0].getBoundingClientRect().height,a=Math.max(61,Math.min(700,t));P(a)}()}),[R]);var D=[{id:Vn.c.Triggers,value:vo.t("When someone says"),className:"p-slackbot_responses_row_header__triggers",ariaLabel:vo.t("Triggers for Slackbot responses"),noHover:!0},{id:Vn.c.Responses,value:vo.t("Slackbot responds"),className:"p-slackbot_responses_row_header__responses",ariaLabel:vo.t("Slackbot responses"),noHover:!0},{id:Vn.c.Editor,value:vo.t("Last edited by"),className:"p-slackbot_responses_row_header__edited_by",noHover:!0},{id:Vn.c.Actions,value:null,className:"p-slackbot_responses_row_header__actions",noHover:!0}],z=Object(C.useCallback)((function(){return s({element:x.a.createElement(so,{action:Vn.a.Add,showToast:c})})}),[s,c]);return x.a.createElement("div",{className:"p-slackbot_responses_container","data-qa":jo},x.a.createElement("div",{className:t?"p-slackbot_responses_container__content":""},!r&&t?vo.rt("Slackbot can automatically respond to messages that members of your workspace send in channels. <Link>Get inspired</Link> with a few ideas.",null,(function(e){var t=e.tag,a=e.text;return"Link"===t&&x.a.createElement(ba.a,{target:"_blank",rel:"noopener noreferrer",href:"https://slack.com/help/articles/202026038#add-customized-responses"},a)})):r?i?vo.rt("Slackbot can respond to messages that members of your workspace send in public and private channels. Right now, <strong>only Workspace Administrators and Owners can edit Slackbot responses.</strong> You can change this in <a>Admin Settings</a>.",null,(function(e){var t=e.tag,a=e.text;return"strong"===t?x.a.createElement("strong",null,a):x.a.createElement(ba.a,{href:"/admin/settings#slackbot_responses"},a)})):t?vo.rt("Slackbot can automatically respond to messages that members of your workspace send in channels. <Link>Get inspired</Link> with a few ideas. Right now, <strong>all members can edit Slackbot responses</strong>. You can change this in <AdminLink>Admin Settings</AdminLink>.",null,(function(e){var t=e.tag,a=e.text,n=e.key;return"strong"===t?x.a.createElement("strong",{key:n},a):"Link"===t?x.a.createElement(ba.a,{key:n,target:"_blank",rel:"noopener noreferrer",href:"https://slack.com/help/articles/202026038#add-customized-responses"},a):"AdminLink"===t?x.a.createElement(ba.a,{key:n,href:"/admin/settings#slackbot_responses"},a):null})):vo.rt("Slackbot can respond to messages that members of your workspace send in public and private channels. Right now, <strong>all members can edit Slackbot responses</strong>. You can change this in <a>Admin Settings</a>.",null,(function(e){var t=e.tag,a=e.text;return"strong"===t?x.a.createElement("strong",null,a):x.a.createElement(ba.a,{href:"/admin/settings#slackbot_responses"},a)})):vo.t("Slackbot can respond to messages that members of your workspace send in public and private channels.")),!t&&x.a.createElement("hr",null),x.a.createElement("div",{className:"p-slackbot_responses_container__controls"},t&&x.a.createElement(Jn.a,{icon:"search",placeholder:vo.t("Search custom responses",{fallbackHash:"bce06414177f72ab70e6387b6af9f8ceef0d6049",fallbackHashNs:"enhanced_text_input"}),"data-qa":No,className:"p-slackbot_responses_container__filter",isLoading:""!==d&&!N,value:d,onChange:I}),x.a.createElement(B.f,{onClick:z,type:t?"primary":"outline","data-qa":ko,className:"p-slackbot_responses_container__button"},x.a.createElement(H.b,{type:"plus",className:"margin_right_25",inline:!0}),vo.t("Add New Response"))),v&&x.a.createElement(q.d,{className:"margin_top_150 margin_bottom_25",level:q.b.error},vo.t("Something went wrong. Please refresh the page and try again.",{fallbackHash:"cc8074c0f6c73327b5cab826d4782e0629a1c296",fallbackHashNs:"im_browser"})),x.a.createElement(V.a,{headers:D,rows:R,height:T,onRequestNextPage:A,isLoading:h,ref:M,"data-qa":yo}),x.a.createElement(F.a,null))};Co.displayName="SlackbotResponsesContainer";var xo=Object(O.a)((function(e){return{experimentSlackbotFilterAutoResponseGroupTreatment:"treatment"===Object(Rt.d)(e,"slackbot_filter_auto_response"),slackbotResponses:Object(Xn.g)(e),isAdmin:Object(Ye.jb)(e,Object($e.c)(e)),slackbotResponsesOnlyAdmins:Object(Ha.a)(e,"slackbot_responses_only_admins")}}),(function(e){return{fetchAndUpsertSlackbotResponses:function(){return e(Xn.e.apply(void 0,arguments))},fetchSlackbotResponsesNextPage:function(){return e(Xn.f.apply(void 0,arguments))},openModal:function(t){return e(Object(R.openModal)(t))},enqueueToast:function(t){var a=t.element;return e(Object(ae.enqueueToast)({element:a}))}}}))(Co);Object(r.a)({CustomizeEmojiWrapper:Nt,CustomizeStatuses:hn,ChannelPrefixesContainer:Ua,ModalContainer:gn.a,CustomizeWelcomePlaceToggle:Nn,CustomizeWelcomeChannel:Dn,CustomizeWelcomeMessage:Gn,SlackbotResponsesContainer:xo}),o.a.setAppElement("#page")},sl22:function(e,t,a){}},[["rGd3","webpack.manifest","modern.vendor"]]]);