(window.webpackJsonp=window.webpackJsonp||[]).push([["rollup-core_required_ts"],{"0MN+":function(e,t){!function(){TS.registerModule("ui",{window_focus_changed_sig:new signals.Signal,window_unloaded_sig:new signals.Signal,onStart:function(){$(window).bind("focus",TS.ui.onWindowFocus),$(window).bind("blur",TS.ui.onWindowBlur),$("html").bind("mousedown",(function(){TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Mousedown while !is_window_focused"),TS.ui.onWindowFocus({target:window})})),!(!document.hasFocus||!document.hasFocus())?TS.ui.onWindowFocus({target:window}):TS.ui.onWindowBlur({target:window}),TS.model.win_ssb_version&&$("body").addClass("desktop"),t()},setUpWindowUnloadHandlers:function(){void 0!==window.addEventListener?window.addEventListener("beforeunload",TS.ui.onWindowUnload,!1):void 0!==document.addEventListener?document.addEventListener("beforeunload",TS.ui.onWindowUnload,!1):void 0!==window.attachEvent?window.attachEvent("onbeforeunload",TS.ui.onWindowUnload):"function"==typeof window.onbeforeunload?window.onbeforeunload=function(){return TS.ui.onWindowUnload(),!1}:window.onbeforeunload=TS.ui.onWindowUnload},onWindowUnload:function(){TS.model.window_unloading=!0,TS.ui.window_unloaded_sig.dispatch(),TS.redux.dispatch(TS.interop.redux.models.window.setUnloading(!0))},handleDraghoverstartFromWinSSB:function(){TS.ui.file_share.handleDraghoverstartFromWinSSB()},handleDraghoverendFromWinSSB:function(){TS.ui.file_share.handleDraghoverendFromWinSSB()},handleDropFromWinSSB:function(e){TS.ui.file_share.handleDropFromWinSSB(e)},teamSelectionChanged:function(){if(window.desktop&&window.desktop.reduxHelper&&_.isFunction(window.desktop.reduxHelper.isSelectedTeam)&&!TS.interop.environment.isSSBAndAtLeastVersion("3.2.0")){var e=window.desktop.reduxHelper.isSelectedTeam();TS.interop.console.info("FOCUS-EVENT","Team selection changed ("+e+")"),e?n():o()}},onWindowFocus:function(e){e.target!==window&&e.target!==document||(TS.model.ui.is_window_focused||TS.interop.console.info("FOCUS-EVENT","Window focused"),n())},onWindowBlur:function(e){e.target!==window&&e.target!==document||(TS.model.ui.is_window_focused&&TS.interop.console.info("FOCUS-EVENT","Window blurred"),o())},needToShowAtChannelWarning:function(){return!1},needToBlockAtChannelKeyword:function(e,t,n){return TS.interop.rules.channels.checkForBlockedAtChannelKeyword(n,TS.interop.texty.getBroadcastKeywordsFromContents(TS.interop.texty.convertContentsStringToContents(e,{highlightWords:TS.interop.prefs.getHighlightWords(),shouldRenderEmojiAsText:TS.interop.rules.emoji.shouldRenderEmojiAsText(),emojiNames:TS.emoji.legacyGetEmojiNames(),useSonicEmoji:TS.boot_data.feature_sonic_emoji,locale:TS.interop.i18n.locale})))},startButtonSpinner:function(t){TS.ui.resetButtonSpinner(t);var n=e(t);n.isLoading()||n.start()},stopButtonSpinner:function(t,n){var o=e(t);if(o.isLoading()&&(o.stop(),n)){var a=$(t).find(".ladda-label").text();$(t).data("original_text",a),$(t).removeClass("").addClass("btn_success").find(".ladda-label").html('<i class="ts_icon ts_icon_check_circle_o small_right_margin"></i>'+TS.interop.i18n.t("Saved","ui")())}},resetButtonSpinner:function(t){if(!e(t).isLoading()){var n=$(t).data("original_text");n&&($(t).find(".ladda-label").text(n),$(t).removeData("original_text"),$(t).removeClass("btn_success").addClass(""))}},showVersionInfo:function(){var e="version_info",t=new Date(1e3*TS.boot_data.version_ts)+" (<b>"+TS.boot_data.version_ts+"</b>)";TS.generic_dialog.start({title:TS.interop.i18n.t("Version Info","ui")(),unique:e,body:TS.interop.i18n.t('<p>This version: {version_num}</p><p class="latest_version checking">Checking for updates&hellip;</p>',"ui")({version_num:TS.interop.i18n.safeString(t)}),show_cancel_button:!1,go_button_class:"btn_outline",go_button_text:TS.interop.i18n.t("Close","ui")(),show_secondary_go_button:!1,onSecondaryGo:function(){TS.reload(!1,"TS.ui.showVersionsInfo dialog")}}),TS.interop.api.callExpedited("test.versionInfo").then((function(t){if(TS.generic_dialog.is_showing&&TS.generic_dialog.current_setting.unique==e){var n=TS.generic_dialog.div.find(".latest_version");if(n.removeClass("checking"),t.data.version_ts.toString()==TS.boot_data.version_ts.toString())n.html(TS.interop.i18n.t("Your copy of Slack is up-to-date! {tada_emoji}","ui")({tada_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":tada:"))}));else TS.generic_dialog.div.find(".btn.dialog_secondary_go").removeClass("hidden").text("Update"),t.data.min_version_ts>TS.boot_data.version_ts?n.html(TS.interop.i18n.t("An important new version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))})):n.html(TS.interop.i18n.t("A newer version of Slack is available. {sparkles_emoji}","ui")({sparkles_emoji:TS.interop.i18n.safeString(TS.emoji.graphicReplace(":sparkles:"))}))}})).catch(_.noop)},setThemeClasses:function(){if($("body").removeClass("dense_theme light_theme"),"dense"===TS.prefs.getPref("theme"))$("body").addClass("dense_theme");else{if("light"!==TS.prefs.getPref("theme"))return void TS.error("no theme?");$("body").addClass("light_theme")}TS.prefs.getPref("avatars")?$("body").removeClass("no_avatars"):$("body").addClass("no_avatars")}});var e=function(e){var t=$(e).data("ladda");return t||(t=Ladda.create(e),$(e).data("ladda",t)),t},t=function(){$("body").on("click.plastic_date",'input[type="text"][data-plastic-type="date"]',(function(e){var t=$(e.target);if(t.pickmeup){var n=!!t.closest("#fs_modal").length||$(this).data("flat");if(t.pickmeup({flat:n,first_day:window.moment.localeData().firstDayOfWeek()||0,hide_on_select:!0,min:$(this).data("min")||null,max:$(this).data("max")||null,format:$(this).data("format")||"Y-m-d",class_name:"plastic_date_picker",hide:function(){t.trigger("input")},title_format:"ja-JP"===TS.interop.i18n.locale?"Y\u5e74B":"B Y",locale:{days:window.moment.weekdays(),daysShort:window.moment.weekdaysShort(),daysMin:window.moment.weekdaysMin(),months:window.moment.months(),monthsShort:window.moment.monthsShort()}}).pickmeup("show"),n){var o=t.data("picker");o||(o=$('<div class="position_relative no_margin no_padding"></div>'),t.data("picker",o)),t.after(o.append(t.find(".pickmeup").detach()))}}})).on("keydown.plastic_date",'input[type="text"][data-plastic-type="date"]',(function(e){var t=$(e.target);t.pickmeup&&window.document.activeElement===e.target&&t.pickmeup("hide")}))},n=function(){TS.interop.redux.models.window.isWindowFocused(TS.redux.getState())||(TS.model.shift_key_pressed=!1,TS.model.insert_key_pressed=!1,TS.model.ui.is_window_focused=!0,TS.ui.window_focus_changed_sig.dispatch(!0),TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(!0)))},o=function(){!1!==TS.interop.redux.models.window.isWindowFocused(TS.redux.getState())&&(TS.model.shift_key_pressed=!1,TS.model.insert_key_pressed=!1,TS.model.ui.is_window_focused=!1,TS.ui.window_focus_changed_sig.dispatch(!1),TS.redux.dispatch(TS.interop.redux.models.window.updateFocus(!1)))}}()},"7pQh":function(e,t,n){var o=n("lSNA"),a=n("cDf5");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){TS.registerModule("emoji",{onStart:function(){g.forEach((function(e){TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(e.emoji_names)}));S=TS.utility.throttleFunc(S,3e3,true),window._&&(w=_.debounce(w,3e3,{leading:!1,trailing:true}))},isValidName:function(e){return!!e&&(e=TS.emoji.stripWrappingColons(e).toLowerCase(),TS.boot_data.feature_sonic_emoji?!!TS.interop.emoji.isValidEmojiText(e)&&e:void 0!==i[e]&&e)},isEmojiNameSafe:function(e){if(TS.boot_data.feature_sonic_emoji)return TS.interop.rules.emoji.isEmojiNameSafe(e);var t=TS.emoji.legacyGetColonsRx();if(!t||!t.source)return!1;var n=":"+e+":";return new RegExp("^"+t.source+"$").test(n)},substringMatchesName:function(e,t){if(!TS.boot_data.feature_sonic_emoji){if(!(e&&t&&_.isString(e)&&_.isString(t)))return!1;if("::"===t)return!1;var n=":"===t.charAt(0),o=":"===t.slice(-1);return!(t=TS.emoji.stripWrappingColons(t.toLowerCase()))||(n&&o?t===e:n?e.slice(0,t.length)===t:o?e.slice(-1*t.length)===t:!!(-1!==e.indexOf(t)))}},emojiMatchesTerm:function(e,t,n){if(!TS.boot_data.feature_sonic_emoji){if(!e||!t)return!1;var o=TS.emoji.nameToBaseName(e.display_name||e.name);if(o=TS.interop.i18n.deburr(o),t=TS.emoji.normalizeSearchTerm(t),TS.emoji.substringMatchesName(o,t))return!0;var a=TS.interop.i18n.deburr(e.display_names||e.names);e.display_names&&e.display_names!==e.names&&(a+=" "+e.names);for(var i=a.split(" "),r=0;r<i.length;r+=1)if(TS.emoji.substringMatchesName(TS.emoji.nameToBaseName(i[r]),t))return!0;return-1!==_.indexOf(n,o)}},normalizeSearchTerm:function(e){if(e&&_.isString(e))return e=e.toLowerCase(),e=(e=TS.interop.i18n.deburr(e)).replace(/['\u02bc\u2019]/g,"'")},nameToBaseName:function(e){return _.isString(e)?(e=TS.emoji.stripLocalizedSkinTone(e),e=TS.emoji.stripWrappingColons(e)):""},stripLocalizedSkinTone:function(e){var t=/::skin-tone-[2-6]:/g;if(e=e.replace(t,":"),TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var n=TS.emoji.getLocalSkinToneName();t=new RegExp("::"+n+"-[2-6]:","g")}return e=e.replace(t,":")},stripWrappingColons:function(e){return e?":"===(e="string"==typeof e?e:""+e)[0]?":"===e[e.length-1]?e.slice(1,e.length-1):e.slice(1,e.length):":"===e[e.length-1]?e.slice(0,e.length-1):e:""},nameToCanonicalName:function(e){if(!(e=TS.emoji.stripWrappingColons(e)))return"";if(e=String(e).toLowerCase(),TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.getCanonicalEmojiName(e)||e;var t,n=2!=(t=e.split("::")).length?"":(e=t[0],"::"+t[1]);return(d()[e]||e)+n},emojiHasAliases:function(e){if(!TS.boot_data.feature_sonic_emoji)return-1!==e.names.indexOf(" ")},addCustomEmoji:function(e,t,n){TS.boot_data.feature_sonic_emoji||b(e,t,n)},removeCustomEmoji:function(e,t){TS.boot_data.feature_sonic_emoji||b(e,undefined,t)},renameCustomEmoji:function(e,t,n,o){TS.boot_data.feature_sonic_emoji||(TS.emoji.removeCustomEmoji(e,o),TS.emoji.addCustomEmoji(t,n,o))},ingestCustoms:function(e){if(!TS.boot_data.feature_sonic_emoji){var t,n;TS.model.all_custom_emoji.length=0,TS.model.emoji_complex_customs={},s={};var i=[];_.forOwn(p.data,(function(e){i.push.apply(i,e[3])})),_.forOwn(e,(function(e,t){if("object"===a(e))TS.model.emoji_complex_customs[t]=e,p.data[t]=[[],null,null,[t],null,null,null,e.apple],p.map.colons[t]=t,TS.model.all_custom_emoji.push(t);else{if(0===e.indexOf("alias:"))return;if(r(t))return void TS.error("can't ingest custom emoji :"+t+": because that already exists");if(!TS.emoji.isEmojiNameSafe(t))return void TS.error("can't ingest custom emoji :"+t+": because it's invalid");p.data[t]=[[],null,null,[t],null,null,null,e],p.map.colons[t]=t,TS.model.all_custom_emoji.push(t)}})),_.forOwn(e,(function(e,o){if("object"!==a(e)&&0===e.indexOf("alias:"))if(r(o))TS.error("can't ingest custom emoji :"+o+": because that already exists");else if(TS.emoji.isEmojiNameSafe(o)){if(t=e.replace("alias:",""),n=p.data.hasOwnProperty(t)&&p.data[t])return n[3].push(o),void(p.map.colons[o]=t);if(t=p.map.colons.hasOwnProperty(t)&&p.map.colons[t],n=p.data.hasOwnProperty(t)&&p.data[t])return n[3].push(o),void(p.map.colons[o]=t);TS.boot_data&&TS.boot_data.feature_tinyspeck&&TS.warn('alias for "'+o+'":"'+e+'" not recognized')}else TS.error("can't ingest custom emoji :"+o+": because it's invalid")})),TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.forOwn(e,(function(e,t){var n;n=t,TS.emoji.maybeGetCanonicalEmojiName(n)!==n&&(s[t]=!0)})),TS.model.all_custom_emoji=TS.model.all_custom_emoji.sort(),p&&p.inits&&(delete p.inits.emoticons,p.init_emoticons()),o=m()}function r(e){return p.map.colons.hasOwnProperty(e)||i.indexOf(e)>=0}},bootEmoji:function(){return n=n?n.finally(TS.emoji.setUpEmoji):TS.emoji.setUpEmoji()},setUpEmoji:function(){return TS.boot_data.feature_sonic_emoji?TS.interop.utility.makeSafeForTimeout(TS.redux.dispatch(TS.interop.redux.actions.loadEmoji())):new Promise((function(e){if(!p)return TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji, there was nothing to do"),e();var t=function(){p.buildKeywordIndex(),T(),TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Done setting up emoji"),e()};if(h(),!TS.boot_data.page_needs_custom_emoji)return t();if(!TS.boot_data.page_needs_custom_emoji_fresh){var n=TS.storage.fetchCustomEmoji();if("calls"!==TS.boot_data.app||TS.model.emoji_cache_ts||(TS.model.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts")),n&&TS.model.emoji_cache_ts==n.cache_ts)return TS.model.did_we_load_with_emoji_cache=!0,TS.emoji.ingestCustoms(n.data),t()}TS.boot_data.feature_tinyspeck&&TS.log(250,"BOOT: Fetching emoji list before setting up emoji");var o=function(e,n){if(!e||!n.emoji)return t();TS.model.emoji_cache_ts=n.cache_ts,TS.storage.storeCustomEmoji({data:n.emoji,cache_ts:TS.model.emoji_cache_ts}),TS.boot_data.feature_fix_custom_emoji_errors&&h(),TS.emoji.ingestCustoms(n.emoji),t()};TS.interop.api.call("emoji.list",{include_complex_values:1}).then((function(e){var t=e.data,n=e.args,a=e.request_id;return o(!0,t),{data:t,args:n,request_id:a}})).catch((function(e){var t=e.data,n=e.args,a=e.request_id;return o(!1,t),{data:t,args:n,request_id:a}}))}))},resetUpEmoji:function(){TS.storage.storeCustomEmoji(""),S()},maybeRemakeMenuListsIfFrequentsChanged:function(){if(!TS.boot_data.feature_sonic_emoji){var t=l();TS.utility.areSimpleObjectsEqual(t,e,"maybemakeMenuLists")||c(t)}},replaceFrecentlyUsed:function(){if(!TS.boot_data.feature_sonic_emoji){var e=x();e.length&&(_.isEqual(e,t)||(c(e),t=e))}},makeMenuLists:function(){if(!TS.boot_data.feature_sonic_emoji){TS.model.emoji_groups.length=0,TS.model.emoji_names.length=0,i={};var t,n,o=_.cloneDeep(g),a=y();a&&a.length&&o.push({display_name:TS.interop.i18n.t("Custom","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_slack"></i></span>',tab_icon:"ts_icon_slack",tab_icon_name:"slack",name:"slack",emoji_names:a}),e=l(),o.unshift({name:"mine",display_name:TS.interop.i18n.t("Frequently Used","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_clock_o"></i></span>',tab_icon:"ts_icon_clock_o",tab_icon_name:"clock_o",emoji_names:e});var r=[];for(t=0;t<o.length;t+=1)r=r.concat(o[t].emoji_names);var c,d,m,S,h={};for(Object.keys(p.data).forEach((function(e){var t=p.data[e][3],n=TS.emoji.isIdxSkinToneModifiable(e);t.forEach((function(t,o,a){var r=t,s=_.compact(a);s.length!==a.length&&TS.error('Emoji "'+t+'" contains bad record(s) in "names" prop'),TS.model.emoji_names.push(t),i[t]=!0,TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(r=TS.emoji.maybeGetLocalizedEmojiName(t),s=a.map((function(e){return TS.emoji.maybeGetLocalizedEmojiName(e)}))),h[t]={html:TS.emoji.graphicReplace(":"+t+":"),name:":"+t+":",names:":"+a.join(": :")+":",display_name:":"+r+":",display_names:":"+s.join(": :")+":"},TS.model.emoji_map.push({id:"E"+e+(o>0?"_alias_"+o:""),name:t,name_with_colons:":"+t+":",display_name:r,is_skin:n,is_emoji:!0}),n&&(h[t].is_skin=!0,h[t].skin_tone_id="1",p.skin_tones.forEach((function(n){if(u(e,n)){var o=p.data[n][3][0],l=t+"::"+o;TS.model.emoji_names.push(l),i[l]=!0;var _=":"+l+":",c=a.map((function(e){return e+"::"+o})),d=_,m=c;if(TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE){var f=TS.emoji.maybeGetLocalizedEmojiName(o);d=":"+r+"::"+f+":",m=s.map((function(e){return e+"::"+f}))}h[l]={is_skin:!0,skin_tone_id:o.substr(-1,1),html:TS.emoji.graphicReplace(_),name:_,names:":"+c.join(": :")+":",display_name:d,display_names:":"+m.join(": :")+":"}}})))}))})),f=h,TS.model.emoji_map=_.uniqBy(TS.model.emoji_map,"id"),TS.boot_data.feature_emoji_by_id&&(TS.model.emoji_map_by_id=_.keyBy(TS.model.emoji_map,"id")),t=0;t<r.length;t+=1){var T=r[t];h[T]||TS.info(T+" not in cat_map?")}for(t=0;t<o.length;t+=1){for(d=[],m=null,S="",(c=o[t]).tab_icon_html&&(S=c.tab_icon_html),n=0;n<c.emoji_names.length;n+=1)m=h[c.emoji_names[n]],d.push(m),S||c.emoji_names[n]==c.name&&(S=m.html);m=d[0],TS.model.emoji_groups.push({name:c.name,display_name:c.display_name,tab_html:S||m.html,tab_icon:c.tab_icon,tab_icon_name:c.tab_icon_name,items:d})}var b=TS.emoji.getCurrentSheetUrl();if(k("ss_emojis")&&b){var w=new Image;w.onload=function(){w.onload=null,w.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==",w=null},w.src=b}TS.model.emoji_names.sort(),TS.emoji.friendlyReorder();var v=TS.model.emoji_names.indexOf("ok"),j=TS.model.emoji_names.indexOf("ok_hand");TS.model.emoji_names[v]="ok_hand",TS.model.emoji_names[j]="ok",TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&_.each(s,(function(e,t){var n=_.remove(TS.model.emoji_map,{name:t});TS.boot_data.feature_emoji_by_id&&n.forEach((function(e){delete TS.model.emoji_map_by_id[e.id]}))}))}},friendlyReorder:function(){if(!TS.boot_data.feature_sonic_emoji){[{filter:"th",first:"thumbsup",second:"thumbsdown"},{filter:"po",first:"point_up",second:"point_down"}].forEach((function(e){var t=_.reduce(TS.model.emoji_names,(function(t,n,o){if(0===n.indexOf(e.filter)){var a=TS.model.all_custom_emoji.indexOf(n)>-1,i=!a&&0===n.indexOf(e.first),r=!a&&!i&&0===n.indexOf(e.second);t.emoji.push({name:n,is_first:i,is_second:r}),t.indexes.push(o)}return t}),{indexes:[],emoji:[]});t.emoji=_.orderBy(t.emoji,["is_first","is_second","name"],["desc","desc","asc"]),_.forEach(t.emoji,(function(e,n){var o=t.indexes[n];TS.model.emoji_names[o]=e.name}))}))}},isIdxSkinToneModifiable:function(e){if(!TS.boot_data.feature_sonic_emoji)return u(e,p.skin_tones[0])},isNameSkinToneModifiable:function(e){if(TS.boot_data.feature_sonic_emoji)return TS.interop.emoji.isEmojiNameSkinToneModifiable(e);e=TS.emoji.stripWrappingColons(e),e=String(e).toLowerCase();var t=p.map.colons[e];return TS.emoji.isIdxSkinToneModifiable(t)},renderIconFallback:function(e){return'<ts-icon class="emoji-sizer ts_icon_info_circle ts_icon_inherit" title="'+e.replace(/:/g,"")+'"></ts-icon>'},sonicGenerateEmojiHtml:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!TS.boot_data.feature_sonic_emoji)return null;var t=TS.interop.emojiComponent.mapStateToProps(e)||{},n=r(r({},e),t),o=n.displayText,a=n.url,i=n.renderAsText,s=n.iconInTextMode,l=n.className,c=n.includeTitle,d=n.includeText;if(i||!a)return s?TS.emoji.renderIconFallback(o):o;var m=["emoji","emoji-sizer",l];return TS.templates.sonic_emoji({url:a,displayText:d&&o,displayTitle:c&&TS.emoji.stripWrappingColons(o),emojiClassNames:_.compact(m).join(" ")})},sonicReplaceEmojiInString:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=TS.interop.utility.getColonsRx();return e.replace(n,(function(e){return TS.emoji.sonicGenerateEmojiHtml(r(r({},t),{},{text:e}))}))},graphicReplace:function(e,t){if(!e)return"";if(t=t||{},TS.boot_data.feature_sonic_emoji){var n=t.emojiSize;return!n&&t.jumbomoji&&(n=TS.interop.emojiComponent.EmojiSizes.LARGE),TS.emoji.sonicReplaceEmojiInString(e,{emojiSize:n,forceDisplay:t.force_img,stopAnimations:t.stop_animations,className:t.jumbomoji?"emoji-only":void 0,iconInTextMode:t.show_icon_for_emoji_in_as_text_mode&&TS.interop.emoji.isValidEmojiText(e),includeTitle:t.include_title,includeText:t.include_text})}var o=p;if(t.show_icon_for_emoji_in_as_text_mode&&TS.emoji.isValidName(e))return TS.emoji.renderIconFallback(e);o.init_env();var a=o.text_mode,i=o.include_title,r=o.include_text,s=o.supports_css,l=o.allow_skin_tone_squares;t.force_img&&t.obey_emoji_mode_pref&&(t.obey_emoji_mode_pref=!1,TS.error("obey_emoji_mode_pref now set to FALSE because options.force_img is TRUE")),t.force_style&&t.obey_emoji_mode_pref&&(t.obey_emoji_mode_pref=!1,TS.error("obey_emoji_mode_pref now set to FALSE because options.force_style is "+t.force_style)),o.text_mode=t.obey_emoji_mode_pref&&TS.interop.rules.emoji.shouldRenderEmojiAsText(),t.force_style&&(TS.emoji.setEmojiMode(t.force_style),o.use_sheet=!1),o.include_title=!!t.include_title,o.include_text=!!t.include_text,o.supports_css=!t.force_img,o.allow_skin_tone_squares=!t.no_skin_tone_squares;var _=o.replace_colons(e,{stop_animations:t.stop_animations});return t.jumbomoji&&(_=_.replace("emoji-sizer","emoji-sizer emoji-only")),t.force_style&&TS.emoji.setEmojiMode(),o.text_mode=a,o.include_title=i,o.include_text=r,o.supports_css=s,o.allow_skin_tone_squares=l,_},replaceColons:function(e){return TS.boot_data.feature_sonic_emoji?null:e.indexOf(":")<0?e:p.replace_colons(e)},maybeUnifiedReplace:function(e){return TS.boot_data.feature_sonic_emoji?TS.interop.utility.replaceTextEmojiWithNative(e):"unified"!==p.replace_mode?e:p.replace_colons_with_unified(e)},legacyReplaceEmoticons:function(e){return TS.boot_data.feature_sonic_emoji?TS.interop.utility.replaceEmoticonsWithColons(e):p.replace_emoticons_with_colons(e)},getLocalSkinToneName:function(){var e="skin-tone";return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(e=TS.boot_data.feature_sonic_emoji?TS.emoji.maybeGetLocalizedEmojiName("skin-tone"):TSFEmoji.getLocalSkinToneName(TS.interop.i18n.locale)),e},getChosenSkinTone:function(e){var t=parseInt(k("preferred_skin_tone"),10);return t&&"1"!=t&&_.includes([2,3,4,5,6],t)?(e?TS.emoji.getLocalSkinToneName():"skin-tone")+"-"+t:""},getChosenSkinToneModifier:function(e){var t=TS.emoji.getChosenSkinTone(e);return t?":"+t+":":""},setEmojiMode:function(e){if(!TS.boot_data.feature_sonic_emoji){e=e||TS.interop.rules.emoji.getEmojiMode(),p.text_mode="as_text"===e,p.do_emoticons=!!k("graphic_emoticons"),p.allow_native=!1,p.use_sheet=!!k("ss_emojis")&&!!TS.boot_data.page_needs_custom_emoji;var t=e;if("as_text"==e&&(t=TS.interop.rules.emoji.getEmojiMode({forceDisplay:!0})),p.img_set=_.includes(["google","apple"],t)?t:"apple",TS.model.emoji_complex_customs)for(var n in TS.model.emoji_complex_customs)p.data[n]&&(p.data[n][7]=TS.model.emoji_complex_customs[n][p.img_set])}},legacyGetColonsRx:function(){return TS.boot_data.feature_sonic_emoji?TS.interop.utility.getColonsRx():p&&p.rx_colons},legacyGetEmojiNames:function(){return TS.boot_data.feature_sonic_emoji?TS.interop.redux.models.emoji.getAllEmojiNames(TS.redux.getState()):_.map(TS.emoji.getEmojiMap(),"name")},getEmojiByName:function(e){if(!TS.boot_data.feature_sonic_emoji&&e)return _.find(TS.model.emoji_map,{name:e})},getEmojiById:function(e){if(!TS.boot_data.feature_sonic_emoji){if(TS.boot_data.feature_emoji_by_id)return TS.model.emoji_map_by_id[e];var t=_.find(TS.model.emoji_map,{id:e});if(t)return t;TS.warn("no emoji ob found for "+e)}},getEmojiMap:function(){if(!TS.boot_data.feature_sonic_emoji)return TS.model.emoji_map},getEmojiForSpaces:function(){var e={emoji:{}};if(TS.boot_data.feature_sonic_emoji?(e.emoticonEmojiNames=TS.interop.utility.getEmoticonMap(),e.replace=function(e){var t=TS.interop.utility.replaceNativeEmojiWithText(e);return t?TS.emoji.maybeGetCanonicalEmojiString(t):e}):(e.emoticonEmojiNames=p.emoticons_data,e.sheetSize=p.sheet_size,e.sheetPath=TS.emoji.getCurrentSheetUrl(),e.replace=function(){var e=p.colons_mode;p.colons_mode=!0;var t=p.replace_unified.apply(p,arguments);return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(t=TS.emoji.maybeGetCanonicalEmojiString(t)),p.colons_mode=e,t}),TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(e.getLocalEmojiString=function(e){return e?TS.emoji.maybeGetLocalizedEmojiName(e)||e:""}),TS.boot_data.feature_sonic_emoji){var t=TS.interop.emojiComponent.EmojiSizes.MEDIUM,n=TS.interop.rules.emoji.getEmojiMode({forceDisplay:!0});TS.emoji.legacyGetEmojiNames().forEach((function(o){var a=TS.interop.emoji.getEmojiUrl({text:o,emojiMode:n,emojiSize:t});k("a11y_animations")||(a=TS.utility.getImgProxyURLWithOptions(a,{emoji:!0})),e.emoji[o]=a}))}else Object.keys(p.data).forEach((function(t){var n,o=p.data[t],a=o[3],i=o[4],r=o[5],s=o[7];if(null!==i&&null!==r)n=[i,r];else{if(!s)return void TS.error('WTF, _emoji "'+t+'" is missing coords or and a url, or something!');n=!1===k("a11y_animations")?TS.utility.getImgProxyURLWithOptions(s,{emoji:!0}):s}a.forEach((function(t){e.emoji[t]=n}))}));return e},getCurrentSheetUrl:function(){return TS.boot_data.feature_sonic_emoji?null:p.img_sets[p.img_set].sheet},getCurrentImagePath:function(){return TS.boot_data.feature_sonic_emoji?null:p.img_sets[p.img_set].path},hasUnifiedEmoji:function(e){if(TS.boot_data.feature_sonic_emoji){if(!_.isString(e))return!1;var t=TS.interop.utility.getNativeEmojiRx();return-1!==e.search(t)}return p.init_unified(),-1!==e.search(p.rx_unified)},test:function(){return{emoji:p}},spliceSkinToneVariationsIntoAnArrayOfEmojiNames:function(e){if(!TS.boot_data.feature_sonic_emoji){var t=0;e.concat().forEach((function(n,o){var a=p.map.colons[n];p.data.hasOwnProperty(a)&&p.data[a]&&p.skin_tones.forEach((function(i){if(u(a,i)){var r=p.data[i][3][0],s=n+"::"+r;if(-1===e.indexOf(s)){var l=(t+=1)+o;e.splice(l,0,s)}}}))}))}},findByKeyword:function(e){return TS.boot_data.feature_sonic_emoji?null:p.findByKeyword(e)},getObsoletedEmojiNameFromModernEmojiName:function(e){if(!TS.boot_data.feature_sonic_emoji){if(!e)return null;var t=TS.emoji.stripWrappingColons(e),n=/(::skin-tone-[2-6])/,o=t.match(n),a=o?o[1]:"",i=t.replace(n,""),r=p.map.colons[i];if(!r)return null;var s=p.obsoletes_data[r],l=s&&s[4]&&s[4][0];return l&&l!=i?l+a:null}},maybeGetCanonicalEmojiString:function(e){return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE?TS.boot_data.feature_sonic_emoji?TS.interop.utility.emojiTranslation.convertEmojiInStringToCanonical({locale:TS.interop.i18n.locale,text:e}):TSFEmoji.translateEmojiStringToCanonical(e,TS.interop.i18n.locale,{include_emoji_5:!0}):e},maybeGetLocalizedEmojiString:function(e){return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE?TS.boot_data.feature_sonic_emoji?TS.interop.utility.emojiTranslation.convertEmojiInStringToLocalized({locale:TS.interop.i18n.locale,text:e}):TSFEmoji.translateEmojiStringToLocal(e,TS.interop.i18n.locale,{include_emoji_5:!0}):e},maybeGetLocalizedEmojiName:function(e){return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE?TS.boot_data.feature_sonic_emoji?TS.interop.utility.emojiTranslation.getLocalizedEmojiName({locale:TS.interop.i18n.locale,name:e}):TSFEmoji.getLocalEmojiString(e,TS.interop.i18n.locale,{include_emoji_5:!0}):e},maybeGetCanonicalEmojiName:function(e){return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE?TS.boot_data.feature_sonic_emoji?TS.interop.utility.emojiTranslation.getCanonicalEmojiName({locale:TS.interop.i18n.locale,name:e}):TSFEmoji.getCanonicalEmojiString(e,TS.interop.i18n.locale,{include_emoji_5:!0}):e},MISSING_EMOJI_HTML:'<span class="emoji-outer emoji-sizer emoji-bg-contain" style="background-image: url('+cdn_url+'/80588/img/emoji_missing.png);"></span>'});var e,t,n,o,i={},s={},l=function(){var e,t={};_.each(_.keys(TS.model.emoji_use),(function(n){e=TS.emoji.nameToCanonicalName(n.split("::")[0]),TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&v(e)||(t.hasOwnProperty(e)||(t[e]=0),t[e]+=TS.model.emoji_use[n])})),TS.dir(777,t,"condensed emoji names:");var n=Object.keys(t).sort((function(e,n){var o=t[e],a=t[n];if(o==a){if(e<n)return-1;if(e>n)return 1}return-(o-a)}));n.length=Math.min(n.length,36);for(var o,a=["slightly_smiling_face","heart","+1","100","bug"];n.length<5&&a.length;)o=a.shift(),-1===n.indexOf(o)&&n.push(o);return TS.emoji.spliceSkinToneVariationsIntoAnArrayOfEmojiNames(n),n},c=function(t){e=t;var n=_.find(_.get(TS.model,"emoji_groups"),{name:"mine"});n||TS.emoji.makeMenuLists();var o=[];e.forEach((function(e){var t=f[e];t&&o.push(t)})),n.items=o},d=function(){return o=o||m()},m=function(){var e,t={};return Object.keys(p.data).forEach((function(n){e=p.data[n],t[e[3][0]]=null,e[3].forEach((function(n){t.hasOwnProperty(n)||(t[n]=e[3][0])}))})),t},u=function(e,t){return!(!p.variations_data[e]||!p.variations_data[e][t])},p=emoji,f={},g=[{name:"people",display_name:TS.interop.i18n.t("People","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_happy_smile"></i></span>',tab_icon:"ts_icon_happy_smile",tab_icon_name:"happy_smile",emoji_names:["grinning","grin","joy","rolling_on_the_floor_laughing","smiley","smile","sweat_smile","laughing","wink","blush","yum","sunglasses","heart_eyes","kissing_heart","kissing","kissing_smiling_eyes","kissing_closed_eyes","relaxed","slightly_smiling_face","hugging_face","star-struck","thinking_face","face_with_raised_eyebrow","neutral_face","expressionless","no_mouth","face_with_rolling_eyes","smirk","persevere","disappointed_relieved","open_mouth","zipper_mouth_face","hushed","sleepy","tired_face","sleeping","relieved","stuck_out_tongue","stuck_out_tongue_winking_eye","stuck_out_tongue_closed_eyes","drooling_face","unamused","sweat","pensive","confused","upside_down_face","money_mouth_face","astonished","white_frowning_face","slightly_frowning_face","confounded","disappointed","worried","triumph","cry","sob","frowning","anguished","fearful","weary","exploding_head","grimacing","cold_sweat","scream","flushed","zany_face","dizzy_face","rage","angry","face_with_symbols_on_mouth","mask","face_with_thermometer","face_with_head_bandage","nauseated_face","face_vomiting","sneezing_face","innocent","face_with_cowboy_hat","clown_face","lying_face","shushing_face","face_with_hand_over_mouth","face_with_monocle","nerd_face","smiling_imp","imp","japanese_ogre","japanese_goblin","skull","skull_and_crossbones","ghost","alien","space_invader","robot_face","hankey","smiley_cat","smile_cat","joy_cat","heart_eyes_cat","smirk_cat","kissing_cat","scream_cat","crying_cat_face","pouting_cat","see_no_evil","hear_no_evil","speak_no_evil","baby","child","boy","girl","adult","man","woman","older_adult","older_man","older_woman","male-doctor","female-doctor","male-student","female-student","male-teacher","female-teacher","male-judge","female-judge","male-farmer","female-farmer","male-cook","female-cook","male-mechanic","female-mechanic","male-factory-worker","female-factory-worker","male-office-worker","female-office-worker","male-scientist","female-scientist","male-technologist","female-technologist","male-singer","female-singer","male-artist","female-artist","male-pilot","female-pilot","male-astronaut","female-astronaut","male-firefighter","female-firefighter","male-police-officer","female-police-officer","male-detective","female-detective","male-guard","female-guard","male-construction-worker","female-construction-worker","prince","princess","man-wearing-turban","woman-wearing-turban","man_with_gua_pi_mao","person_with_headscarf","bearded_person","blond-haired-man","blond-haired-woman","man_in_tuxedo","bride_with_veil","pregnant_woman","breast-feeding","angel","santa","mrs_claus","female_mage","male_mage","female_fairy","male_fairy","female_vampire","male_vampire","mermaid","merman","female_elf","male_elf","female_genie","male_genie","female_zombie","male_zombie","man-frowning","woman-frowning","man-pouting","woman-pouting","man-gesturing-no","woman-gesturing-no","man-gesturing-ok","woman-gesturing-ok","man-tipping-hand","woman-tipping-hand","man-raising-hand","woman-raising-hand","man-bowing","woman-bowing","face_palm","man-facepalming","woman-facepalming","shrug","man-shrugging","woman-shrugging","man-getting-massage","woman-getting-massage","man-getting-haircut","woman-getting-haircut","man-walking","woman-walking","man-running","woman-running","dancer","man_dancing","man-with-bunny-ears-partying","woman-with-bunny-ears-partying","woman_in_steamy_room","man_in_steamy_room","woman_climbing","man_climbing","woman_in_lotus_position","man_in_lotus_position","bath","sleeping_accommodation","man_in_business_suit_levitating","speaking_head_in_silhouette","bust_in_silhouette","busts_in_silhouette","fencer","horse_racing","skier","snowboarder","man-golfing","woman-golfing","man-surfing","woman-surfing","man-rowing-boat","woman-rowing-boat","man-swimming","woman-swimming","man-bouncing-ball","woman-bouncing-ball","man-lifting-weights","woman-lifting-weights","man-biking","woman-biking","man-mountain-biking","woman-mountain-biking","racing_car","racing_motorcycle","person_doing_cartwheel","man-cartwheeling","woman-cartwheeling","wrestlers","man-wrestling","woman-wrestling","water_polo","man-playing-water-polo","woman-playing-water-polo","handball","man-playing-handball","woman-playing-handball","juggling","man-juggling","woman-juggling","couple","two_men_holding_hands","two_women_holding_hands","woman-kiss-man","man-kiss-man","woman-kiss-woman","woman-heart-man","man-heart-man","woman-heart-woman","man-woman-boy","man-woman-girl","man-woman-girl-boy","man-woman-boy-boy","man-woman-girl-girl","man-man-boy","man-man-girl","man-man-girl-boy","man-man-boy-boy","man-man-girl-girl","woman-woman-boy","woman-woman-girl","woman-woman-girl-boy","woman-woman-boy-boy","woman-woman-girl-girl","man-boy","man-boy-boy","man-girl","man-girl-boy","man-girl-girl","woman-boy","woman-boy-boy","woman-girl","woman-girl-boy","woman-girl-girl","selfie","muscle","point_left","point_right","point_up","point_up_2","middle_finger","point_down","v","crossed_fingers","spock-hand","the_horns","call_me_hand","raised_hand_with_fingers_splayed","hand","ok_hand","+1","-1","fist","facepunch","left-facing_fist","right-facing_fist","raised_back_of_hand","wave","i_love_you_hand_sign","writing_hand","clap","open_hands","raised_hands","palms_up_together","pray","handshake","nail_care","ear","nose","footprints","eyes","eye","eye-in-speech-bubble","brain","tongue","lips","kiss","cupid","heart","heartbeat","broken_heart","two_hearts","sparkling_heart","heartpulse","blue_heart","green_heart","yellow_heart","orange_heart","purple_heart","black_heart","gift_heart","revolving_hearts","heart_decoration","heavy_heart_exclamation_mark_ornament","love_letter","zzz","anger","bomb","boom","sweat_drops","dash","dizzy","speech_balloon","left_speech_bubble","right_anger_bubble","thought_balloon","hole","eyeglasses","dark_sunglasses","necktie","shirt","jeans","scarf","gloves","coat","socks","dress","kimono","bikini","womans_clothes","purse","handbag","pouch","shopping_bags","school_satchel","mans_shoe","athletic_shoe","high_heel","sandal","boot","crown","womans_hat","tophat","mortar_board","billed_cap","helmet_with_white_cross","prayer_beads","lipstick","ring","gem"]},{name:"nature",display_name:TS.interop.i18n.t("Nature","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_nature"></i></span>',tab_icon:"ts_icon_emoji_nature",tab_icon_name:"emoji_nature",emoji_names:["monkey_face","monkey","gorilla","dog","dog2","poodle","wolf","fox_face","cat","cat2","lion_face","tiger","tiger2","leopard","horse","racehorse","unicorn_face","zebra_face","deer","cow","ox","water_buffalo","cow2","pig","pig2","boar","pig_nose","ram","sheep","goat","dromedary_camel","camel","giraffe_face","elephant","rhinoceros","mouse","mouse2","rat","hamster","rabbit","rabbit2","chipmunk","hedgehog","bat","bear","koala","panda_face","feet","turkey","chicken","rooster","hatching_chick","baby_chick","hatched_chick","bird","penguin","dove_of_peace","eagle","duck","owl","frog","crocodile","turtle","lizard","snake","dragon_face","dragon","sauropod","t-rex","whale","whale2","dolphin","fish","tropical_fish","blowfish","shark","octopus","shell","crab","shrimp","squid","snail","butterfly","bug","ant","bee","beetle","cricket","spider","spider_web","scorpion","bouquet","cherry_blossom","white_flower","rosette","rose","wilted_flower","hibiscus","sunflower","blossom","tulip","seedling","evergreen_tree","deciduous_tree","palm_tree","cactus","ear_of_rice","herb","shamrock","four_leaf_clover","maple_leaf","fallen_leaf","leaves"]},{name:"food_and_drink",display_name:TS.interop.i18n.t("Food & Drink","client")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_food"></i></span>',tab_icon:"ts_icon_emoji_food",tab_icon_name:"emoji_food",emoji_names:["grapes","melon","watermelon","tangerine","lemon","banana","pineapple","apple","green_apple","pear","peach","cherries","strawberry","kiwifruit","tomato","coconut","avocado","eggplant","potato","carrot","corn","hot_pepper","cucumber","broccoli","mushroom","peanuts","chestnut","bread","croissant","baguette_bread","pretzel","pancakes","cheese_wedge","meat_on_bone","poultry_leg","cut_of_meat","bacon","hamburger","fries","pizza","hotdog","sandwich","taco","burrito","stuffed_flatbread","egg","fried_egg","shallow_pan_of_food","stew","bowl_with_spoon","green_salad","popcorn","canned_food","bento","rice_cracker","rice_ball","rice","curry","ramen","spaghetti","sweet_potato","oden","sushi","fried_shrimp","fish_cake","dango","dumpling","fortune_cookie","takeout_box","icecream","shaved_ice","ice_cream","doughnut","cookie","birthday","cake","pie","chocolate_bar","candy","lollipop","custard","honey_pot","baby_bottle","glass_of_milk","coffee","tea","sake","champagne","wine_glass","cocktail","tropical_drink","beer","beers","clinking_glasses","tumbler_glass","cup_with_straw","chopsticks","knife_fork_plate","fork_and_knife","spoon","hocho","amphora"]},{name:"activity",display_name:TS.interop.i18n.t("Activity","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_activities"></i></span>',tab_icon:"ts_icon_emoji_activities",tab_icon_name:"emoji_activities",emoji_names:["jack_o_lantern","christmas_tree","fireworks","sparkler","sparkles","balloon","tada","confetti_ball","tanabata_tree","bamboo","dolls","flags","wind_chime","rice_scene","ribbon","gift","reminder_ribbon","admission_tickets","ticket","medal","trophy","sports_medal","first_place_medal","second_place_medal","third_place_medal","soccer","baseball","basketball","volleyball","football","rugby_football","tennis","8ball","bowling","cricket_bat_and_ball","field_hockey_stick_and_ball","ice_hockey_stick_and_puck","table_tennis_paddle_and_ball","badminton_racquet_and_shuttlecock","boxing_glove","martial_arts_uniform","goal_net","dart","golf","ice_skate","fishing_pole_and_fish","running_shirt_with_sash","ski","sled","curling_stone","video_game","joystick","game_die","spades","hearts","diamonds","clubs","black_joker","mahjong","flower_playing_cards"]},{name:"travel_and_places",display_name:TS.interop.i18n.t("Travel & Places","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_emoji_travel"></i></span>',tab_icon:"ts_icon_emoji_travel",tab_icon_name:"emoji_travel",emoji_names:["earth_africa","earth_americas","earth_asia","globe_with_meridians","world_map","japan","snow_capped_mountain","mountain","volcano","mount_fuji","camping","beach_with_umbrella","desert","desert_island","national_park","stadium","classical_building","building_construction","house_buildings","cityscape","derelict_house_building","house","house_with_garden","office","post_office","european_post_office","hospital","bank","hotel","love_hotel","convenience_store","school","department_store","factory","japanese_castle","european_castle","wedding","tokyo_tower","statue_of_liberty","church","mosque","synagogue","shinto_shrine","kaaba","fountain","tent","foggy","night_with_stars","sunrise_over_mountains","sunrise","city_sunset","city_sunrise","bridge_at_night","hotsprings","milky_way","carousel_horse","ferris_wheel","roller_coaster","barber","circus_tent","performing_arts","frame_with_picture","art","slot_machine","steam_locomotive","railway_car","bullettrain_side","bullettrain_front","train2","metro","light_rail","station","tram","monorail","mountain_railway","train","bus","oncoming_bus","trolleybus","minibus","ambulance","fire_engine","police_car","oncoming_police_car","taxi","oncoming_taxi","car","oncoming_automobile","blue_car","truck","articulated_lorry","tractor","bike","scooter","motor_scooter","busstop","motorway","railway_track","fuelpump","rotating_light","traffic_light","vertical_traffic_light","construction","octagonal_sign","anchor","boat","canoe","speedboat","passenger_ship","ferry","motor_boat","ship","airplane","small_airplane","airplane_departure","airplane_arriving","seat","helicopter","suspension_railway","mountain_cableway","aerial_tramway","satellite","rocket","flying_saucer","bellhop_bell","door","bed","couch_and_lamp","toilet","shower","bathtub","hourglass","hourglass_flowing_sand","watch","alarm_clock","stopwatch","timer_clock","mantelpiece_clock","clock12","clock1230","clock1","clock130","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","clock10","clock1030","clock11","clock1130","new_moon","waxing_crescent_moon","first_quarter_moon","moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","crescent_moon","new_moon_with_face","first_quarter_moon_with_face","last_quarter_moon_with_face","thermometer","sunny","full_moon_with_face","sun_with_face","star","star2","stars","cloud","partly_sunny","thunder_cloud_and_rain","mostly_sunny","barely_sunny","partly_sunny_rain","rain_cloud","snow_cloud","lightning","tornado","fog","wind_blowing_face","cyclone","rainbow","closed_umbrella","umbrella","umbrella_with_rain_drops","umbrella_on_ground","zap","snowflake","snowman","snowman_without_snow","comet","fire","droplet","ocean"]},{name:"objects",display_name:TS.interop.i18n.t("Objects","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_lightbulb_o"></i></span>',tab_icon:"ts_icon_lightbulb_o",tab_icon_name:"lightbulb_o",emoji_names:["mute","speaker","sound","loud_sound","loudspeaker","mega","postal_horn","bell","no_bell","musical_score","musical_note","notes","studio_microphone","level_slider","control_knobs","microphone","headphones","radio","saxophone","guitar","musical_keyboard","trumpet","violin","drum_with_drumsticks","iphone","calling","phone","telephone_receiver","pager","fax","battery","electric_plug","computer","desktop_computer","printer","keyboard","three_button_mouse","trackball","minidisc","floppy_disk","cd","dvd","movie_camera","film_frames","film_projector","clapper","tv","camera","camera_with_flash","video_camera","vhs","mag","mag_right","microscope","telescope","satellite_antenna","candle","bulb","flashlight","izakaya_lantern","notebook_with_decorative_cover","closed_book","book","green_book","blue_book","orange_book","books","notebook","ledger","page_with_curl","scroll","page_facing_up","newspaper","rolled_up_newspaper","bookmark_tabs","bookmark","label","moneybag","yen","dollar","euro","pound","money_with_wings","credit_card","chart","currency_exchange","heavy_dollar_sign","email","e-mail","incoming_envelope","envelope_with_arrow","outbox_tray","inbox_tray","package","mailbox","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","postbox","ballot_box_with_ballot","pencil2","black_nib","lower_left_fountain_pen","lower_left_ballpoint_pen","lower_left_paintbrush","lower_left_crayon","memo","briefcase","file_folder","open_file_folder","card_index_dividers","date","calendar","spiral_note_pad","spiral_calendar_pad","card_index","chart_with_upwards_trend","chart_with_downwards_trend","bar_chart","clipboard","pushpin","round_pushpin","paperclip","linked_paperclips","straight_ruler","triangular_ruler","scissors","card_file_box","file_cabinet","wastebasket","lock","unlock","lock_with_ink_pen","closed_lock_with_key","key","old_key","hammer","pick","hammer_and_pick","hammer_and_wrench","dagger_knife","crossed_swords","gun","bow_and_arrow","shield","wrench","nut_and_bolt","gear","compression","alembic","scales","link","chains","syringe","pill","smoking","coffin","funeral_urn","moyai","oil_drum","crystal_ball","shopping_trolley"]},{name:"symbols",display_name:TS.interop.i18n.t("Symbols","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_heart_o"></i></span>',tab_icon:"ts_icon_heart_o",tab_icon_name:"heart_o",emoji_names:["atm","put_litter_in_its_place","potable_water","wheelchair","mens","womens","restroom","baby_symbol","wc","passport_control","customs","baggage_claim","left_luggage","warning","children_crossing","no_entry","no_entry_sign","no_bicycles","no_smoking","do_not_litter","non-potable_water","no_pedestrians","no_mobile_phones","underage","radioactive_sign","biohazard_sign","arrow_up","arrow_upper_right","arrow_right","arrow_lower_right","arrow_down","arrow_lower_left","arrow_left","arrow_upper_left","arrow_up_down","left_right_arrow","leftwards_arrow_with_hook","arrow_right_hook","arrow_heading_up","arrow_heading_down","arrows_clockwise","arrows_counterclockwise","back","end","on","soon","top","place_of_worship","atom_symbol","om_symbol","star_of_david","wheel_of_dharma","yin_yang","latin_cross","orthodox_cross","star_and_crescent","peace_symbol","menorah_with_nine_branches","six_pointed_star","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","twisted_rightwards_arrows","repeat","repeat_one","arrow_forward","fast_forward","black_right_pointing_double_triangle_with_vertical_bar","black_right_pointing_triangle_with_double_vertical_bar","arrow_backward","rewind","black_left_pointing_double_triangle_with_vertical_bar","arrow_up_small","arrow_double_up","arrow_down_small","arrow_double_down","double_vertical_bar","black_square_for_stop","black_circle_for_record","eject","cinema","low_brightness","high_brightness","signal_strength","vibration_mode","mobile_phone_off","female_sign","male_sign","medical_symbol","recycle","fleur_de_lis","trident","name_badge","beginner","o","white_check_mark","ballot_box_with_check","heavy_check_mark","heavy_multiplication_x","x","negative_squared_cross_mark","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","curly_loop","loop","part_alternation_mark","eight_spoked_asterisk","eight_pointed_black_star","sparkle","bangbang","interrobang","question","grey_question","grey_exclamation","exclamation","wavy_dash","copyright","registered","tm","hash","keycap_star","zero","one","two","three","four","five","six","seven","eight","nine","keycap_ten","100","capital_abcd","abcd","1234","symbols","abc","a","ab","b","cl","cool","free","information_source","id","m","new","ng","o2","ok","parking","sos","up","vs","koko","sa","u6708","u6709","u6307","ideograph_advantage","u5272","u7121","u7981","accept","u7533","u5408","u7a7a","congratulations","secret","u55b6","u6e80","black_small_square","white_small_square","white_medium_square","black_medium_square","white_medium_small_square","black_medium_small_square","black_large_square","white_large_square","large_orange_diamond","large_blue_diamond","small_orange_diamond","small_blue_diamond","small_red_triangle","small_red_triangle_down","diamond_shape_with_a_dot_inside","radio_button","black_square_button","white_square_button","white_circle","black_circle","red_circle","large_blue_circle"]},{name:"flags",display_name:TS.interop.i18n.t("Flags","emoji")(),tab_icon_html:'<span class="emoji-sizer"><i class="ts_icon ts_icon_flag"></i></span>',tab_icon:"ts_icon_flag",tab_icon_name:"flag",emoji_names:["checkered_flag","triangular_flag_on_post","crossed_flags","waving_black_flag","waving_white_flag","rainbow-flag","flag-ac","flag-ad","flag-ae","flag-af","flag-ag","flag-ai","flag-al","flag-am","flag-ao","flag-aq","flag-ar","flag-as","flag-at","flag-au","flag-aw","flag-ax","flag-az","flag-ba","flag-bb","flag-bd","flag-be","flag-bf","flag-bg","flag-bh","flag-bi","flag-bj","flag-bl","flag-bm","flag-bn","flag-bo","flag-bq","flag-br","flag-bs","flag-bt","flag-bv","flag-bw","flag-by","flag-bz","flag-ca","flag-cc","flag-cd","flag-cf","flag-cg","flag-ch","flag-ci","flag-ck","flag-cl","flag-cm","cn","flag-co","flag-cp","flag-cr","flag-cu","flag-cv","flag-cw","flag-cx","flag-cy","flag-cz","de","flag-dg","flag-dj","flag-dk","flag-dm","flag-do","flag-dz","flag-ea","flag-ec","flag-ee","flag-eg","flag-eh","flag-er","es","flag-et","flag-eu","flag-fi","flag-fj","flag-fk","flag-fm","flag-fo","fr","flag-ga","gb","flag-gd","flag-ge","flag-gf","flag-gg","flag-gh","flag-gi","flag-gl","flag-gm","flag-gn","flag-gp","flag-gq","flag-gr","flag-gs","flag-gt","flag-gu","flag-gw","flag-gy","flag-hk","flag-hm","flag-hn","flag-hr","flag-ht","flag-hu","flag-ic","flag-id","flag-ie","flag-il","flag-im","flag-in","flag-io","flag-iq","flag-ir","flag-is","it","flag-je","flag-jm","flag-jo","jp","flag-ke","flag-kg","flag-kh","flag-ki","flag-km","flag-kn","flag-kp","kr","flag-kw","flag-ky","flag-kz","flag-la","flag-lb","flag-lc","flag-li","flag-lk","flag-lr","flag-ls","flag-lt","flag-lu","flag-lv","flag-ly","flag-ma","flag-mc","flag-md","flag-me","flag-mf","flag-mg","flag-mh","flag-mk","flag-ml","flag-mm","flag-mn","flag-mo","flag-mp","flag-mq","flag-mr","flag-ms","flag-mt","flag-mu","flag-mv","flag-mw","flag-mx","flag-my","flag-mz","flag-na","flag-nc","flag-ne","flag-nf","flag-ng","flag-ni","flag-nl","flag-no","flag-np","flag-nr","flag-nu","flag-nz","flag-om","flag-pa","flag-pe","flag-pf","flag-pg","flag-ph","flag-pk","flag-pl","flag-pm","flag-pn","flag-pr","flag-ps","flag-pt","flag-pw","flag-py","flag-qa","flag-re","flag-ro","flag-rs","ru","flag-rw","flag-sa","flag-sb","flag-sc","flag-sd","flag-se","flag-sg","flag-sh","flag-si","flag-sj","flag-sk","flag-sl","flag-sm","flag-sn","flag-so","flag-sr","flag-ss","flag-st","flag-sv","flag-sx","flag-sy","flag-sz","flag-ta","flag-tc","flag-td","flag-tf","flag-tg","flag-th","flag-tj","flag-tk","flag-tl","flag-tm","flag-tn","flag-to","flag-tr","flag-tt","flag-tv","flag-tw","flag-tz","flag-ua","flag-ug","flag-um","flag-un","us","flag-uy","flag-uz","flag-va","flag-vc","flag-ve","flag-vg","flag-vi","flag-vn","flag-vu","flag-wf","flag-ws","flag-xk","flag-ye","flag-yt","flag-za","flag-zm","flag-zw","flag-england","flag-scotland","flag-wales"]}],S=function(){TS.emoji.setUpEmoji()},h=function(){p.unaltered_data&&(p.data=JSON.parse(JSON.stringify(p.unaltered_data)),p.inits={}),p.ts_init_colons()},T=function(){TS.emoji.setEmojiMode(),TS.emoji.makeMenuLists(),TS.redux&&TS.interop&&TS.interop.redux&&TS.redux.dispatch(TS.interop.redux.features.customEmoji.updateCustomEmoji())},b=function(e,t,n){if(p){var o=TS.storage.fetchCustomEmoji();if(o){if(void 0===t){if(delete TS.model.emoji_use[e],!o.data.hasOwnProperty(e))return;delete o.data[e];var a=_.remove(TS.model.emoji_map,{name:e});TS.boot_data.feature_emoji_by_id&&a.forEach((function(e){delete TS.model.emoji_map_by_id[e.id]}))}else o.data[e]=t;TS.model.emoji_cache_ts=n,TS.storage.storeCustomEmoji({data:o.data,cache_ts:TS.model.emoji_cache_ts}),w(o.data)}else TS.interop.utility.getLogger({getState:TS.redux.getState}).error("error_updating_emoji","Attempting to update custom emoji, but no custom emoji data is in local storage")}},w=function(e){h(),TS.emoji.ingestCustoms(e),T()},y=function(){var e=TS.model.all_custom_emoji;return TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(e=j(e)),e},v=function(e){return!!s[e]},k=function(e){return TS.prefs&&TS.prefs.getPref(e)},j=function(e){return _.filter(e,(function(e){return!v(e)}))},x=function(){var e=TS.ui.frecency.getMostCommonWithPrefix("E",50);if(!(e=_.map(e,"id")).length)return[];var t=TS.emoji.getChosenSkinTone(!0),n=_.keyBy(TS.model.emoji_map,"id"),o=[];return _.chain(e).map((function(e){var a=n[e];if(!a)return null;var i=a.display_name;t&&a.is_skin&&(i=i+"::"+t);var r=f[i];if(!r)return null;if(TS.emoji.emojiHasAliases(r))for(var s=r.names.split(" "),l=0;l<s.length;l++){var c=TS.emoji.stripWrappingColons(s[l]);if(_.includes(o,c))return null}return o.push(i),i})).compact().take(36).value()}}()},Bnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},EbDI:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},Ijbi:function(e,t,n){var o=n("WkPL");e.exports=function(e){if(Array.isArray(e))return o(e)}},Qic8:function(e,t,n){var o=n("RIqP"),a=n("lSNA");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}!function(){var e,t,n=window.TS&&TS.raw_templates,a=window.TS&&TS.raw_template_paths,i=window.TS&&TS.templates_to_audit,s=window.TS&&TS.console,l=0;window.TSM&&window.TSM.interop||console.error("TSM.interop not found, app almost certainly will not boot properly"),window.TS={boot_data:{},qs_args:{},pri:0,has_pri:{},console:s,ms:{},interop:window.TSM&&window.TSM.interop,boot:function(n){TS.interop.debug.exportToGlobalDebugger("teamIds",[n.team_id]),TS.interop.debug.exportToGlobalDebugger("activeTeamId",n.team_id),TS.interop.debug.exportToGlobalDebuggerWithGetter("activeTeam",(function(){return window.slackDebug[n.team_id]})),O(),t=new Promise((function(t){e=t})),TS.boot_data=n,TS.qs_args.js_path&&(TS.boot_data.version_ts="local_js"),TS.console.onStart(),TS.model.api_url=TS.boot_data.api_url,TS.model.async_api_url=TS.boot_data.async_api_url,TS.model.api_token=TS.boot_data.api_token,TS.model.webhook_url=TS.boot_data.webhook_url,TS.boot_data.page_needs_enterprise&&(TS.model.enterprise_api_token=TS.boot_data.enterprise_api_token),TS.interop.console.info("BOOT","booted! pri:"+TS.pri+" version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms+" ("+(Date.now()-TS.boot_data.start_ms)+"ms ago)"),TS.interop.desktop.legacyHasDeviceStorage()&&TS.interop.environment.isSSB()&&TS.interop.desktop.deprecatedSetItem("shouldLogFirstMeaningfulPaint","true"),TS.redux.onStart(),TS.redux.onStart=_.noop,TS.interop.clog.setup({userId:TS.boot_data.user_id,teamId:TS.boot_data.team_id,enterpriseId:TS.boot_data.enterprise_id,locale:TS.interop.i18n&&TS.interop.i18n.locale}),$(document).ready(P)},useReactMessages:function(){return!0},registerModule:function(e,t,n){return z(t),j?TS.error('module "'+e+'" must be registered on before dom ready'):C[e]?TS.error('module "'+e+'" already exists'):void(void 0!==p(e,t,"module")?(t._name=e,C[e]=t):n?TS.error('module "'+e+'" cannot be registered after delay; "'+e.split(".").slice(0,-1).join(".")+'" is not registered'):A[e]=t)},registerComponent:function(e,t){if(j)return TS.error('component "'+e+'" must be registered on before dom ready');if(L[e])return TS.error('component "'+e+'" already exists');if("function"==typeof t&&(t=t()),"function"!=typeof t.destroy)return TS.error('component "'+e+'" cannot be registered as it does not have a destroy method');var n=function t(){this._constructor&&this._constructor.apply(this,arguments),this.id||(this.id=e+"_auto_guid_"+l,l+=1),this.test&&S()?this.test=void 0:"function"==typeof this.test&&(this.test=this.test()),t._add(this.id,this)};if(void 0!==p(e,n,"component")){var o=t.destroy;t.destroy=function(){n._remove(this.id),o.call(this)},n.prototype=Object.create(t),n.instances={},n._name=e,L[e]=n,n._add=function(t,n){L[e].instances[t]&&TS.warn("A "+e+" component with the instance id "+t+"already exists"),L[e].instances[t]=n},n._remove=function(t){L[e].instances[t]=null},n.get=function(t){return L[e].instances[t]},n.getAll=function(){return L[e].instances}}else I[e]=t},makeLogDate:function(){return window.TSMakeLogDate?TSMakeLogDate():"(TSMakeLogDate not loaded) "},shouldLog:function(e){return TS.console.shouldLog(e)},replaceConsoleFunction:function(e){return TS.console.replaceConsoleFunction(e)},log:function(e){if(TS.shouldLog(e)){var t=q(e,"log"),n=R(e,arguments);TS.interop.console.info(t,[].slice.call(n,0))}},info:function(){TS.interop.console.info("info",[].slice.call(arguments,0))},maybeWarn:function(e){TS.console.maybeWarn.apply(this,[].slice.call(arguments,0))},warn:function(){TS.interop.console.warn([].slice.call(arguments,0))},dir:function(e,t,n){TS.console.dir.apply(this,[].slice.call(arguments,0))},maybeError:function(e){TS.console.maybeError.apply(this,[].slice.call(arguments,0))},error:function(){TS.interop.console.error([].slice.call(arguments,0))},getQsArgsForUrl:function(e){if(!e&&v)return v;for(var t in v="",TS.qs_args)"export_test"!==t&&(v+="&"+t+"="+encodeURIComponent(TS.qs_args[t]));return v},getOtherAccountsCount:function(){var e=0;return TS.boot_data.other_accounts?e=Object.keys(TS.boot_data.other_accounts).length:e},refreshTeams:function(){u()},reload:function(e,t,n){if(e)return TS.info("TS.reload called: "+e),void TS.generic_dialog.start({title:TS.interop.i18n.t("Reloading!","ts")(),body:e,show_cancel_button:!1,esc_for_ok:!0,onGo:function(){TS.reload()}});t&&(t=JSON.stringify(t)),TS.info("TS.reload() called: "+(t||"no reason specified")),TS.console&&TS.console.logStackTrace(),window.location.reload(n)},reloadIfLoggedInAndShouldReload:function(e){return!(!TS.model.ms_logged_in_once||!e.should_reload)&&(TS.reload(null,"rtm.shouldReload said so"),!0)},reloadIfVersionsChanged:function(e){return TS.model.ms_logged_in_once&&e.min_version_ts&&"dev"!==TS.boot_data.version_ts&&parseInt(TS.boot_data.version_ts,10)<parseInt(e.min_version_ts,10)?(TS.reload(null,"parseInt(TS.boot_data.version_ts) < parseInt(data.min_version_ts)"),!0):!(!TS.model.ms_logged_in_once||!e.cache_version||e.cache_version==TS.storage.msgs_version)&&(TS.reload(null,"data.cache_version "+e.cache_version+" != TS.storage.msgs_version "+TS.storage.msgs_version),!0)},ensureFullyBooted:function(){return t},legacyResynced:function(){x("legacy-resynced").timeout(m).then((function(e){return T({ok:!0,args:{},data:e})})).catch((function(){TS.redux.dispatch(TS.interop.redux.features.cfm.incrementMajorVersion())})).finally((function(){TS.interop.topics.resynced()}))},test:function(){var e={_registerDelayedComponentsAndModules:N,_deleteModule:function(e){delete TS[e],delete C[e]},_deleteComponent:function(e){delete TS[e],delete L[e]}};return e}},delete window.TSM;var c=TS.interop.utility.addJitter(1e3,0,5),d=TS.interop.utility.addJitter(3e5,0,1),m=3e4,u=_.debounce((function(){TS.boot_data&&TS.model&&TS.model.team&&TS.model.user&&TS.interop.api.call("auth.currentSessions").then((function(e){var t=e.data;for(var n in TS.boot_data.other_accounts={},t.accounts)n!=TS.model.user.id&&(TS.boot_data.other_accounts[n]=t.accounts[n])})).catch((function(e){TS.console&&TS.console.warn&&TS.console.error&&(TS.warn(8675309,"unable to do anything with refreshTeams rsp"),TS.error(8675309,e))}))}),c,{maxWait:d}),p=function(e,t,n){var o=e,a=TS,i=o.split("."),r=i.length-1;if(r>=3)TS.error(n+' "'+o+'" cannot be registered, as we only support a depth of two sub modules right now');else if(r){o=i[r];for(var s=0;s<r;s+=1)if(i[s]||TS.error(n+' "'+e+'" cannot be registered because of a bad name'),void 0===(a=a[i[s]]))return a}return void 0!==a[o]?TS.error(n+' "'+e+'" cannot be registered; "'+o+'" already exists on "'+(a._name||"TS")+'"'):a[o]=t,a};n&&(TS.raw_templates=n,n=null),a&&(TS.raw_template_paths=a,a=null),i&&(TS.templates_to_audit=i,i=null);var f,g,S=function(){return!(void 0!==window.jasmine||"dev"===TS.boot_data.version_ts&&TS.qs_args.export_test)},h=function e(){if(TS.qs_args.no_rtm_start)return new Promise((function(t,n){TS.resumeRTMStart=function(){delete TS.resumeRTMStart,delete TS.qs_args.no_rtm_start,e().then((function(e){t(e)})).catch(n)}}));if(TS.boot_data.rtm_start_response&&!TS.qs_args.no_rtm_start_response){var t=Promise.resolve({ok:!0,args:TS.boot_data.rtm_start_response.args,data:TS.boot_data.rtm_start_response.data});return delete TS.boot_data.rtm_start_response,t}return x("legacy-boot").then((function(e){return{ok:!0,args:{},data:e}}))},T=function(t){if(TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Got rtm.start login data"),TS.model.emoji_cache_ts=t.data.emoji_cache_ts,TS.model.apps_cache_ts=t.data.apps_cache_ts,TS.model.commands_cache_ts=t.data.commands_cache_ts,TS.model.static_translations_cache_ts=t.data.translations_cache_ts,t.data.self){if(t.data.team)return TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up model"),D(t.data,t.args).then((function(){return b(t.data),TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up commands"),TS.cmd_handlers.setUpCmds(),TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up static translations"),TS.i18n.setUpStaticTranslations(),TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up UI"),w(),TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Finding initial channel"),TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji and shared channels"),TS.emoji.bootEmoji().timeout(500).catch(Promise.TimeoutError,(function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Fetching emoji took too long; continuing without waiting for it")})).catch((function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Setting up emoji failed, trying to move forward anyway...")}))})).then((function(){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Nearly there! Finalizing..."),TS.model.ms_logged_in_once||y(t.data),TS.web&&TS.web.onEveryLoginMS(t.data),G(t.data),!TS.model.ms_logged_in_once&&e&&(TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Divine clementine, we are finalizing a full boot!"),e(),e=null,TS.interop.desktop.isDesktop&&TS.redux.dispatch(TS.interop.desktop.onWebappBooted()),k&&TS.interop.console.info("BOOT","Finished first boot "+Math.ceil(performance.now()-k)+" ms after DOM ready")),TS.model.ms_logged_in_once=!0,TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","Holy guacamole, we\u2019re all done!"),TS.log(123,"User id: "+_.get(TS.boot_data,"user_id")+", team id: "+_.get(TS.model,"team.id"))})).catch((function(e){TS.error("_setUpModel failed with err: "+(e?e.message:"no err provided")),M||(M=!0,e&&e.message&&TS.interop.utility.getLogger({getState:TS.redux.getState}).error(e,e.message,{subtype:"legacy_setup_model_error"}),TS.telemeter.count("setup_model_failed")),TS.dir(e),TS.info(e.stack),TS._last_boot_error=e}));TS.error("No team?")}else TS.error("No self?")},b=function(e){parseInt(TS.storage.fetchLastEKMChangeTimestamp()||"0",10)<parseInt(e.ekm_clear_cache_ts||"0",10)&&(TS.interop.desktop.isDesktop&&(TS.interop.console.info("BOOT","EKM clear cache event occurred; clearing file cache"),TS.interop.desktop.clearCache()),TS.interop.console.info("BOOT","Updating last_ekm_change_ts in storage to "+e.ekm_clear_cache_ts),TS.storage.storeLastEKMChangeTimestamp(e.ekm_clear_cache_ts))},w=function(){TS.ui.setThemeClasses()},y=function(e){TS.boot_data.feature_tinyspeck&&TS.interop.console.info("BOOT","_finalizeFirstBoot"),TS.model.ms_logged_in_once?TS.warn("_finalizeFirstBoot called, but we have already done this before. This is a progamming error."):(TS.web&&TS.web.onFirstLoginMS(e),g=void 0)};TS.qs_args=function(){var e,t={};e=location.search.substring(1).split("&");for(var n=0;n<e.length;n+=1){var o=e[n].indexOf("=");if(-1!=o){var a=e[n].substring(0,o),i=e[n].substring(o+1);t[a]=unescape(i)}else e[n].length&&(t[e[n]]="")}return t}(),TS.pri=TS.qs_args.pri?TS.qs_args.pri+",0":TS.pri,_.each(TS.pri&&TS.pri.split(","),(function(e){e&&(TS.has_pri[e]=!0)}));var v,k,j=!1,x=function(e){return g||TS.redux.dispatch(TS.interop.boot.data.getStartData({reason:e}))},E=function(e){B(),(TS.interop.environment.isDev||TS.interop.environment.isQa)&&$("html").attr("data-qa-ready",!0),j=!0,TS.model.is_our_app&&U(),TS.ui.setUpWindowUnloadHandlers(),"client"===TS.boot_data.app||"web"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.web.gogogo(),"client"!==TS.boot_data.app&&"space"!==TS.boot_data.app&&"calls"!==TS.boot_data.app||TS.interop.activity_session.listenForUserEvents(),TS.boot_data.no_login?(TS.info("running without a user"),TS.web&&TS.web.no_login_complete_sig.dispatch()):e?T(e):TS.error("_initialDataFetchesComplete expected to receive rtm.start data; we cannot continue.")},O=function(){window.devtoolsFormatters=window.devtoolsFormatters||[],window.devtoolsFormatters.push({header:function(e){return e&&e._is_interop_channel_object&&window._?["object",{object:_.omitBy(_.assign({},e),_.isNil)}]:null},hasBody:function(){return!1}})},C={},A={},L={},I={},M=!1,P=function(){if(k=performance.now(),TS.log(123,"_onDOMReady"),function(){if(window.sessionStorage)try{var e="session_load_count_web",t=parseInt(sessionStorage.getItem(e)||0,10)+1;sessionStorage.setItem(e,t),TS.log(123,e+": "+t),TS.telemeter.store(e,t,{is_count:!0})}catch(e){TS.warn("could not log session load count: "+e)}}(),window.desktop&&desktop.downloads&&(TS.model.supports_downloads=!0,TS.model.flex_names.push("downloads")),soundManager.setup({debugMode:!1}),TS.storage.onStart(),N(),TS.redux.members.onStart(),TS.redux.members.onStart=_.noop,TS.interop.setTeamIdForToken(TS.boot_data.api_token,TS.boot_data.team_id),TS.interop&&TS.interop.console&&TS.interop.console.setRedactionEnabled){var e=!TS.boot_data.feature_tinyspeck;TS.interop.console.setRedactionEnabled(e)}var t,n=TS.boot_data.no_login?Promise.resolve():(t=h(),g=t,f?f.then((function(e){return e.data.emoji_cache_ts=_.get(TS.storage.fetchCustomEmoji(),"cache_ts"),e.data.apps_cache_ts=_.get(TS.storage.fetchApps(),"cache_ts"),e.data.commands_cache_ts=_.get(TS.storage.fetchCmds(),"cache_ts"),e.data.translations_cache_ts=_.get(TS.storage.fetchStaticTranslations(),"cache_ts"),e})).catch((function(){return TS.info("Recovering from incremental boot error"),g=void 0,t})).finally((function(){f=void 0})):(TS.info("Starting non-incremental boot"),t)),o=[F(),n];TS.boot_data.page_needs_enterprise&&!TS.boot_data.no_login&&o.push(TS.redux.teams.fetchAndUpsertEnterpriseOrgInfo()),Promise.all(o).then((function(){return n.then(E),null}))},F=function(){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck)return Promise.resolve();if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length)return Promise.resolve()}var e="/templates.php?cb="+(TS.boot_data.hbs_templates_version&&"dev"!==TS.boot_data.version_ts?TS.boot_data.hbs_templates_version:"dev"===TS.boot_data.version_ts?Date.now():TS.boot_data.version_ts)+TS.getQsArgsForUrl();TS.boot_data.template_groups&&(e+="&template_groups="+TS.boot_data.template_groups),TS.boot_data.template_exclude_feature_flagged&&(e+="&template_exclude_feature_flagged=1"),/&locale=[a-zA-Z-]/.test(e)&&(e=(e=e.replace(/\?locale=[a-zA-Z-]*&/,"?").replace(/[?|&]locale=[a-zA-Z-]*/,"")).replace(/&locale=[a-zA-Z-]/,"")),TS.interop.i18n.locale&&TS.interop.i18n.locale!==TS.interop.i18n.DEFAULT_LOCALE&&(e+="&locale="+TS.interop.i18n.locale);var t=0;return function n(){return t+=1,new Promise((function(o){if(window.TS&&TS.raw_templates&&Object.keys(TS.raw_templates).length){if(!TS.boot_data.feature_tinyspeck)return void o();if(TS.raw_template_paths&&Object.keys(TS.raw_template_paths).length&&TS.templates_to_audit&&Object.keys(TS.templates_to_audit).length)return void o()}TS.utility.getCachedScript(e).done((function(){0!=Object.keys(TS.raw_templates).length?o():TS.error(e+" returned no templates D:")})).fail((function(o,a,i){var r=Math.min(1e3*t,1e4);TS.warn("loading "+e+" failed (textStatus:"+a+" errorThrown:"+i+" attempts:"+t+"), trying again in "+r+"ms"),setTimeout(n,r)}))}))}()},N=function(){_.sortBy(Object.keys(A),"length").forEach((function(e){TS.registerModule(e,A[e],!0)})),_.sortBy(Object.keys(I),"length").forEach((function(e){TS.registerComponent(e,I[e],!0)}))},B=function(){if(TS.log(Date.now()-TS.boot_data.start_ms+"ms from first html to calling onStarts()"),"client"===TS.boot_data.app);else if("web"===TS.boot_data.app||"space"===TS.boot_data.app||"calls"===TS.boot_data.app)TS.web.onStart(),TS.web.onStart=_.noop;else{if("test"===TS.boot_data.app)return;if("api"!==TS.boot_data.app&&"oauth"!==TS.boot_data.app)return void TS.error("WTF app? "+TS.boot_data.app)}var e,t=!TS.qs_args.keep_onstart;try{_.forOwn(C,(function(n){n.onStart&&(e=n._name,n.onStart(),t&&(n.onStart=_.noop))}))}catch(t){throw TS.error("TS."+e+".onStart encountered an error:"),TS.interop.utility.getLogger({getState:TS.redux.getState}).error(t),window.TSBeacon&&window.TSBeacon("call_onstarts_error",1),t}t&&(B=_.noop)},D=function(e,t){return new Promise((function(n,a){var i,s,l,c=!TS.model.ms_logged_in_once;e.team.activity=[],e.team.url=e.url,e.team.prefs&&(TS.redux.prefs.setTeamPrefs(e.team.prefs),delete e.team.prefs),TS.boot_data.enterprise_prefs&&TS.redux.prefs.setEnterprisePrefs(TS.boot_data.enterprise_prefs),TS.redux.teams.upsertTeam(e.team),TS.members.legacyUpsertAndSignal(r(r({},e.self),{},{is_self:!0})),TS.boot_data.page_needs_enterprise&&void 0!==e.can_manage_shared_channels&&TS.prefs.setTeamPrefLocal("can_user_manage_shared_channels",e.can_manage_shared_channels),TS.model.last_team_name||(TS.model.last_team_name=TS.model.team.name),c&&(TS.model.read_only_channels=[],TS.model.thread_only_channels=[],TS.model.non_threadable_channels=[]),TS.prefs.setPrefs(e.prefs||e.self.prefs),e.self.prefs&&delete e.self.prefs;var d=["args.cache_ts:"+t.cache_ts],m=_.clone(t);m.token&&(m.token="REDACTED");try{d.push("api args: "+JSON.stringify(m))}catch(e){d.push("api args: "+m)}TS.members.legacyStartBatchUpsert();var u=e.users||[],p=e.bots||[],f={};for(i=0;i<u.length;i+=1)f[u[i].id]=!0;for(i=0;i<u.length;i+=1)l=(s=TS.members.legacyUpsertAndSignal(u[i])).member,TS.has_pri[W]&&TS.log(W,"upsert from DATA: "+l.id+" "+s.status);var g,S={};for(i=0;i<p.length;i+=1)S[p[i].id]=!0;if(TS.redux.bots.bulkUpsertBots(p),d.push("members from updated_users in rtm.start:"+u.length+" (slackbot will always be here)"),d.push("bots from updated_bots in rtm.start:"+p.length),u.length<TS.model.members.length/20&&(TS.model.did_we_load_with_user_cache=!0),TS.qs_args.debug_slackbot&&(g=!0),g&&TS.info("debug_slackbot: _setUpModel(): data_user_list, data_bot_list",u,p),S=null,f=null,TS.log(123,d.join("\n")),!TS.model.user)return TS.error("No TS.model.user - Expected user with id: "+_.get(e,"self.id","#")),TS.log(d.join("\n")),void a(Error("No TS.model.user"));if(TS.members.legacyFinishBatchUpsert(),TS.prefs.setHighlightWords(TS.prefs.getPref("highlight_words")),e.subteams&&(TS.interop.userGroups.clearAllUserGroupMembership(),TS.interop.userGroups.bulkAddUserGroupMembership({userGroups:o(e.subteams.self),isMember:!0})),e.read_only_channels&&(TS.model.read_only_channels=e.read_only_channels),e.non_threadable_channels&&(TS.model.non_threadable_channels=e.non_threadable_channels),e.thread_only_channels&&(TS.model.thread_only_channels=e.thread_only_channels),TS.model.initial_msgs_cnt=42,TS.qs_args.api_count){var h=parseInt(TS.qs_args.api_count,10)||TS.model.initial_msgs_cnt;TS.model.initial_msgs_cnt=Math.min(TS.model.initial_msgs_cnt,h)}var T=TS.model.hard_msg_limit;TS.model.subsequent_msgs_cnt=Math.min(T,2*TS.model.initial_msgs_cnt),TS.model.special_initial_msgs_cnt=Math.min(T,2*TS.model.initial_msgs_cnt),TS.log(123,"initial_msgs_cnt:"+TS.model.initial_msgs_cnt+" subsequent_msgs_cnt:"+TS.model.subsequent_msgs_cnt+" special_initial_msgs_cnt:"+TS.model.special_initial_msgs_cnt);!function(){TS.utility.msgs.startBatchUnreadCalc(),TS.telemeter.mark("upsert_channels_start");var t=_.map(e.channels,(function(t){if(!TS.interop.rules.channels.isPublicChannel(t)&&!TS.interop.rules.channels.isPrivateChannel(t))return t;var n=!1,o=!1,a=!1;return e.read_only_channels&&(n=e.read_only_channels.indexOf(t.id)>-1),e.thread_only_channels&&(o=e.thread_only_channels.indexOf(t.id)>-1),e.non_threadable_channels&&(a=e.non_threadable_channels.indexOf(t.id)>-1),r(r({},t),{},{is_read_only:n,is_thread_only:o,is_non_threadable:a})}));TS.telemeter.measureAndClear("upsert_channels_start","upsert_channels");var n=_.compact(t);if(TS.redux.channels.bulkAddEntities(n),TS.interop&&TS.interop.ChannelSidebar&&TS.interop.ChannelSidebar.ensureRowInView(),TS.utility.msgs.finishBatchUnreadCalc(),g){var o=TS.redux.channels.getImByMemberId("USLACKBOT"),a=TS.interop.members.getMemberById("USLACKBOT");TS.info("debug_slackbot: non-incremental boot\nTS.redux.channels.getImByMemberId('USLACKBOT') => "+(o?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")+"\nTS.interop.members.getMemberById('USLACKBOT') => "+(a?"OK \ud83c\udf89":"NOT FOUND \ud83d\udc7b")),o&&TS.info("debug_slackbot: slackbot_im",o.toJSON&&o.toJSON()||o),a&&TS.info("debug_slackbot: slackbot_member",a.toJSON&&a.toJSON()||a),o||TS.warn("debug_slackbot: TS.redux.channels.getImByMemberId(`USLACKBOT`): No IM found?")}}(),TS.redux.dispatch(TS.interop.redux.models.paidFeatures.setPaidFeatures(e.paid_features||[])),n()}))},z=function(e){if(e.test&&!e.__esModule&&S())delete e.test;else if("function"==typeof e.test){var t=e.test;Object.defineProperty(e,"test",{get:t})}};z(TS);var U=function(){var e=!1;window.addEventListener("sleep",(function(){TS.info("sleep event!"),e=!0}),!1),window.addEventListener("wake",(function(){e&&(e=!1,TS.info("wake event! version:"+TS.boot_data.version_ts+" start_ms:"+TS.boot_data.start_ms))}),!1)},W=481,q=function(e,t){var n=t;return e&&_.isNumber(e)?n=""+e:"log"===t&&(n="info"),n},R=function(e,t){var n=Array.prototype.slice.call(t);return e&&_.isNumber(e)&&n.shift(),n},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.channels,n=e.ims,o=e.mpims,a=e.groups,i=e.self,r=e.team,s=_([t,n,o,a]).flatten().map("id").value(),l=[i.id],c=[r.id];TS.interop.channels.markObjectsAsFresh(s),TS.interop.members.markObjectsAsFresh(l),TS.interop.teams.markObjectsAsFresh(c)};_.noop()}()},RIqP:function(e,t,n){var o=n("Ijbi"),a=n("EbDI"),i=n("ZhPi"),r=n("Bnag");e.exports=function(e){return o(e)||a(e)||i(e)||r()}},RsIA:function(e,t){!function(){var e;TS.registerModule("i18n",{onStart:function(){TS.interop.i18n.getReverseKeyCodeMap(),TS.prefs&&TS.prefs.keyboard_changed_sig.add(o),window.signals?TS.i18n.keyboard_changed_sig=new signals.Signal:TS.i18n.keyboard_changed_sig={add:function(){},remove:function(){},dispatch:function(){}}},keyboard:function(){if(!e)if(TS.interop.desktop.legacyCanAutoGetKeyboard())e=TS.interop.i18n.normalizeKeyboardFromDesktop(desktop.app.getLocaleInformation().currentKeyboardLayout,{featureLocaleKoKr:TS.boot_data.feature_locale_ko_KR,featureLocaleItIt:TS.boot_data.feature_locale_it_IT,featureLocaleZhCn:TS.boot_data.feature_locale_zh_CN,featureLocaleZhTw:TS.boot_data.feature_locale_zh_TW,featureLocaleRuRu:TS.boot_data.feature_locale_ru_RU}),desktop.app.onDidChangeKeyboardLayout(n);else{if(!TS.prefs.prefs_loaded)return"us";e=TS.prefs.getPref("keyboard")||"us"}return"en-US"===e?"us":e},sendButtonEnabled:function(){return TS.prefs&&TS.prefs.getPref("msg_input_send_btn")},setUpStaticTranslations:function(){return t()},getStaticTranslation:function(e,t){if(!a())return null;var n=TS.storage.fetchStaticTranslations(),o=_.get(n,"data."+t);return o&&o[e]?o[e]:null}});var t=function(){return a()?Promise.resolve():TS.interop.api.call("i18n.translations.get").then((function(e){var t=e.data;t&&t.ok?(TS.model.static_translations_cache_ts=t.cache_ts,TS.storage.storeStaticTranslations({data:t,cache_ts:TS.model.static_translations_cache_ts,locale:t.locale})):TS.error("Failed to fetch static i18n translations, recieved this response: ",e)}))},n=function(t){e=TS.interop.i18n.normalizeKeyboardFromDesktop(t,{featureLocaleKoKr:TS.boot.feature_locale_ko_KR,featureLocaleItIt:TS.boot.feature_locale_it_IT,featureLocaleZhCn:TS.boot.feature_locale_zh_CN,featureLocaleZhTw:TS.boot.feature_locale_zh_TW,featureLocaleRuRu:TS.boot.feature_locale_ru_RU}),TS.i18n.keyboard_changed_sig.dispatch()},o=function(){TS.model.is_our_app||(e=TS.prefs.getPref("keyboard"),TS.i18n.keyboard_changed_sig.dispatch())},a=function(){var e=TS.storage.fetchStaticTranslations();return!!e&&(TS.model.static_translations_cache_ts===e.cache_ts&&TS.interop.i18n.locale===e.locale)}}()},VoEv:function(e,t){!function(){TS.registerModule("statsd",{onStart:function(){var e=Math.floor(5e3*Math.random());setInterval(o,3e4+e),$(window).on("beforeunload",o)},count:function(e,t){_.isUndefined(t)&&(t=1),n(e,"count",t)},timing:function(e,t){n(e,"timing",t)},flush:function(){o()},mark:function(e){TS.telemeter.mark(e)},clearMarks:function(e){TS.telemeter.clearMarks(e)},measure:function(e,t,n){var o=TS.telemeter.measure(t,e,n,{ephemeral:!0});if(!_.isNaN(o)&&!_.isUndefined(o))return TS.statsd.timing(e,o),o},measureAndClear:function(e,t){var n=TS.statsd.measure(e,t);return TS.statsd.clearMarks(t),n},test:function(){var e={getStats:function(){return t},reset:function(){t=[]}};return Object.defineProperty(e,"_record",{get:function(){return n},set:function(e){n=e}}),Object.defineProperty(e,"_sendDataAndEmptyQueue",{get:function(){return o},set:function(e){o=e}}),e}});var e,t=[],n=function(e,n,o){var a;if("count"===n)a=" (count)",o=_.round(o,0);else{if("timing"!==n)return void TS.error("TS.statsd._record called with invalid type: "+n);a="ms",o=_.round(o,3)}i(e)&&TS.info("[STATSD "+n.toUpperCase()+"] "+e+": "+o+a),t.push({stat:e,type:n,value:o})},o=function(){if(t.length){var e=[],n=[],o=function(e){return a()+"?stats="+encodeURIComponent(JSON.stringify(e))};t.forEach((function(t){n.push(t),o(n).length>2e3&&(n.pop(),e.push(o(n)),n=[t])})),e.push(o(n)),e.forEach((function(e){(new Image).src=e})),i()&&TS.info("[STATSD] Sending data: "+JSON.stringify(t)),t=[]}},a=function(){if(e)return e;if(TS.environment.is_dev){var t=location.host.match(/^([^.]+\.)?(?:enterprise\.)?((dev|qa)[0-9]*)\.slack\.com/)[2];e="https://"+t+".slack.com/beacon/statsd"}else e=location.host.match(/staging.slack.com/)?"https://staging.slack.com/beacon/statsd":location.host.match(/staging-master.slack.com/)?"https://staging-master.slack.com/beacon/statsd":location.host.match(/staging-release.slack.com/)?"https://staging-release.slack.com/beacon/statsd":"https://slack.com/beacon/statsd";return e},i=function(e){return e?TS.qs_args.log_timings||TS.qs_args.log_timing===e||!0===TS.statsd.log||TS.statsd.log===e||TS.statsd.log instanceof Array&&-1!==TS.statsd.log.indexOf(e):TS.qs_args.log_timings||!0===TS.statsd.log}}()},WkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}},ZhPi:function(e,t,n){var o=n("WkPL");e.exports=function(e,t){if(e){if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}},bREN:function(e,t){!function(){var e;TS.registerModule("redux",{onStart:function(){n(TS.boot_data.page_needs_org_admin_dashboard_store?TS.interop.orgAdmin.configureOrgAdminStore({orgId:o()}):TS.interop.redux.configureStore({teamOrEnterpriseId:o(),reducers:TS.interop.redux.defaultReducers,middlewares:TS.interop.redux.getMiddlewares(TS.interop.redux.clientMiddlewares)}))},bindSelectorToStore:function(n){if(!n)throw new Error("bindSelectorToStore: selector is undefined.");return function(o,a,i,r,s,l,c){if(e){var d=function(e){var n=t[e];if(n)return n;if(!(n=_.get(window,e)))return;return t[e]=n,n}(n);if(d){if(d&&d.length>7)throw new Error("bindSelectorToStore only supports selectors accepting up to 7 parameters. This should be more than enough for any use case");return d.call(void 0,TS.redux.getState(),o,a,i,r,s,l,c)}TS.console.error("Selector "+n+" cannot be found. Either it doesn't exist or it hasn't yet been initialized. Returning undefined instead")}else TS.console.error("Attempting to use a redux selector before the redux store is initialized, returning undefined instead. Selector is: "+n)}},getState:function(){var t=e&&e.getState&&e.getState();return t||(TS.error("No redux state found. The redux store must not be initialized yet"),TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")),t},getStoreInstance:function(){return e||(TS.error("No redux store found. The redux store must not be initialized yet"),TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")),e},dispatch:function(t){if(t&&e&&e.dispatch)return e.dispatch(t);t?(TS.error("No dispatch function available. The redux store must not be initialized yet"),TS.console.logStackTrace("Logging a stack trace to determine what is trying to access redux too early")):TS.error("No action provided?")},test:{onStart:function(){n(window.slackCreateTestStore({teamOrEnterpriseId:o()}))}}});var t={};function n(t){e=t,TS.redux.dispatch(TS.interop.experiments.bulkAddExperiments(TS.boot_data.experiment_assignments)),TS.redux.dispatch(TS.interop.bootData.setBootData(TS.boot_data)),TS.interop.desktop.isDesktop&&function(){TS.redux.dispatch(TS.interop.redux.createDesktopDelegate());var e=TS.interop.redux.getDelegateForLegacy((window.desktopDelegates||window.desktop.delegates)[o()]);_.assign(TS.interop,{webapp:e}),_.assign(TSSSB,e)}(),TS.boot_data.enterprise_id&&TS.redux.dispatch(TS.interop.redux.actions.setEnterpriseId({id:TS.boot_data.enterprise_id})),TS.boot_data.page_needs_org_admin_dashboard_store||TS.redux.dispatch(TS.interop.redux.actions.setPageContext("team"))}function o(){return TS.boot_data.team_id||"NO_TEAM_ID"}}()},cDf5:function(e,t){function n(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?e.exports=n=function(e){return typeof e}:e.exports=n=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(t)}e.exports=n},cYWi:function(e,t){TS.registerModule("telemeter",{onStart:function(){TS.web&&TS.web.login_sig.add(TS.telemeter.onLogin)},onLogin:function(){TS.interop.telemeter.start()},start:function(){TS.interop.telemeter.start()},mark:function(e){TS.interop.getTelemeter().mark(e)},getLatestMark:function(e){return TS.interop.getTelemeter().getLatestMark(e)},clearMarks:function(e){TS.interop.getTelemeter().clearMarks(e)},measure:function(e,t,n,o){return TS.interop.getTelemeter().measure(e,t,n,o)},measureAndClear:function(e,t){return TS.interop.getTelemeter().measureAndClear(e,t)},store:function(e,t,n){return TS.interop.getTelemeter().store(e,t,n)},count:function(e,t){TS.interop.getTelemeter().count(e,t)},flush:function(){TS.interop.getTelemeter().sendDataAndEmptyQueue()}})},lGk4:function(e,t){!function(){TS.registerModule("ssb",{openNewFileWindow:function(e,t){return o&&TS.log(o,"TS.ssb.openNewFileWindow url: "+t),!1},closeWindow:function(){return!!window.is_in_ssb&&(window.close(),!0)},setUpAtomSSBWin:function(e){n(e,"window.is_in_ssb = true;"),TS.shouldLog(438)&&!e._has_console&&(e._has_console=1)},upsertFileInSSBParentWin:function(n){TS.web&&(document.ssb_main?document.ssb_main.TS&&document.ssb_main.TS.files.upsertAndSignal(n,"upsertFileInSSBParentWin"):window.desktop&&window.opener&&window.opener.executeJavaScript&&(o&&TS.log(o,"calling _executeInAtomSSBParentWin for TS.files.upsertAndSignal"),t("TS.files.upsertAndSignal("+e(n)+");")))}});var e=function(e){return"JSON.parse('"+JSON.stringify(e||null)+"')"},t=function(e,t){return TS.interop.desktop.legacyExecuteJavaScriptInParentWindow({code:e,callback:t})},n=function(e,t,n){return TS.interop.desktop.legacyExecuteJavaScriptInWindow({window_token:e.token,code:t,callback:n})},o=438}()},lSNA:function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},rV0I:function(e,t){!function(){TS.registerModule("model",{did_we_load_with_user_cache:!1,did_we_load_with_emoji_cache:!1,did_we_load_with_app_cache:!1,did_we_load_with_cmd_cache:!1,api_url:"",api_token:"",async_api_url:"",webhook_url:"",user:null,team:null,can_add_ura:null,ims:null,channels:null,groups:null,mpims:null,members:null,rooms:null,bots:null,user_groups:null,idp_groups:null,apps:{},files:[],requested_channel_joins:{},archives_and_recreated_groups:{},last_team_name:"",initial_cid:"",enterprise:null,initial_unread_view:!1,initial_threads_view:!1,initial_app_space_view:!1,initial_search_view:!1,initial_page_view:!1,RESERVED_KEYWORDS:["channel","here","everyone","slackbot","siackbot","canal","aqu\xed","aqui","todos","m\xed","mi","hier","alle","cha\xeene","chaine","ici","tous","\u30c1\u30e3\u30f3\u30cd\u30eb","\u3053\u3053","\u5168\u54e1","\ub098","\uadf8\ub8f9","\ucc44\ub110","\ubaa8\ub450","\uc5ec\uae30","\uc804\uccb4","\ubaa8\ub4e0","\uc804\ubd80","tutti","canale","gruppo","qui","me","tu","\u5f52\u6863","\u5df2\u5f52\u6863","\u5168\u90e8","\u9891\u9053","\u521b\u5efa","\u5220\u9664","\u5df2\u5220\u9664\u7684\u9891\u9053","\u7f16\u8f91","\u6bcf\u4e2a\u4eba","\u7ec4","\u6b64\u5904","\u6211","\u4eca\u5929","\u4f60","\u5168\u90e8","\u983b\u9053","\u983b\u9053","\u4efb\u610f","\u6211","\u60a8","\u4e00\u822c","Slack \u6a5f\u5668\u4eba","\u0430\u0440\u0445\u0438\u0432","\u0430\u0440\u0445\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439","\u0430\u0440\u0445\u0438\u0432\u043d\u044b\u0439","\u0432\u0441\u0435","\u0432\u044b","\u0433\u0440\u0443\u043f\u043f\u0430","\u0433\u0440\u0443\u043f\u043f\u044b","\u0437\u0434\u0435\u0441\u044c","\u043a\u0430\u043d\u0430\u043b","\u043a\u0430\u043d\u0430\u043b\u044b","\u043e\u0431\u0449\u0438\u0439","\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c","\u0441\u0435\u0433\u043e\u0434\u043d\u044f","\u0441\u043e\u0437\u0434\u0430\u0442\u044c","\u0443\u0434\u0430\u043b\u0435\u043d\u043d\u044b\u0439 \u043a\u0430\u043d\u0430\u043b","\u0443\u0434\u0430\u043b\u0438\u0442\u044c","\u044f"],NAMED_VIEWS:[{id:"Vall_unreads",name:TS.interop.i18n.t("All Unreads","model")(),is_view:!0},{id:"Vall_threads",name:TS.interop.i18n.t("Threads","threads")(),alt_names:[TS.interop.i18n.t("New Threads","threads")()],is_view:!0},{id:"Vapp_space",name:TS.interop.i18n.t("Apps","model")(),is_view:!0}],unsent_msgs:{},display_unsent_msgs:{},inline_img_byte_limit:2097152,inline_img_pixel_limit:36152320,last_reads_set_by_client:{},ms_logged_in_once:!1,window_unloading:!1,active_cid:null,last_active_cid:null,active_group_id:null,active_channel_id:null,active_im_id:null,active_mpim_id:null,active_history:[],all_custom_emoji:[],user_hiddens:[],user_colors:{},emoji_use:{},at_channel_suppressed_channels:null,push_at_channel_suppressed_channels:null,loud_channels:null,never_channels:null,loud_channels_set:null,push_loud_channels:null,push_mention_channels:null,push_loud_channels_set:null,your_user_group_regex:{},channel_sort:"alphabetical",inline_attachments:{},inline_imgs:{},inline_videos:{},inline_others:{},inline_audios:{},expandable_state:{},native_video_embed_height:320,native_video_embed_height_flexpane:240,native_media_preload_limit_bytes:2097152,is_msg_rate_limited:!1,initial_msgs_cnt:50,subsequent_msgs_cnt:100,special_initial_msgs_cnt:100,hard_msg_limit:500,all_unread_cnt:0,all_unread_highlights_cnt:0,all_unread_cnt_to_exclude:0,all_unread_highlights_cnt_to_exclude:0,threads_has_unreads:!1,threads_mention_count:0,threads_mention_counts:{},c_name_in_url:"",flex_name_in_url:"",flex_extra_in_url:"",flex_names:["files","team","search","stars","mentions","details","whats_new","convo","apps","shortcuts","groups"],default_flex_name:"files",ui_state:null,input_history:null,input_history_index:-1,input_cursor_positions:{},previewed_file_id:null,last_previewed_file_id:null,previewed_member_name:null,previewed_member_id:null,last_previewed_member_id:null,previewed_user_group_id:null,last_previewed_user_group_id:null,channel_name_max_length:80,channel_purpose_max_length:250,channel_topic_max_length:250,upload_file_size_limit_bytes:1073741824,model_ob_id_length:9,msg_activity_interval:5,menu_is_showing:!1,overlay_is_showing:!1,unread_view_is_showing:!1,threads_view_is_showing:!1,app_space_view_is_showing:!1,search_view_is_showing:!1,seen_onboarding_this_session:!1,seen_welcome_2:!0,showing_welcome_2:!1,cancelled_welcome_2_this_session:!1,show_inline_img_size_pref_reminder:!1,shown_inline_img_size_pref_reminder_once:!1,last_key_down_e:null,group_prefix:"",ms_conn_log:[],mac_ssb_version:TS.interop.environment.mac_ssb_version,mac_ssb_version_minor:TS.interop.environment.mac_ssb_version_minor,mac_ssb_build:TS.interop.environment.mac_ssb_build,win_ssb_version:TS.interop.environment.win_ssb_version,win_ssb_version_minor:TS.interop.environment.win_ssb_version_minor,lin_ssb_version:TS.interop.environment.lin_ssb_version,lin_ssb_version_minor:TS.interop.environment.lin_ssb_version_minor,desktop_app_version:TS.interop.environment.desktop_app_version,supports_downloads:!1,supports_spaces_in_windows:!1,supports_growl_subtitle:!1,supports_voice_calls:!1,supports_video_calls:!1,supports_screen_sharing:!1,supports_screenhero:!1,supports_mmap_minipanel_calls:!1,active_file_list_filter:"all",active_file_list_member_filter:"all",file_list_types:null,shift_key_pressed:!1,insert_key_pressed:!1,alt_key_pressed:!1,num_lock_pressed:!1,caps_lock_pressed:!1,join_leave_subtypes:["channel_leave","channel_join","group_leave","group_join"],file_list_type_map:{all:TS.interop.i18n.t("All File Types","model")(),posts:TS.interop.i18n.t("Posts","model")(),spaces:TS.interop.i18n.t("Posts","model")(),docs:TS.interop.i18n.t("Posts","model")(),snippets:TS.interop.i18n.t("Snippets","model")(),emails:TS.interop.i18n.t("Emails","model")(),images:TS.interop.i18n.t("Images","model")(),videos:TS.interop.i18n.t("Videos","model")(),pdfs:TS.interop.i18n.t("PDF Files","model")(),spreadsheets:TS.interop.i18n.t("Spreadsheets","model")(),gdocs:TS.interop.i18n.t("Google Docs","model")()},marked_reasons:{viewed:"viewed",left:"left",esc:"esc",esc_all:"esc_all",closed:"closed",muted:"muted",back:"back",sent:"sent",clicked:"clicked",deleted:"deleted",none_qualify:"none_qualify"},welcome_model_ob:{},change_channels_when_offline:!0,ampersands_are_inconsistent_in_from_urls:!0,ui:{cached_file_preview_scroller_rect:null,cached_msgs_scroller_rect:null,cached_msgs_scroll_result:null,cached_search_scroller_rect:null,cached_archives_scroller_rect:null,cached_archive_scroll_result:null,cached_convo_scroller_rect:null,cached_unread_scroller_rect:null,cached_threads_scroller_rect:null,is_window_focused:!(!document.hasFocus||!document.hasFocus()),is_mouse_down:!1,last_flex_extra:null,active_tab_id:null,active_tab_ts:null,debug_channel_lists:!0,last_top_msg:null},client:{reads:[],last_user_active_timestamp:new Date},emoji_groups:[],emoji_names:[],emoji_map:[],emoji_map_by_id:{},emoji_complex_customs:null,frecency_jumper:{},pdf_viewer_enabled:!0,onStart:function(){var e=[];TS.model.is_electron&&TS.model.is_mac&&TS.interop.desktop.isMainWindowFrameless()&&e.push("is_electron_mac"),TS.model.is_electron&&e.push("is_electron"),$("html").addClass(e.join(" ")),TS.model.supports_growl_subtitle=!(!TS.model.mac_ssb_version||!TS.interop.environment.isSSBAndAtLeastVersion("2.2"));var t=!1;if(Object.defineProperty(TS.model,"dialog_is_showing",{get:function(){return t},set:function(e){t=e},enumerable:!0,configurable:!0}),TS.model.supports_voice_calls=TS.model.is_our_app&&TS.interop.environment.isSSBAndAtLeastVersion("2.5.2")||TS.model.is_chrome_desktop,TS.model.supports_video_calls=TS.model.supports_voice_calls,TS.model.supports_screen_sharing=TS.model.is_our_app&&TS.model.supports_voice_calls,TS.model.supports_screenhero=!1,TS.model.supports_mmap_minipanel_calls=!1,window.desktop&&desktop.calls&&desktop.calls.requestCapabilities){var n=desktop.calls.requestCapabilities();n&&(n.supports_screenhero&&!n.is_mas&&(TS.model.supports_screenhero=!0),n.supports_mmap_minipanel&&(TS.model.supports_mmap_minipanel_calls=!0))}TS.model.supports_spaces_in_windows=!1,window.desktop&&desktop.window&&desktop.window.list&&(TS.model.supports_spaces_in_windows=!0),TS.boot_data.special_flex_panes&&_.forOwn(TS.boot_data.special_flex_panes,(function(e){TS.model.flex_names.push(e.flex_name)}));var o=TS.storage.fetchExpandableState();TS.model.expandable_state=o,Object.defineProperty(TS.model,"active_cid",{get:function(){var e=TS.interop.workspace.getPrimaryView();return TS.interop.utility.looksLikeChannelId(e)?e:null},set:function(){return!1}}),Object.defineProperty(TS.model,"active_channel_id",{get:function(){var e=TS.interop.workspace.getPrimaryView(),t=TS.redux.channels.getEntityById(e,!1);return t&&t.is_channel&&t.id||null},set:function(){return!1}}),Object.defineProperty(TS.model,"active_im_id",{get:function(){var e=TS.interop.workspace.getPrimaryView(),t=TS.redux.channels.getEntityById(e,!1);return t&&t.is_im&&t.id||null},set:function(){return!1}}),Object.defineProperty(TS.model,"active_group_id",{get:function(){var e=TS.interop.workspace.getPrimaryView(),t=TS.redux.channels.getEntityById(e,!1);return t&&t.is_group&&!t.is_mpim&&t.id||null},set:function(){return!1}}),Object.defineProperty(TS.model,"active_mpim_id",{get:function(){var e=TS.interop.workspace.getPrimaryView(),t=TS.redux.channels.getEntityById(e,!1);return t&&t.is_mpim&&t.is_group&&t.id||null},set:function(){return!1}}),Object.defineProperty(TS.model,"unread_view_is_showing",{get:function(){return TS.interop.utility.PRIMARY_VIEWS.allUnreads===TS.interop.workspace.getPrimaryView()},set:function(){return!1}}),Object.defineProperty(TS.model,"threads_view_is_showing",{get:function(){return TS.interop.utility.PRIMARY_VIEWS.allThreads===TS.interop.workspace.getPrimaryView()},set:function(){return!1}}),Object.defineProperty(TS.model,"search_view_is_showing",{get:function(){return TS.interop.utility.PRIMARY_VIEWS.search===TS.interop.workspace.getPrimaryView()},set:function(){return!1}})},addProfilingKeyTime:function(e,t){t&&e&&(TS.model.profiling_key_times||(TS.model.profiling_key_times=[]),TS.model.profiling_key_times.push({name:e,ms:t}))},incrementUnknownIdHandled:function(t){e[t]=e[t]||{tries:0,state:0};var n=e[t];return n.tries+=1,n.state=0,n.tries>2?TS.maybeError(48,'calling the API for id: "'+t+'", try #'+n.tries):n.tries>1?TS.maybeWarn(48,'calling the API for id: "'+t+'", try #'+n.tries):TS.log(48,'calling the API for id: "'+t+'", try #'+n.tries),n.tries},reportResultOfUnknownIdHandled:function(t,n){var o=e[t];o&&(o.state=n?1:-1,1==o.state?TS.log(48,'API call for id: "'+t+'" SUCCEEDED, try #'+o.tries):TS.maybeWarn(48,'API call for id: "'+t+'" FAILED, try #'+o.tries))},logUnknownIdsHandled:function(e,t){var o=n(e,t);TS.info("_unknown_ids_handled: "+JSON.stringify(o,null,2))},getUnknownIdsHandled:function(e,t){return n(e,t)},test:function(){return{getOSXVersion:a,isWin7Plus:o,sniffUserAgent:i}},getBroadcastKeywordById:function(e){var t=_.find(TS.interop.broadcast_keywords.getAllBroadcastKeywords(),{id:e});if(t)return t;TS.warn("no broadcast_keyword ob found for "+e)},getViewById:function(e){var t=_.find(TS.model.NAMED_VIEWS,{id:e});if(t)return t;TS.warn("no view ob found for "+e)},isSSB:function(){return TS.model.is_our_app},legacyGetYourUserGroupRegExp:function(){return TS.model.your_user_group_regex}}),_.merge(TS.model,i(navigator.userAgent));var e={},t=[-1,0,1],n=function(n,o){n=parseInt(n,10)||1,o=_.includes(t,o)?o:"any";var a={};return Object.keys(e).forEach((function(t){var i=e[t];n>i.tries||"any"!==o&&i.state!=o||(a[t]=e[t])})),{state:o,min_tries:n,count:Object.keys(a).length,obs:a}};function o(e){var t=e.match(/Windows NT ([0-9]+\.[0-9]+)\b/);return!(!t||t.length<2)&&parseInt(t[1],10)>=6}function a(e){var t=e.match(/(?:Mac OS X )([0-9][0-9]_[0-9]+)(_[0-9])?/);return t||(t=e.match(/(?:Mac OS X )([0-9][0-9]\.[0-9]+)(\.[0-9])?/)),t&&t[1]?t[1].replace("_","."):0}function i(e){var t=/(OS X)/g.test(e),n=-1!==e.indexOf("Windows"),i=/(WOW64|Win64)/g.test(e),r=-1!==e.indexOf("Linux"),s=-1!==e.indexOf("CrOS"),l=/(iPad|iPhone|iPod)/g.test(e),_=/(Android)/g.test(e),c=/(Edge)/g.test(e),d=/(Chrome)/g.test(e)&&!c,m=d&&(l||_),u=/(Slack)/g.test(e);return{is_iOS:l,is_IE:/(MSIE|Trident)/g.test(e),is_FF:/(Firefox)/g.test(e),is_edge:c,is_chrome_desktop:d&&!m&&!u,is_chrome_mobile:m,is_safari_desktop:/(Safari)/g.test(e)&&!d&&t&&!l,is_mac:t,mac_version:a(e)||void 0,is_win:n,is_win_64:i,is_win_7_plus:o(e),is_lin:r,is_cros:s,is_our_app:u,is_electron:u}}}()},"sl+y":function(e,t,n){var o=n("cDf5");!function(){var e=function(e,t,n){if(window.console&&console[e]){var o=TS.qs_args.clean_log,a=null!==t;if(n=Array.prototype.slice.call(n),a){if(!TS.console.shouldLog(t))return;n.splice(0,1)}for(var i=!0,s=(n=_.map(n,(function(e){return r(e)}))).length;i&&s;)i="string"==typeof n[s-=1];if(!o||"error"===e||t===parseInt(TS.qs_args.pri,10)&&a)if(i){var l=TS.makeLogDate();a&&!o&&(l+="[** "+t+" **]"),n.unshift(l),console[e](n.join(" "))}else console[e].apply(console,n)}};window.TS||(window.TS={}),TS.console={onStart:function(){TS.console.setAppropriatePri(!0),TS.console.watchForErrors()},count:function(){e("count",null,arguments)},dir:function(e,t,n){if(window.console&&console.dir&&(!e||TS.shouldLog(e))){n=n||"",t=r(t);var o=parseInt(TS.qs_args.dir_json,10);if(o){var a=1==o?"2000":o;try{var i=JSON.stringify(t,null,"  ");if(i.length>a)throw new Error("too long");return void console.info(TS.makeLogDate()+"[** "+e+" **] "+n+" "+i)}catch(o){if("too long"!==o)return void console.info(TS.makeLogDate()+"[** "+e+" **] "+n+" "+t)}}try{var s=_.cloneDeep(t);console.info(TS.makeLogDate()+"[** "+e+" **] "+n+" \ud83d\udc47"),console.dir(s)}catch(e){TS.warn("could not dir ob:"+t+" err:"+e)}}},error:function(){e("error",null,arguments)},group:function(){e("group",null,arguments)},groupCollapsed:function(){e("groupCollapsed",null,arguments)},groupEnd:function(){e("groupEnd",null,arguments)},maybeError:function(t){e("error",t,arguments)},getStackTrace:function(){var e,t="dev"===_.get(TS,"boot_data.version_ts")||_.get(TS,"qs_args.js_path"),n=(new Error).stack;if(t){var o=new Error,a=Promise.resolve();if(_.isFunction(a._attachExtraTrace)){a._attachExtraTrace(o);var i=(n=o.stack||"").split("\n");if(i.length&&i.indexOf("From previous event:")>=0){var r=i.indexOf("From previous event:")+1;n=[i[0]].concat(i.slice(r)).join("\n")}}}return e=n?n.split&&n.split("\n")||["[could not parse stack]",n]:["no stacktrace available"],e=_.filter(e,(function(e){return 0!==e.indexOf("Error")&&(e.trim().length&&-1===e.indexOf("StackTrace"))})),(e=_.map(e,(function(e){return e.trim()}))).join("\n")},info:function(){e("info",null,arguments)},log:function(t){e("log",t,arguments)},logStackTrace:function(e){var t=_.isUndefined(e)?"":e+"\n";TS.console.info(t+"Stacktrace: \u21b4\n",TS.console.getStackTrace())},logStackTraceToBackEnd:function(e,t,n){if(t&&e&&!_.isUndefined(n)){var o=TS.console.getStackTrace(),a=_.get(o.split("\n"),"[1]")||"(unknown)";TS.telemeter.count(t+"_v"+n);var i,r,s,l,c,d={message:e+". Immediate caller: "+a,stack:o},m=a.match(/\((.+):(\d+:\d+)\)/);m&&3==m.length&&(d.fileName=m[1],d.lineNumber=m[2]),i=d,r=t+"_caller_v"+n,s=_.get(window,"TS.model.team.id")||_.get(window,"TS.boot_data.team_id","none"),l=_.get(window,"TS.model.user.id")||_.get(window,"TS.boot_data.user_id","none"),c={description:r,error_json:JSON.stringify(i),team:s,user:l,version:TS.boot_data.version_ts},$.post(TS.boot_data.beacon_error_url,c)}else TS.console.warn("Invalid parameters, will not log stack trace")},profile:function(){e("profile",null,arguments)},profileEnd:function(){e("profileEnd",null,arguments)},replaceConsoleFunction:function(t){var n=e;return e=t,n},setAppropriatePri:function(e){var t="";TS.qs_args.pri&&(t+=TS.qs_args.pri),e&&TS.boot_data.client_logs_pri&&(""!==t&&(t+=","),t+=TS.boot_data.client_logs_pri),TS.model&&TS.prefs&&TS.prefs.prefs_loaded&&TS.prefs.getPref("client_logs_pri")&&(""!==t&&(t+=","),t+=TS.prefs.getPref("client_logs_pri")),""!==t&&(t+=","),t+="0",TS.pri=_.uniq(t.split(",")).join(","),a()},shouldLog:function(e){var t=String(TS.pri).split(",");return-1!==t.indexOf("all")||-1!==t.indexOf("*")||(-1!==t.indexOf(String(e))||void 0!==TS.has_pri[e])},table:function(){e("table",null,arguments)},time:function(){e("time",null,arguments)},timeEnd:function(){e("timeEnd",null,arguments)},timeStamp:function(){e("timeStamp",null,arguments)},warn:function(){e("warn",null,arguments)},maybeWarn:function(t){e("warn",t,arguments)},watchForErrors:function(){TS.boot_data&&TS.boot_data.feature_beacon_js_errors&&TS.interop&&TS.interop.registerGlobalErrorHandler&&TS.interop.registerGlobalErrorHandler()},trace:function(){e("trace",null,arguments)},maybeTrace:function(t){e("trace",t,arguments)},test:function(){return{_maybeRedactFields:r}}};var t,n,a=function(){var e=String(TS.pri).split(",");TS.has_pri=_(Object.keys(TS.boot_data.client_logs||{})).filter((function(t){var n=TS.boot_data.client_logs[t];return e.some((function(e){return"*"===e||(n.numbers.indexOf(parseInt(e,10))>-1||(!!(n.name&&n.name.indexOf(e)>-1)||!!(n.owner&&n.owner.indexOf(e)>-1)))}))})).map((function(e){return parseInt(e,10)>=0?parseInt(e,10):e})).keyBy((function(e){return e})).value()},i={name:1,name_normalized:1,_name_lc:1,real_name:1,_real_name_lc:1,real_name_normalized:1,_real_name_normalized_lc:1,display_name:1,_display_name_lc:1,display_name_normalized:1,_display_name_normalized_lc:1,first_name:1,_first_name_lc:1,last_name:1,_last_name_lc:1,preferred_name:1,full_name:1,purpose:1,topic:1,emoji_use:1,frecency_ent_jumper:1,frecency_ent_jumper_backup:1,frecency_jumper:1,highlight_words:1,custom_contact_email:1,custom_status_presets:1,email:1,fields:1,skype:1,status_text:1,title:1,src:1,text:1,msgs:1,downloadUrl:1,token:1,enterprise_api_token:1,team_url:1,team_name:1},r=function e(t,n){return!TS.boot_data||TS.boot_data.feature_tinyspeck||"dev"===TS.boot_data.version_ts?t:t&&_.isObject(t)?(n?n+=1:n=1,n>=10?t:(o=_.isArray(t)?[]:{},_.each(t,(function(t,a){o[a]=i[a]?"[redacted "+s(t)+"]":e(t,n)})),o)):t;var o},s=(t=this,n={},function(e){var a=o(e);return null===e?"null":e===t?"global":"object"!==a?a:e.nodeType?"DOM node":n[a={}.toString.call(e)]||(n[a]=a.slice(8,-1).toLowerCase())})}()},to8z:function(e,t){!function(){TS.registerModule("environment",{is_apple_webkit:!1,is_dev:!1,is_retina:!1,retina_changed_sig:new signals.Signal,supports_sticky_position:!1,supports_custom_scrollbar:!1,slim_scrollbar:!1,supports_line_clamp:!1,supports_intersection_observer:!1,onStart:function(){c(),i(),function(){if(window.matchMedia){var e="screen and (-webkit-min-device-pixel-ratio: 1.5), screen and (min--moz-device-pixel-ratio: 1.5), screen and (min-device-pixel-ratio: 1.5)";window.matchMedia(e).addListener((function(){var e=TS.environment.is_retina;TS.environment.is_retina=a(),TS.environment.is_retina!==e&&(TS.info("TS.environment.is_retina changed from "+e+" to "+TS.environment.is_retina),TS.environment.retina_changed_sig.dispatch(TS.environment.is_retina),l(),i())}))}}()},doesSupportStickyPosition:function(){return TS.environment.supports_sticky_position},test:function(){var e={_decoratePageWithSupport:i,_initialSetup:c};return Object.defineProperty(e,"cssPropertySupported",{get:function(){return r},set:function(e){r=e}}),Object.defineProperty(e,"cssValueSupported",{get:function(){return s},set:function(e){s=e}}),e}});var e=["-webkit-","-moz-","-o-","-ms-",""],t=["Webkit","Moz","O","ms",""],n=new RegExp("^(-*"+e.slice(0,e.length-1).join("|-*")+")"),o=new RegExp("^("+t.slice(0,t.length-1).join("|")+")");function a(){return window.devicePixelRatio>1}function i(){var e=_.partition(["is_apple_webkit","supports_sticky_position","supports_custom_scrollbar","slim_scrollbar","supports_line_clamp"],(function(e){return TS.environment[e]})),t=$("html");t.addClass(e[0].join(" ")),t.removeClass(e[1].join(" "))}function r(e){if("scrollbar"===e)return function(){var e=document.createElement("div");e.id="__sb",e.style.overflow="scroll",e.style.width="40px",e.style.height="40px",e.style.position="absolute",e.style.left="-40px",e.innerHTML="&shy;<style>#__sb::-webkit-scrollbar {width:10px;}</style>",document.body.appendChild(e);var t=e.offsetWidth-e.clientWidth==10;return document.body.removeChild(e),t}();var a=document.createElement("css_property_supported").style;e=e.replace(o,"").replace(/([A-Z]+)([A-Z][a-z])/g,"$1-$2").replace(/([a-z\d])([A-Z])/g,"$1-$2").replace(n,"").toLowerCase(),e=_.camelCase(e,"-");var i=_.upperFirst(e);return void 0!==a[e]||t.some((function(t){return void 0!==a[t+i]||void 0!==a[t+e]}))}function s(t,o){var a=document.createElement("css_value_supported");return o=o.replace(n,"").toLowerCase(),a.style.cssText=t+":"+e.join(o+";"+t+":")+o+";",!!a.style.length}function l(){TS.environment.supports_sticky_position=s("position","sticky"),"Chrome"===window.bowser.name&&parseInt(window.bowser.version,10)<57&&a()&&(TS.environment.supports_sticky_position=!1),TS.redux.dispatch(TS.interop.redux.models.environment.setSupportsStickyPosition(TS.environment.supports_sticky_position))}function c(){TS.environment.is_apple_webkit=!(!TS.model.mac_ssb_version&&!TS.model.is_safari_desktop),TS.environment.is_dev="dev"===TS.boot_data.version_ts,TS.environment.is_retina=a(),TS.environment.supports_custom_scrollbar=r("scrollbar"),TS.environment.slim_scrollbar=TS.environment.supports_custom_scrollbar&&TS.boot_data.feature_slim_scrollbar,TS.environment.supports_line_clamp=r("line-clamp"),TS.environment.supports_intersection_observer="function"==typeof IntersectionObserver,l()}}()},uyPQ:function(e,t){!function(){TS.registerModule("ui.file_share",{handleDraghoverstartFromWinSSB:function(){$(window).trigger("draghoverstart",[null,!0])},handleDraghoverendFromWinSSB:function(){$(window).trigger("draghoverend")},handleDropFromWinSSB:function(){},preselected:[],bindFileShareDropdowns:function(n,i,r,s){var l=$("#select_share_channels");if(1==l.length){TS.ui.file_share.preselected=r||[],t=n;var c=TS.ui.file_share.promiseToGetFileShareSelectOptions;s&&(c=a),e={append:!0,single:!0,data_promise:c,approx_item_height:30,tab_to_nav:!0,placeholder_text:TS.interop.i18n.t("Search channels and people ...","files"),template:function(e){return new Handlebars.SafeString(TS.templates.file_sharing_channel_row({item:e.model_ob}))},onItemAdded:o,onListHidden:function(){$("#select_share_channels .lfs_list_container").removeClass("new_channel_container")},renderDividerFunc:function(e,t){if(t.create_channel)return e.html(TS.interop.i18n.t('<span class="new">No items matched <strong>{query}</strong></span>',"files")({query:TS.interop.i18n.safeString(_.escape(t.label))})),void $("#select_share_channels .lfs_list_container").addClass("new_channel_container");$("#select_share_channels .lfs_list_container").removeClass("new_channel_container"),e.html(_.escape(t.label)).removeClass("new_channel_not_found")},setValue:function(e){var t,n,o,a=this.data.length;for(t=0;t<a;t+=1)for(o=this.data[t].children.length,n=0;n<o;n+=1)if(this.data[t].children[n].model_ob.id===e)return void this.$container.find('.lfs_item[data-lfs-id="'+[t,n]+'"]').trigger("click")}},l.lazyFilterSelect(e),l.css({width:"60%"}),l.one("remove",(function(){t=!1,$(this).lazyFilterSelect("destroy")})),$("#file_sharing_div").on("keydown",(function(e){13==e.keyCode&&e.stopPropagation()}))}else alert("error: "+l.length+" $('#select_share_channels')s")},promiseToGetFileShareSelectOptions:function(e){var n=i();return TS.searcher.search(e,{members:{include_self:!0},channels:{include_archived:!1,can_post:!0},groups:{include_archived:!1},mpims:!0,sort:{allow_empty_query:!0}}).then((function(o){var a=!1;o.all_items_fetched=!0,o.filter((function(e){return TS.interop.utility.looksLikeMemberId(e.model_ob.id)?TS.permissions.members.canUserSeeMember(e.model_ob):TS.permissions.members.canPostInChannel(e.model_ob)})).forEach((function(e){e.lfs_id=e.model_ob.id,e.preselected=r(e.model_ob.id,n),e.preselected&&(a=!0)}));var i=!1;if(n&&(TS.interop.utility.looksLikeMemberId(n)?i=TS.redux.channels.getImByMemberId(n):TS.interop.utility.looksLikeChannelId(n)&&(i=TS.redux.channels.getEntityById(n))),!e&&!a&&i)if(_.get(i,"is_im")){var l=TS.interop.members.getMemberById(i.user);o.push({preselected:!0,lfs_id:l.id,model_ob:l})}else i&&TS.permissions.members.canPostInChannel(i)&&o.push({preselected:!0,lfs_id:i.id,model_ob:i});return i&&(TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,i),s(i)),o}))},bindFileShareShareToggle:function(){$("#share_cb").bind("click.toggle_select_list",(function(){$(this).prop("checked")?$(".file_share_select").prop("disabled",!1):$(".file_share_select").prop("disabled",!0),TS.ui.file_share.updateAtChannelWarningNote(),TS.ui.file_share.updateAtChannelBlockedNote()}))},bindFileShareCommentField:function(){$("#file_comment_textarea").bind("keyup",(function(){TS.ui.file_share.updateAtChannelWarningNote(),TS.ui.file_share.updateAtChannelBlockedNote()}))},updateAtChannelWarningNote:function(e){var t,o,a=TS.utility.contenteditable.value($("#file_comment_textarea")),i=$("#select_share_channels").lazyFilterSelect("value")[0];i&&(t=i.model_ob.id||"");var r=$("#select_share_at_channel_note");if(TS.ui.needToShowAtChannelWarning(t,a)){var s=TS.format.cleanMsg(a),l="",c=!0;TS.interop.messages.atEveryoneRegExp.test(s)?l="everyone":TS.interop.messages.atChannelRegExp.test(s)?l="channel":TS.interop.messages.atGroupRegExp.test(s)&&(l="group");var d=TS.redux.channels.getEntityById(t);if(d&&!d.is_im||(c=!1),c&&!n(d)&&!e){var m=TS.interop.memberCounts.getOrFetchMemberCounts(d.id);m.promise?(o=0,m.promise.then(TS.ui.file_share.updateAtChannelWarningNote),c=!1):(o=_.get(m,"counts.member_count",1),o-=1)}var u=[];if(_.isUndefined(o)&&c&&d&&!d.is_im&&(u=_(d.members).map((function(e){return TS.interop.members.getMemberById(e)})).compact().filter(TS.utility.members.isMemberNonBotNonDeletedNonSelf).sortBy(TS.interop.members.memberSorterByName).value()).length<1&&(c=!1),c){var p=TS.templates.at_channel_warning_note({keyword:l,member_count:_.isUndefined(o)?u.length:o});return r.html(p),void r.removeClass("hidden")}}r.addClass("hidden")},updateAtChannelBlockedNote:function(){var e,t=TS.utility.contenteditable.value($("#file_comment_textarea")),n=$("#select_share_channels").lazyFilterSelect("value")[0],o=$("#share_cb"),a=0===o.length||o.is(":checked");n&&a&&(e=n.model_ob.id);var i,r=$("#select_share_at_channel_blocked_note"),s=$(".modal .btn.dialog_go");TS.interop.utility.looksLikeMemberId(e)||(i=TS.ui.needToBlockAtChannelKeyword(t,null,e)),i?(r.html(TS.templates.at_channel_blocked_note({keyword:i})),r.removeClass("hidden"),s.addClass("disabled")):(r.addClass("hidden"),s.removeClass("disabled"))},shouldBlockUploadDialogSubmission:function(){var e,t,n=TS.utility.contenteditable.value($("#file_comment_textarea")),o=$("#select_share_channels").lazyFilterSelect("value")[0],a=$("#share_cb"),i=0===a.length||a.is(":checked");return o&&i&&(e=o.model_ob.id),TS.interop.utility.looksLikeMemberId(e)||(t=TS.ui.needToBlockAtChannelKeyword(n,null,e)),!!t&&(TS.info("Can't submit dialog because comment contains "+t),!0)},fileShowPublicUrlDialog:function(e){var t=l(e);if(t&&t.public_url_shared){var n=$('<input type="text" id="public_url" class="full_width small">').attr("value",t.permalink_public)[0].outerHTML,o=TS.interop.i18n.t("Public link to this file","files")();TS.generic_dialog.start({title:o,body:n,show_cancel_button:!1,show_close_button:!0,show_secondary_go_button:!0,secondary_go_button_class:"btn_outline",secondary_go_button_text:TS.interop.i18n.t("Revoke","files")(),show_go_button:!0,go_button_text:TS.interop.i18n.t("Done","files")(),esc_for_ok:!0,onSecondaryGo:function(){TS.ui.file_share.fileRevokePublicLink(t.id)},onGo:function(){TS.generic_dialog.cancel()},onShow:function(){TS.generic_dialog.div.on("shown",(function e(){TS.generic_dialog.div.off("shown",e),$("#public_url").select().focus().on("keydown",(function(e){e.which==TS.utility.keymap.esc&&TS.generic_dialog.cancel()}))}))}})}},fileRevokePublicLink:function(e){var t=TS.files.getFileById(e);if(!t)return!1;var n=TS.interop.i18n.t("Revoke public file link","files")(),o='<p class="no_bottom_margin">'+TS.interop.i18n.t("This will disable the Public Link for this file. This will cause any previously shared links to stop working.<br /><br />Are you sure you want to revoke this public link?","files")()+"</p>";TS.generic_dialog.start({title:n,body:o,go_button_text:TS.interop.i18n.t("Revoke it","files")(),go_button_class:"btn_warning",onGo:function(){TS.files.upsertAndSignal({id:t.id,public_url_shared:!1},"revokePublicLink"),TS.interop.api.callExpedited("files.revokePublicURL",{file:t.id})}})},test:function(){var e={};return Object.defineProperty(e,"_author",{get:function(){return t},set:function(e){t=e}}),Object.defineProperty(e,"_populateDisabledInputMsg",{get:function(){return s},set:function(e){s=e}}),Object.defineProperty(e,"_haveAllMembersForModelOb",{get:function(){return n},set:function(e){n=e}}),e}});var e={},t=!1,n=function(e){if(e.is_channel&&!e.is_group)return!1;var t=e.members||[e.user],n=_.map(TS.model.members,"id");return!_.difference(t,n).length},o=function(e){if($("#select_share_channels .lfs_input_container").removeClass("error"),e.model_ob.create_channel)return $("#select_share_channels_note").removeClass("hidden"),$("#select_share_channels .lfs_value .lfs_item").addClass("new_channel_item"),$(".modal .dialog_go").text(TS.interop.i18n.t("Next","files")()),void TS.telemeter.count("share_picker_create_clicked");var n;if($("#select_share_channels .lfs_value .lfs_item").removeClass("new_channel_item"),$(".modal .dialog_go").text(TS.interop.i18n.t("Share","files")()),n=e.model_ob.id){$("#share_model_ob_id").val(n),$("#select_share_channel_warning, #select_share_channels_join_note").addClass("hidden");var o=e.model_ob||{};TS.interop.utility.looksLikeMemberId(o.id)&&(o=TS.redux.channels.getImByMemberId(o.id)||o),TS.ui.share_message_dialog.maybeToggleSharedChannelsWarning(t,o),s(o);var a=TS.interop.rules.channels.isExternallySharedChannel(o)||t&&TS.interop.members.isExternal(t);a?($('label[for="file_comment_textarea"]').addClass("subtle_silver"),TS.utility.contenteditable.disable($("#file_sharing_div #file_comment_textarea")),$("#select_share_at_channel_list").addClass("subtle_silver")):($('label[for="file_comment_textarea"]').removeClass("subtle_silver"),TS.utility.contenteditable.enable($("#file_sharing_div #file_comment_textarea")),$("#select_share_at_channel_list").removeClass("subtle_silver"));var i=TS.interop.rules.channels.getConnectedTeamIds(TS.redux.getState(),o);if(TS.interop.rules.channels.isExternallySharedChannel(o)&&i&&i.length){$("#select_share_channel_warning").removeClass("hidden");var r=TS.interop.i18n.safeString(TS.interop.i18n.listify(_.map(i,TS.teams.getTeamNameById)).join(""));$("#select_share_channel_warning_text").html(TS.interop.i18n.t("<strong>This is a shared channel.</strong> Messages and files sent here will be seen by members of <strong>{shared_teams_list}</strong>.","shared_channels")({shared_teams_list:r}))}o.is_im||o.is_mpim?$("#share_context_label").text(TS.interop.i18n.t("Share with","files")()):($("#share_context_label").text(TS.interop.i18n.t("Share in","files")()),o.is_channel&&!o.is_member&&$("#select_share_channels_join_note").removeClass("hidden")),$("#share_cb").prop("checked",!0),a||(TS.ui.file_share.updateAtChannelWarningNote(),TS.ui.file_share.updateAtChannelBlockedNote())}},a=function(e){return TS.ui.file_share.promiseToGetFileShareSelectOptions(e).then((function(t){if($("#select_share_channels .lfs_list_container").removeClass("new_channel_container"),0===t.length){var n=TS.utility.channels.getPermissibleChannelName(e);n&&(t.push({lfs_group:!0,label:e,create_channel:!0,children:[{lfs_id:"c."+n,model_ob:{create_channel:!0,name:n}}]}),$("#select_share_channels .lfs_list_container").addClass("new_channel_container"),TS.telemeter.count("share_picker_create_shown"))}return t}))},i=function(){var e=TS.shared.legacyGetActiveModelOb();return e?e.id:null},r=function(e,t){return TS.ui.file_share.preselected.length?TS.ui.file_share.preselected.indexOf(e)>-1:e===t},s=function(e){if(_.isObject(e)){TS.interop.utility.looksLikeMemberId(e.id)&&(e=TS.redux.channels.getImByMemberId(e.id)||e);var n="";n=t&&TS.interop.members.isExternal(t)?TS.interop.i18n.t("Only members of {team_name} can comment on this file.","shared_channels")({team_name:TS.teams.getTeamNameByMember(t)}):e.is_channel||e.is_group?TS.interop.i18n.t("Comments are disabled in shared channels.","shared_channels")():TS.interop.i18n.t("Comments are disabled when sharing with another\xa0workspace.","shared_channels")(),$("#file_comment_textarea").attr("data-disabled-text",n)}},l=function(e){return _.isString(e)?TS.files.getFileById(e):e}}()},w8u4:function(e,t,n){"use strict";n.r(t);n("sl+y"),n("Qic8"),n("bREN"),n("cYWi"),n("VoEv"),n("RsIA"),n("rV0I"),n("to8z"),n("7pQh"),n("lGk4"),n("0MN+"),n("uyPQ")}},[["w8u4","webpack.manifest"]]]);